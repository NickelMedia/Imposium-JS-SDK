// [IMPOSIUM-JS-SDK]  Version: 2.1.0  
 !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Imposium",[],t):"object"==typeof exports?exports.Imposium=t():e.Imposium=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=59)}([function(e,t,n){var r=n(21)("wks"),o=n(15),i=n(1).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";var r=n(52),o=n(103),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;r>n;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){t[r]="object"==typeof t[r]&&"object"==typeof n?e(t[r],n):n}for(var r=0,o=arguments.length;o>r;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var n=e.exports={version:"2.6.4"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e){e.exports={client:{defaultConfig:{accessToken:"",storyId:"",actId:"",sceneId:"",environment:"production"},maxCreateRetries:3},api:{production:"https://api.imposium.com",staging:"https://api.staging.imposium.com",local:"https://api",currentVersion:"2.0.0",version:"X-Imposium-Api-Version",hmac:"X-Imposium-Access-Key",jwt:"Authorization",img:"https://cdn.imposium.com/SampleJPGImage_1mb.jpg"},stomp:{production:"wss://stomp.prod.k8s.nickel.media/ws",staging:"wss://stomp.staging.k8s.nickel.media/ws",local:"ws://127.0.0.1:15674/ws",exchange:"/exchange/imposium/",username:"imposium_stomp",password:"Teehe1ceeMe7Pe1d"},messageConsumer:{maxReconnects:5,minReconnects:0,errorOverTcp:"Server failure.",videoSceneKey:"VideoScene01",emitTypes:{scene:"gotScene",message:"gotMessage",complete:"actComplete"}},analytics:{exceptionProp:"UA-123315989-1",baseUrl:"https://ssl.google-analytics.com/collect",lsLookup:"imposium_js_ga_cid",gaPropPlaceholder:"[id_placeholder]",cidPlaceholder:"[cid_placeholder]"},videoPlayer:{defaultConfig:{volume:1,preload:"auto",loop:!1,muted:!1,autoLoad:!0,autoPlay:!0,controls:!0,crossOrigin:"anonymous",qualityOverride:null},playbackEvents:[0,.25,.5,.75],checkPlaybackRateMs:100,volumeMin:0,volumeMax:1,bandwidth:{low:2.4,mid:8},compression:{stream:"m3u8",low:"mp4_480",mid:"mp4_720",high:"mp4_1080"},bandwidthSamples:5,hlsSupportLevels:{native:"native",hlsjs:"hls-js"},streamType:"application/vnd.apple.mpegurl"}}},function(e,t,n){var r=n(7),o=n(22);e.exports=n(9)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(4),o=n(40),i=n(30),a=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(1),o=n(6),i=n(10),a=n(15)("src"),s=n(62),c=(""+s).split("toString");n(3).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(t+""))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var r=n(44),o=n(32);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports={}},function(e,t,n){var r=n(43),o=n(34);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),o=n(20),i=n(57),a=n(5).analytics,s=n(129),c=function(){function e(){}return e.logWarning=function(e,t){console.warn("IMPOSIUM\n"+s[e][t])},e.trapError=function(t,n,r){if(void 0===r&&(r=null),r&&r(t),t.log)if(t.networkError)if(t.networkError.hasOwnProperty("config"))e.logError(t,n);else if(t.lazy)e.logError(t,n);else{var i=new o.UncaughtError("generic",t.networkError);e.logError(i,n)}else e.logError(t,n);else{i=new o.UncaughtError("generic",t);e.logError(i,n)}},e.errorsProperty=a.exceptionProp,e.logError=function(t,n){t.log(),e.traceError(t,n)},e.traceError=function(t,n){var o="Version: "+i.version+"*";(t.eventName&&(o+="Event name: "+t.eventName+"*"),t.experienceId&&(o+="Experience ID: "+t.experienceId+"*"),t.networkError)?o+="Url: "+(t.networkError.config?t.networkError.config.url:"stomp connection")+"*Stack: "+t.networkError:o+=t.uncaughtError?"Stack: "+t.uncaughtError:"Stack: "+t.stack;r.default.send({prp:e.errorsProperty,t:"event",ec:t.type,ea:o,el:n,ev:0})},e}();t.default=c},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(128),a={ENV:"environment",MODERATION:"moderation",CLIENT_CONFIG:"clientConfiguration",PLAYER_CONFIG:"playerConfiguration",NETWORK:"network",UNCAUGHT:"uncaught"},s=function(e){function t(n,r){var o=e.call(this,n)||this;return o.prefix="[IMPOSIUM ERROR]",o.type="",Error.captureStackTrace&&Error.captureStackTrace(o,t),o.type=r,o}return o(t,e),t}(Error);t.ImposiumError=s;var c=function(e){function t(n,r){var o=e.call(this,i[a.MODERATION][n],a.MODERATION)||this;return o.experienceId=null,o.log=function(){console.error(o.prefix+"\n            \nReason: Moderation Issue\n            \nExperience ID: "+o.experienceId+"\n            \nMessage: "+o.message)},Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return o(t,e),t}(s);t.ModerationError=c;var u=function(e){function t(n,r){var o=e.call(this,i[a.CLIENT_CONFIG][n],a.CLIENT_CONFIG)||this;return o.eventName="",o.log=function(){console.error(o.prefix+"\n            \nReason: Invalid client configuration\n            \nMessage: "+o.message+"\n            \nEvent name: "+o.eventName)},Error.captureStackTrace&&Error.captureStackTrace(o,t),o.eventName=r||"<not_set>",o}return o(t,e),t}(s);t.ClientConfigurationError=u;var l=function(e){function t(n,r){var o=e.call(this,i[a.PLAYER_CONFIG][n],a.PLAYER_CONFIG)||this;return o.eventName="",o.log=function(){console.error(o.prefix+"\n            \nReason: Invalid player configuration\n            \nMessage: "+o.message+"\n            \nEvent name: "+o.eventName)},Error.captureStackTrace&&Error.captureStackTrace(o,t),o.eventName=r||"<not_set>",o}return o(t,e),t}(s);t.PlayerConfigurationError=l;var f=function(e){function t(n,r,o,s){void 0===s&&(s=!1);var c=e.call(this,i[a.NETWORK][n],a.NETWORK)||this;return c.experienceId=null,c.networkError=null,c.lazy=!1,c.log=function(){console.error(c.prefix+"\n            \nReason: Network related error\n            \nMessage: "+c.message+"\n            \nExperience ID: "+c.experienceId+"\n            \nNetwork Error: ",c.networkError)},Error.captureStackTrace&&Error.captureStackTrace(c,t),c.experienceId=r||"<not_set>",c.networkError=o,c.lazy=s,c}return o(t,e),t}(s);t.NetworkError=f;var p=function(e){function t(t,n){var r=e.call(this,i[a.UNCAUGHT][t],a.UNCAUGHT)||this;return r.uncaughtError=null,r.log=function(){console.error(r.prefix+"\n            \nReason: Unknown\n            \nMessage: "+r.message+"\n            \nError: ",r.uncaughtError)},Error.captureStackTrace&&Error.captureStackTrace(r,f),r.uncaughtError=n,r}return o(t,e),t}(s);t.UncaughtError=p},function(e,t,n){var r=n(3),o=n(1),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(14)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(1),o=n(3),i=n(6),a=n(11),s=n(24),c=function(e,t,n){var u,l,f,p,d=e&c.F,h=e&c.G,v=e&c.P,y=e&c.B,m=h?r:e&c.S?r[t]||(r[t]={}):(r[t]||{}).prototype,g=h?o:o[t]||(o[t]={}),E=g.prototype||(g.prototype={});for(u in h&&(n=t),n)f=((l=!d&&m&&void 0!==m[u])?m:n)[u],p=y&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,m&&a(m,u,f,e&c.U),g[u]!=f&&i(g,u,p),v&&E[u]!=f&&(E[u]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(25);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(7).f,o=n(10),i=n(0)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(13),o=n(0)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(8),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(21)("keys"),o=n(15);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(101),i=n(121),a=n(124),s=n(38),c=n(5).api,u=function(){function e(t,n){var a=this;this.http=null,this.configureClient=function(t,n){var i,s=c.version,u=c.currentVersion;a.http=o.default.create({baseURL:c[n],headers:r({},a.getAuthHeader(t),(i={},i[s]=u,i))}),e.retry(a.http,{retryDelay:e.retry.exponentialDelay})},this.getTrackingId=function(e){var t=a.http.get;return new Promise(function(n,r){t("/story/"+e+"/ga").then(function(e){n(e.data)}).catch(function(e){r(e)})})},this.getExperience=function(e){var t=a.http.get;return new Promise(function(n,r){t("/experience/"+e).then(function(e){n(e.data)}).catch(function(e){r(e)})})},this.postExperience=function(e,t,n,r,o){void 0===o&&(o=null);var i=a.doPostExperience,c=a.uploadProgress,u=s.inventoryToFormData(e,t),l={onUploadProgress:function(e){return c(e,o)}};return u.append("id",r),i(n,u,l)},this.invokeStream=function(e){var t=a.http.post;return new Promise(function(n,r){t("/experience/"+e+"/trigger-event").then(function(e){n(e.data.job_id)}).catch(function(e){r(e)})})},this.getAuthHeader=function(e){var t,n,r=c.jwt,o=c.hmac;try{return i(e),(t={})[r]=e,t}catch(t){return(n={})[o]=e,n}},this.doPostExperience=function(e,t,n){var r=a.http.post,o=e?"/experience/render":"/experience";return new Promise(function(e,i){r(o,t,n).then(function(t){e(t.data)}).catch(function(e){i(e)})})},this.uploadProgress=function(e,t){(void 0===t&&(t=null),t)&&t(Math.round(e.loaded/e.total*100))},this.configureClient(t,n)}return e.getGATrackingPixel=function(e){var t=o.default.get;return new Promise(function(n,r){t(e).then(function(e){n()}).catch(function(e){r(e)})})},e.checkBandwidth=function(){var t=o.default.get,n=e.testImage+"?bust="+Math.random(),r={responseType:"blob",timeout:1500};return new Promise(function(e,o){var i=(new Date).getTime();t(n,r).then(function(t){e(s.calculateMbps(i,t.data.size))}).catch(function(e){o(e)})})},e.testImage=c.img,e.retry=a,e}();t.default=u},function(e,t,n){"use strict";!function(t){var r=n(2),o=n(106),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:("undefined"!=typeof XMLHttpRequest?s=n(53):void 0!==t&&(s=n(53)),s),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),""+e):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&300>e}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){c.headers[e]={}}),r.forEach(["post","put","patch"],function(e){c.headers[e]=r.merge(i)}),e.exports=c}(n(105))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepConfig=function(e,t){var n=Object.keys(t);for(var r in e)-1===n.indexOf(r)&&delete e[r]},t.inRangeNumeric=function(e,t,n){return 0>=(e-t)*(e-n)},t.isFunc=function(e){return"[object Function]"===Object.prototype.toString.call(e)},t.keyExists=function(e,t){return~Object.keys(e).map(function(t){return e[t]}).indexOf(t)},t.cloneWithKeys=function(e){return Object.keys(e).reduce(function(e,t){return e[t]=null,e},{})},t.calculateMbps=function(e,t){return 8*t/(((new Date).getTime()-e)/1e3)/1048576},t.calculateAverageMbps=function(e){var t=e.reduce(function(e,t){return e+t});return parseFloat((t/e.length).toFixed(2))},t.generateUUID=function(){var e=window.performance,t=(new Date).getTime();return void 0!==e&&"function"==typeof e.now&&(t+=e.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)})},t.inventoryToFormData=function(e,t){var n=new FormData;for(var r in n.append("story_id",e),t)if(t[r]){var o=t[r];if(o&&"file"===o.type){var i=o.files;i.length>0?(t[r]="",n.append(r,i[0])):t[r]=""}else(o&&o instanceof Blob||o instanceof File)&&(t[r]="",n.append(r,o,"inventory.png"));n.append("inventory["+r+"]",t[r])}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),o=n(19),i=n(5).analytics,a=function(){function e(){}return e.setup=function(){e.request.clientId=e.checkCache()},e.send=function(t){(0,e.makeRequest)((0,e.concatParams)(t))},e.emitter=null,e.retryTimeout=null,e.request={baseUrl:i.baseUrl,cacheKey:i.lsLookup,clientId:i.cidPlaceholder},e.checkCache=function(){var t=e.setCache,n=e.generateGuid,r=e.request.cacheKey;try{var o=JSON.parse(localStorage.getItem(r));if(o){var i=o.guid;if(o.expiry>new Date)return i;localStorage.removeItem(r)}return t(n())}catch(e){return n()}},e.setCache=function(t){try{var n=e.request.cacheKey,r=new Date,o={guid:t,expiry:r.setFullYear(r.getFullYear()+2)};localStorage.setItem(n,JSON.stringify(o))}catch(e){return t}return t},e.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e.generateGuid=function(){var t=e.s4;return""+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.getRandom=function(){return""+Math.round((new Date).getTime()/1e3)},e.concatParams=function(t){var n=e.getRandom,r=e.request,o=r.baseUrl,i=r.clientId,a=t.prp;delete t.prp;for(var s=o+"?v=1&tid="+a+"&z="+n()+"&cid="+i,c=0,u=Object.keys(t);u.length>c;c++){var l=u[c];s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(t[l])}return s},e.makeRequest=function(e){r.default.getGATrackingPixel(e).catch(function(e){o.default.logWarning("analytics","requestFailed")})},e}();t.default=a},function(e,t,n){e.exports=!n(9)&&!n(16)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(14),o=n(23),i=n(11),a=n(6),s=n(17),c=n(65),u=n(26),l=n(69),f=n(0)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,h,v,y,m){c(n,t,h);var g,E,b,w=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",x="values"==v,O=!1,S=e.prototype,C=S[f]||S["@@iterator"]||v&&S[v],P=C||w(v),T=v?x?w("entries"):P:void 0,k="Array"==t&&S.entries||C;if(k&&(b=l(k.call(new e)))!==Object.prototype&&b.next&&(u(b,_,!0),r||"function"==typeof b[f]||a(b,f,d)),x&&C&&"values"!==C.name&&(O=!0,P=function(){return C.call(this)}),r&&!m||!p&&!O&&S[f]||a(S,f,P),s[t]=P,s[_]=d,v)if(g={values:x?P:w("values"),keys:y?P:w("keys"),entries:T},m)for(E in g)E in S||i(S,E,g[E]);else o(o.P+o.F*(p||O),t,g);return g}},function(e,t,n){var r=n(4),o=n(66),i=n(34),a=n(33)("IE_PROTO"),s=function(){},c=function(){var e,t=n(29)("iframe"),r=i.length;for(t.style.display="none",n(46).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(10),o=n(12),i=n(67)(!1),a=n(33)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(13);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(31),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(32);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r,o,i,a=n(24),s=n(81),c=n(46),u=n(29),l=n(1),f=l.process,p=l.setImmediate,d=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,y=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},E=function(e){g.call(e.data)};p&&d||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},d=function(e){delete m[e]},"process"==n(13)(f)?r=function(e){f.nextTick(a(g,e,1))}:v&&v.now?r=function(e){v.now(a(g,e,1))}:h?(i=(o=new h).port2,o.port1.onmessage=E,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",E,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:p,clear:d}},function(e,t,n){"use strict";var r=n(25);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){t.f=n(0)},function(e,t,n){var r=n(43),o=n(34).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),r=0;n.length>r;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(2),o=n(107),i=n(109),a=n(110),s=n(111),c=n(54),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(112);e.exports=function(e){return new Promise(function(t,l){var f=e.data,p=e.headers;r.isFormData(f)&&delete p["Content-Type"];var d=new XMLHttpRequest,h="onreadystatechange",v=!1;("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||s(e.url)||(d=new window.XDomainRequest,h="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth)&&(p.Authorization="Basic "+u((e.auth.username||"")+":"+(e.auth.password||"")));if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[h]=function(){if(d&&(4===d.readyState||v)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null;o(t,l,{data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:e,request:d}),d=null}},d.onerror=function(){l(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var y=n(113),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;m&&(p[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(p,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),l(e),d=null)}),void 0===f&&(f=null),d.send(f)})}},function(e,t,n){"use strict";var r=n(108);e.exports=function(e,t,n,o,i){return r(Error(e),t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="2.1.0",t.printVersion=function(){console.log("%cPowered By%c Imposium%c v"+t.version+"%c https://imposium.com","text-transform: uppercase; padding: 5px 0px 5px 5px; background-color: black; color: white;","text-transform: uppercase; padding: 5px 0px 5px 0px; background-color: black; color: #a1b83a;","padding: 5px 5px 5px 0px; background-color: black; color: white;","padding: 5px 5px 5px 0px;")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(133),o=n(39),i=n(19),a=n(20),s=n(5).videoPlayer,c=function(){function e(t){var n=this;this.node=null,this.storyId="",this.baseMediaEvents={play:function(){return n.onPlay()},pause:function(){return n.onPause()},ended:function(){return n.onEnd()},loadStart:function(){return n.onLoad()}},this.gaProperty="",this.experienceId="",this.prevPlaybackEvent=0,this.playbackInterval=-1,this.deferredGaCalls=new r.default,this.remove=function(){for(var e=n.baseMediaEvents,t=n.node,r=0,o=Object.keys(e);o.length>r;r++){var i=o[r];t.removeEventListener(i,e[i])}},this.setGaProperty=function(e){var t=n.deferredGaCalls;for(n.gaProperty&&n.gaProperty!==e&&!t.isEmpty()&&t.reset(),n.gaProperty=e;t.peek();)o.default.send(t.peek()),t.pop()},this.setStoryId=function(e){n.storyId=e},this.setExperienceId=function(e){n.experienceId=e},this.onLoad=function(){var e=n.gaProperty,t=n.deferredGaCalls,r={prp:e,t:"event",ec:"video_player",ea:"view",el:n.experienceId};e?o.default.send(r):t.enqueue(r)},this.onPlay=function(){var t=n.gaProperty,r=n.deferredGaCalls,i=window.setInterval,a={prp:t,t:"event",ec:"video_player",ea:"play",el:n.experienceId};clearInterval(n.playbackInterval),n.playbackInterval=i(function(){return n.checkPlayback()},e.intervalRate),t?o.default.send(a):r.enqueue(a)},this.onPause=function(){var e=n.gaProperty,t=n.deferredGaCalls,r=n.node,i={prp:e,t:"event",ec:"video_player",ea:"pause",el:n.experienceId};clearInterval(n.playbackInterval),r.duration!==r.currentTime&&(e?o.default.send(i):t.enqueue(i))},this.checkPlayback=function(){var t=n.node,r=n.gaProperty,i=n.deferredGaCalls,a=n.playbackInterval;if(t){var s=e.playbackEvents[n.prevPlaybackEvent];if(t.currentTime/t.duration>s){var c={prp:r,t:"event",ec:"video_player",ea:"playback_"+s,el:n.experienceId};r?o.default.send(c):i.enqueue(c),n.prevPlaybackEvent++}}else clearInterval(a)},this.onEnd=function(){var e=n.gaProperty,t=n.experienceId,r=n.deferredGaCalls;clearInterval(n.playbackInterval);var i={prp:e,t:"event",ec:"video_player",ea:"playback_1",el:t};e?o.default.send(i):r.enqueue(i),n.prevPlaybackEvent=0};try{if(!(t instanceof HTMLVideoElement))throw new a.PlayerConfigurationError("invalidPlayerRef",null);var s=this.baseMediaEvents;this.node=t;for(var c=0,u=Object.keys(s);u.length>c;c++){var l=u[c];this.node.addEventListener(l,this.baseMediaEvents[l])}}catch(e){i.default.trapError(e,"")}}return e.intervalRate=s.checkPlaybackRateMs,e.playbackEvents=s.playbackEvents,e}();t.default=c},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),n(60),n(89),n(97);var o=n(100);t.Client=o.default;var i=n(134);t.Player=i.default;var a=[r({},o.default.events),r({},i.default.events)],s=a[1];t.Events=a[0],t.PlayerEvents=s},function(e,t,n){n(61),n(63),n(70),n(74),e.exports=n(3).Promise},function(e,t,n){"use strict";var r=n(28),o={};o[n(0)("toStringTag")]="z",o+""!="[object z]"&&n(11)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){e.exports=n(21)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";var r=n(64)(!0);n(41)(String,"String",function(e){this._t=e+"",this._i=0},function(){var e,t=this._t,n=this._i;return t.length>n?(e=r(t,n),this._i+=e.length,{value:e,done:!1}):{value:void 0,done:!0}})},function(e,t,n){var r=n(31),o=n(32);e.exports=function(e){return function(t,n){var i,a,s=o(t)+"",c=r(n),u=s.length;return 0>c||c>=u?e?"":void 0:55296>(i=s.charCodeAt(c))||i>56319||c+1===u||56320>(a=s.charCodeAt(c+1))||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(42),o=n(22),i=n(26),a={};n(6)(a,n(0)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(7),o=n(4),i=n(18);e.exports=n(9)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(12),o=n(45),i=n(68);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(31),o=Math.max,i=Math.min;e.exports=function(e,t){return 0>(e=r(e))?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(10),o=n(47),i=n(33)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){for(var r=n(71),o=n(18),i=n(11),a=n(1),s=n(6),c=n(17),u=n(0),l=u("iterator"),f=u("toStringTag"),p=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(d),v=0;h.length>v;v++){var y,m=h[v],g=d[m],E=a[m],b=E&&E.prototype;if(b&&(b[l]||s(b,l,p),b[f]||s(b,f,m),c[m]=p,g))for(y in r)b[y]||i(b,y,r[y],!0)}},function(e,t,n){"use strict";var r=n(72),o=n(73),i=n(17),a=n(12);e.exports=n(41)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return e&&e.length>n?o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]]):(this._t=void 0,o(1))},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(0)("unscopables"),o=Array.prototype;void 0==o[r]&&n(6)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,o,i,a,s=n(14),c=n(1),u=n(24),l=n(28),f=n(23),p=n(8),d=n(25),h=n(75),v=n(76),y=n(80),m=n(48).set,g=n(82)(),E=n(49),b=n(83),w=n(84),_=n(85),x=c.TypeError,O=c.process,S=O&&O.versions,C=S&&S.v8||"",P=c.Promise,T="process"==l(O),k=function(){},R=o=E.f,I=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(0)("species")]=function(e){e(k,k)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,s=o?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(o||(2==e._h&&M(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?u(x("Promise-chain cycle")):(i=A(n))?i.call(n,c,u):c(n)):u(r)}catch(e){l&&!a&&l.exit(),u(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(c,function(){var t,n,r,o=e._v,i=D(e);if(i&&(t=b(function(){T?O.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=T||D(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){m.call(c,function(){var t;T?O.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=A(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(L,r,1))}catch(e){L.call(r,e)}}):(n._v=e,n._s=1,N(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};I||(P=function(e){h(this,P,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(86)(P.prototype,{then:function(e,t){var n=R(y(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(L,e,1)},E.f=R=function(e){return e===P||e===a?new i(e):o(e)}),f(f.G+f.W+f.F*!I,{Promise:P}),n(26)(P,"Promise"),n(87)("Promise"),a=n(3).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return _(s&&this===a?P:this,e)}}),f(f.S+f.F*!(I&&n(88)(function(e){P.all(e).catch(k)})),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,o=n.reject,i=b(function(){var n=[],i=0,a=1;v(e,!1,function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,o=b(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(24),o=n(77),i=n(78),a=n(4),s=n(45),c=n(79),u={},l={};(t=e.exports=function(e,t,n,f,p){var d,h,v,y,m=p?function(){return e}:c(e),g=r(n,f,t?2:1),E=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(d=s(e.length);d>E;E++)if((y=t?g(a(h=e[E])[0],h[1]):g(e[E]))===u||y===l)return y}else for(v=m.call(e);!(h=v.next()).done;)if((y=o(v,g,h.value,t))===u||y===l)return y}).BREAK=u,t.RETURN=l},function(e,t,n){var r=n(4);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(17),o=n(0)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(28),o=n(0)("iterator"),i=n(17);e.exports=n(3).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(4),o=n(25),i=n(0)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1),o=n(48).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(13)(a);e.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){o.call(r,u)};else{var f=!0,p=document.createTextNode("");new i(u).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(4),o=n(8),i=n(49);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(11);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(1),o=n(7),i=n(9),a=n(0)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(0)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){n(90),e.exports=n(3).Symbol.keyFor},function(e,t,n){"use strict";var r=n(1),o=n(10),i=n(9),a=n(23),s=n(11),c=n(91).KEY,u=n(16),l=n(21),f=n(26),p=n(15),d=n(0),h=n(50),v=n(92),y=n(93),m=n(94),g=n(4),E=n(8),b=n(12),w=n(30),_=n(22),x=n(42),O=n(95),S=n(96),C=n(7),P=n(18),T=S.f,k=C.f,R=O.f,I=r.Symbol,A=r.JSON,N=A&&A.stringify,j=d("_hidden"),D=d("toPrimitive"),M={}.propertyIsEnumerable,L=l("symbol-registry"),U=l("symbols"),F=l("op-symbols"),G=Object.prototype,q="function"==typeof I,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,V=i&&u(function(){return 7!=x(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=T(G,t);r&&delete G[t],k(e,t,n),r&&e!==G&&k(G,t,r)}:k,W=function(e){var t=U[e]=x(I.prototype);return t._k=e,t},X=q&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},K=function(e,t,n){return e===G&&K(F,t,n),g(e),t=w(t,!0),g(n),o(U,t)?(n.enumerable?(o(e,j)&&e[j][t]&&(e[j][t]=!1),n=x(n,{enumerable:_(0,!1)})):(o(e,j)||k(e,j,_(1,{})),e[j][t]=!0),V(e,t,n)):k(e,t,n)},z=function(e,t){g(e);for(var n,r=y(t=b(t)),o=0,i=r.length;i>o;)K(e,n=r[o++],t[n]);return e},Y=function(e){var t=M.call(this,e=w(e,!0));return!(this===G&&o(U,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,j)&&this[j][e])||t)},J=function(e,t){if(e=b(e),t=w(t,!0),e!==G||!o(U,t)||o(F,t)){var n=T(e,t);return!n||!o(U,t)||o(e,j)&&e[j][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=R(b(e)),r=[],i=0;n.length>i;)o(U,t=n[i++])||t==j||t==c||r.push(t);return r},$=function(e){for(var t,n=e===G,r=R(n?F:b(e)),i=[],a=0;r.length>a;)!o(U,t=r[a++])||n&&!o(G,t)||i.push(U[t]);return i};q||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(F,n),o(this,j)&&o(this[j],e)&&(this[j][e]=!1),V(this,e,_(1,n))};return i&&H&&V(G,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),S.f=J,C.f=K,n(51).f=O.f=Q,n(27).f=Y,n(35).f=$,i&&!n(14)&&s(G,"propertyIsEnumerable",Y,!0),h.f=function(e){return W(d(e))}),a(a.G+a.W+a.F*!q,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=P(d.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return o(L,e+="")?L[e]:L[e]=I(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!q,"Object",{create:function(e,t){return void 0===t?x(e):z(x(e),t)},defineProperty:K,defineProperties:z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),A&&a(a.S+a.F*(!q||u(function(){var e=I();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(E(t)||void 0!==e)&&!X(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,N.apply(A,r)}}),I.prototype[D]||n(6)(I.prototype,D,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(15)("meta"),o=n(8),i=n(10),a=n(7).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(16)(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&f.NEED&&c(e)&&!i(e,r)&&l(e),e}}},function(e,t,n){var r=n(1),o=n(3),i=n(14),a=n(50),s=n(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(18),o=n(35),i=n(27);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),c=i.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(13);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(12),o=n(51).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){var r=n(27),o=n(22),i=n(12),a=n(30),s=n(10),c=n(40),u=Object.getOwnPropertyDescriptor;t.f=n(9)?u:function(e,t){if(e=i(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){n(98),e.exports=n(3).Object.assign},function(e,t,n){var r=n(23);r(r.S+r.F,"Object",{assign:n(99)})},function(e,t,n){"use strict";var r=n(18),o=n(35),i=n(27),a=n(47),s=n(44),c=Object.assign;e.exports=!c||n(16)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,l=o.f,f=i.f;c>u;)for(var p,d=s(arguments[u++]),h=l?r(d).concat(l(d)):r(d),v=h.length,y=0;v>y;)f.call(d,p=h[y++])&&(n[p]=d[p]);return n}:c},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),i=n(127),a=n(39),s=n(132),c=n(19),u=n(57),l=n(20),f=n(38),p=n(5).client,d=function(){function e(t){var n=this;this.clientConfig=void 0,this.eventDelegateRefs=f.cloneWithKeys(e.events),this.api=null,this.player=null,this.consumer=null,this.gaProperty="",this.playerIsFallback=!1,this.maxCreateRetries=p.maxCreateRetries,this.renderHistory={prevExperienceId:"",prevMessage:""},this.emits={adding:"Adding job to queue...",added:"Added job to queue..."},this.setup=function(e){n.mergeConfig(e)},this.setPlayer=function(e,t){void 0===t&&(t=!1);var r=n.clientConfig.storyId;n.playerIsFallback=t,n.player=e,e.setStoryId(r)},this.on=function(t,r){var o=n.eventDelegateRefs,i=n.eventDelegateRefs.ERROR;if(n.clientConfig)try{if(!f.isFunc(r))throw new l.ClientConfigurationError("invalidCallbackType",t);if(!f.keyExists(e.events,t))throw new l.ClientConfigurationError("invalidEventName",t);o[t]=r}catch(e){var a=n.hasOwnProperty("clientConfig")?n.clientConfig.storyId:"";c.default.trapError(e,a,i)}},this.off=function(t){void 0===t&&(t="");var r=n.clientConfig.storyId,o=n.eventDelegateRefs,i=n.eventDelegateRefs.ERROR;try{if(t){if(!f.keyExists(e.events,t))throw new l.ClientConfigurationError("invalidEventName",t);o[t]=null}else Object.keys(e.events).forEach(function(e){o[e]=null})}catch(e){c.default.trapError(e,r,i)}},this.getExperience=function(t){var r=n.api,o=n.player,i=n.clientConfig.storyId,a=n.eventDelegateRefs,s=a.GOT_EXPERIENCE,u=a.ERROR;try{if(!s&&!o)throw new l.ClientConfigurationError("eventNotConfigured",e.events.GOT_EXPERIENCE);r.getExperience(t).then(function(e){var a=e.id,f=e.output,p=e.rendering,d=e.moderation_status;if(n.updateHistory("prevExperienceId",a),Object.keys(f).length>0)o&&o.experienceGenerated(e),s&&s(e);else if("rejected"===d){var h=new l.ModerationError("rejection",a);c.default.trapError(h,i,u)}else n.warmConsumer(t).then(function(){p||r.invokeStream(t).catch(function(e){throw new l.NetworkError("httpFailure",t,e)})})}).catch(function(e){var n=new l.NetworkError("httpFailure",t,e);c.default.trapError(n,i,u)})}catch(e){c.default.trapError(e,i,u)}},this.createExperience=function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=0);var o=f.generateUUID();t?n.warmConsumer(o).then(function(){n.doCreateExperience(e,o,t,r)}):n.doCreateExperience(e,o,t,r)},this.captureAnalytics=function(e){void 0===e&&(e=null);var t=n.clientConfig.storyId,r=n.eventDelegateRefs.ERROR;try{if(!(e instanceof HTMLVideoElement))throw new l.PlayerConfigurationError("invalidPlayerRef",null);n.setPlayer(new s.default(e),!0)}catch(e){c.default.trapError(e,t,r)}},this.mergeConfig=function(e){var t=p.defaultConfig,i=n.clientConfig||t;f.prepConfig(e,t),n.clientConfig=r({},i,e),n.api?n.api.configureClient(n.clientConfig.accessToken,n.clientConfig.environment):n.api=new o.default(n.clientConfig.accessToken,n.clientConfig.environment),n.getAnalyticsProperty()},this.getAnalyticsProperty=function(){var e=n.clientConfig.storyId,t=n.eventDelegateRefs.ERROR;n.api.getTrackingId(e).then(function(e){var t=e.gaTrackingId;t&&(n.gaProperty=t,n.player&&n.player.setGaProperty(t),a.default.setup(),n.doPageView(),window.addEventListener("popstate",function(){return n.doPageView()}))}).catch(function(n){var r=new l.NetworkError("httpFailure",null,n);c.default.trapError(r,e,t)})},this.doPageView=function(){a.default.send({prp:n.gaProperty,t:"pageview",dp:window.location.pathname})},this.doCreateExperience=function(t,r,o,i){var a=n.maxCreateRetries,s=n.clientConfig.storyId,u=n.emits,p=u.adding,d=u.added,h=n.eventDelegateRefs,v=h.GOT_EXPERIENCE,y=h.EXPERIENCE_CREATED,m=h.STATUS_UPDATE,g=h.UPLOAD_PROGRESS,E=h.ERROR,b=o&&null!==n.player&&!n.playerIsFallback||f.isFunc(v),w=f.isFunc(y);try{if(!b&&!w){var _=null;throw y||(_=e.events.EXPERIENCE_CREATED),o&&!v&&(_=e.events.GOT_EXPERIENCE),new l.ClientConfigurationError("eventNotConfigured",_)}var x=n.api;m&&o&&(m({id:void 0,status:p}),n.updateHistory("prevMessage",p)),x.postExperience(s,t,o,r,g).then(function(e){var t=e.id;n.updateHistory("prevExperienceId",t),y&&y(e),o&&n.renderHistory.prevMessage===p&&m&&(m({id:t,status:d}),n.updateHistory("prevMessage",d))}).catch(function(e){n.killConsumer().then(function(){if(~e.message.indexOf("400")&&a>i)n.createExperience(t,o,i+=1);else{var r=new l.NetworkError("httpFailure",null,e);c.default.trapError(r,s,E)}})})}catch(e){c.default.trapError(e,s,E)}},this.warmConsumer=function(e){var t=n.player,o=n.eventDelegateRefs,a=n.clientConfig,s=a.storyId,c=a.environment;return new Promise(function(a){n.killConsumer().then(function(){var u=r({updateHistory:function(e,t){return n.updateHistory(e,t)}},o);n.consumer=new i.default({storyId:s,experienceId:e,environment:c,delegates:u,player:t}),n.consumer.connect().then(function(){a()})})})},this.killConsumer=function(){return new Promise(function(e){n.consumer?n.consumer.kill().then(function(){n.consumer=null,e()}):e()})},this.updateHistory=function(e,t){n.renderHistory[e]!==t&&(n.renderHistory[e]=t)},u.printVersion();try{if("object"!=typeof t)throw new l.ClientConfigurationError("badConfig",null);if(!t.hasOwnProperty("storyId"))throw new l.ClientConfigurationError("storyId",null);if(!t.hasOwnProperty("accessToken"))throw new l.ClientConfigurationError("accessToken",null);this.mergeConfig(t)}catch(e){c.default.trapError(e,t&&t.storyId?t.storyId:"")}}return e.events={EXPERIENCE_CREATED:"EXPERIENCE_CREATED",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",GOT_EXPERIENCE:"GOT_EXPERIENCE",STATUS_UPDATE:"STATUS_UPDATE",ERROR:"ERROR"},e}();t.default=d},function(e,t,n){e.exports=n(102)},function(e,t,n){"use strict";var r=n(2),o=n(52),i=n(104),a=n(37);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=s(a);c.Axios=i,c.create=function(e){return s(r.merge(a,e))},c.Cancel=n(56),c.CancelToken=n(119),c.isCancel=n(55),c.all=function(e){return Promise.all(e)},c.spread=n(120),e.exports=c,e.exports.default=c},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(37),o=n(2),i=n(114),a=n(115);function s(e){this.defaults=e,this.interceptors={request:new i,response:new i}}s.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=s},function(e,t){var n,r,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;arguments.length>n;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(54);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";var r=n(2);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=""+t;else{var a=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}(o.prototype=Error()).code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,i=e+"",a="",s=0,c=r;i.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new o;t=t<<8|n}return a}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(2);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,n){"use strict";var r=n(2),o=n(116),i=n(55),a=n(37),s=n(117),c=n(118);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(56);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(122);function o(e){this.message=e}(o.prototype=Error()).name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new o("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(e){throw new o("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=o},function(e,t,n){var r=n(123);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return 2>n.length&&(n="0"+n),"%"+n}))}(t)}catch(e){return r(t)}}},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}(r.prototype=Error()).name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=(e+"").replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,a=0,s=0,c="";i=t.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)i=n.indexOf(i);return c}},function(e,t,n){e.exports=n(125).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNetworkError=s,t.isRetryableError=l,t.isSafeRequestError=f,t.isIdempotentRequestError=p,t.isNetworkOrIdempotentRequestError=d,t.exponentialDelay=v,t.default=m;var r,o=n(126),i=(r=o)&&r.__esModule?r:{default:r};var a="axios-retry";function s(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&(0,i.default)(e)}var c=["get","head","options"],u=c.concat(["put","delete"]);function l(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&599>=e.response.status)}function f(e){return!!e.config&&(l(e)&&-1!==c.indexOf(e.config.method))}function p(e){return!!e.config&&(l(e)&&-1!==u.indexOf(e.config.method))}function d(e){return s(e)||p(e)}function h(){return 0}function v(){var e=100*Math.pow(2,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return e+.2*e*Math.random()}function y(e){var t=e[a]||{};return t.retryCount=t.retryCount||0,e[a]=t,t}function m(e,t){e.interceptors.request.use(function(e){return y(e).lastRequestTime=Date.now(),e}),e.interceptors.response.use(null,function(n){var r=n.config;if(!r)return Promise.reject(n);var o=function(e,t){return Object.assign({},t,e[a])}(r,t),i=o.retries,s=void 0===i?3:i,c=o.retryCondition,u=void 0===c?d:c,l=o.retryDelay,f=void 0===l?h:l,p=o.shouldResetTimeout,v=void 0!==p&&p,m=y(r);if(u(n)&&s>m.retryCount){m.retryCount+=1;var g=f(m.retryCount,n);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,r),!v&&r.timeout&&m.lastRequestTime){var E=Date.now()-m.lastRequestTime;r.timeout=Math.max(r.timeout-E-g,1)}return r.transformRequest=[function(e){return e}],new Promise(function(t){return setTimeout(function(){return t(e(r))},g)})}return Promise.reject(n)})}m.isNetworkError=s,m.isSafeRequestError=f,m.isIdempotentRequestError=p,m.isNetworkOrIdempotentRequestError=d,m.exponentialDelay=v,m.isRetryableError=l},function(e,t,n){"use strict";var r=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE"],o=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];e.exports=function(e){return!e||!e.code||(-1!==r.indexOf(e.code)||-1===o.indexOf(e.code))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(130),i=n(20),a=n(5).messageConsumer,s=function(){function e(t){var n=this;this.stompDelegates={route:function(e){return n.routeMessageData(e)},error:function(e){return n.stompError(e)}},this.storyId="",this.environment="",this.experienceId=null,this.clientDelegates=null,this.stomp=null,this.retried=a.minReconnects,this.connect=function(){return n.stomp=new o.default({experienceId:n.experienceId,environment:n.environment,delegates:n.stompDelegates}),new Promise(function(e){n.stomp.init().then(function(){e()})})},this.kill=function(){var e=n.stomp;return new Promise(function(t){e.disconnectAsync().then(function(){t()})})},this.routeMessageData=function(t){var o=e.EMITS,a=o.scene,s=o.message,c=o.complete,u=n.stomp,l=n.storyId,f=n.experienceId,p=n.clientDelegates.ERROR,d=t.body;try{var h=JSON.parse(d);switch(h.event){case c:u.disconnectAsync();break;case s:n.emitMessageData(h);break;case a:delete h.event,n.emitSceneData(h)}}catch(e){var v=new i.NetworkError("messageParseFailed",f,e);r.default.trapError(v,l,p)}},this.emitMessageData=function(e){var t=n.storyId,o=n.clientDelegates,s=o.updateHistory,c=o.STATUS_UPDATE,u=o.ERROR,l=e.status,f=e.id;try{if(l===a.errorOverTcp)throw new i.NetworkError("errorOverTcp",f,null);c&&(c(e),s("prevMessage",l))}catch(e){r.default.trapError(e,t,u)}},this.emitSceneData=function(e){var t=n.player,o=n.storyId,a=n.clientDelegates,s=a.GOT_EXPERIENCE,c=a.ERROR;if("rejected"===e.moderation_status){var u=new i.ModerationError("rejection",e.id);r.default.trapError(u,o,c)}else t&&t.experienceGenerated(e),s&&s(e)},this.stompError=function(t){var o=e.MAX_RETRIES,a=n.retried,s=n.storyId,c=n.experienceId,u=n.clientDelegates.ERROR;if(!t.wasClean)if(++n.retried,o>a)r.default.logWarning("network","tcpFailure"),n.kill().then(function(){n.connect()});else{var l=new i.NetworkError("tcpFailure",c,t);n.stomp=null,r.default.trapError(l,s,u)}},this.storyId=t.storyId,this.environment=t.environment,this.experienceId=t.experienceId,this.clientDelegates=t.delegates,t.player&&(this.player=t.player)}return e.MAX_RETRIES=a.maxReconnects,e.EMITS=a.emitTypes,e}();t.default=s},function(e){e.exports={moderation:{rejection:"This experience was rejected."},clientConfiguration:{badConfig:"Your Imposium configuration is an invalid type.",storyId:"No storyId was set in your Imposium configuration.",accessToken:"No accessToken was set in your Imposium configuration.",invalidEventName:"Invalid client event name.",invalidCallbackType:"The callback reference set for this client event is not of type function.",eventNotConfigured:"You cannot invoke this client event without a callback set."},playerConfiguration:{badClient:"You must provide a valid Imposium client reference to the player.",invalidPlayerRef:"No reference to an HTML5 video element was detected.",invalidEventName:"Invalid player event name.",invalidCallbackType:"The callback reference set for this player event is not of type function.",eventNotConfigured:"You cannot invoke this player event without a callback set.",badQualityOverride:"The quality specified does not exist for this experience."},network:{httpFailure:"Unable to process request to the Imposium API.",tcpFailure:"Unable to reach Imposium while processing this experience.",errorOverTcp:"Something went wrong while processing this experience.",messageParseFailure:"Message data from Imposium was malformed."},uncaught:{generic:"Something unexpected went wrong."}}},function(e){e.exports={client:{nodeAnalytics:"Sorry, analytics are not currently available in NodeJS."},network:{tcpFailure:"Unable to reach Imposium while processing this experience, retrying..."},playerFailure:{seekNotReady:"Seek can't be called until the video metadata has loaded, please try again shortly.",invalidSeekTime:"Could not seek to time outside of current video duration.",invalidVolume:"Could not set volume outside of range (double) 0.0 - 1.0."},analytics:{requestFailed:"Failed to record Imposium metric."}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(131),o=n(5).stomp,i=function(){function e(t){var n=this;this.socket=null,this.client=null,this.subscription=null,this.init=function(){var t=e.USERNAME,o=e.PASSWORD,i=e.DEBUG_OFF,a=n.delegates.error;return n.client=r.over(n.socket),n.client.debug=i,new Promise(function(e){n.client.connect(t,o,function(){return n.doSubscribe(e)},a)})},this.doSubscribe=function(t){n.subscription=n.client.subscribe(""+e.EXCHANGE+n.experienceId,n.delegates.route),t()},this.disconnectAsync=function(){var t=e.OPEN_STATE,r=n.client,o=n.subscription;return new Promise(function(e){r.ws.readyState==t?(o&&o.unsubscribe(),r.disconnect(function(){e()})):e()})},this.socket=new WebSocket(o[t.environment]),this.experienceId=t.experienceId,this.delegates=t.delegates}return e.EXCHANGE=o.exchange,e.USERNAME=o.username,e.PASSWORD=o.password,e.OPEN_STATE=1,e.DEBUG_OFF=function(){},e}();t.default=i},function(e,t,n){e.exports=function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)},o={V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"},supportedProtocols:function(){return["v10.stomp","v11.stomp","v12.stomp"]}},i={"v10.stomp":o.V1_0,"v11.stomp":o.V1_1,"v12.stomp":o.V1_2},a=function(e){return e.replace(/^\s+|\s+$/g,"")};function s(){var e=(new Date).getTime(),t=Math.floor(1e3*Math.random());return e+"-"+t}var c=function(){function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e(this,n),this.command=t,this.headers=r,this.body=o}return t(n,[{key:"toString",value:function(){var e,t=this,n=[this.command],r=!1===this.headers["content-length"];return r&&delete this.headers["content-length"],Object.keys(this.headers).forEach(function(e){var r=t.headers[e];n.push(e+":"+r)}),this.body&&!r&&n.push("content-length:"+((e=this.body)?encodeURIComponent(e).match(/%..|./g).length:0)),n.push("\n"+this.body),n.join("\n")}}],[{key:"unmarshallSingle",value:function(e){var t=e.search(/

/),r=e.substring(0,t).split("\n"),o=r.shift(),i={},s="",c=t+2,u=!0,l=!1,f=void 0;try{for(var p,d=r.reverse()[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var h=p.value,v=h.indexOf(":");i[a(h.substring(0,v))]=a(h.substring(v+1))}}catch(e){l=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw f}}if(i["content-length"]){var y=parseInt(i["content-length"],10);s=(""+e).substring(c,c+y)}else for(var m=null,g=c;e.length>g&&"\0"!==(m=e.charAt(g));g++)s+=m;return new n(o,i,s)}},{key:"unmarshall",value:function(e){var t=e.split(/ 
*/),r=t.slice(0,-1),o=t.slice(-1)[0],i={frames:r.map(function(e){return n.unmarshallSingle(e)}),partial:""};return"\n"===o||-1!==o.search(/ 
*$/)?i.frames.push(n.unmarshallSingle(o)):i.partial=o,i}},{key:"marshall",value:function(e,t,r){var o=new n(e,t,r);return o+"\0"}}]),n}(),u=function(){function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,a);var r=n.binary,o=void 0!==r&&r,i=n.heartbeat,s=void 0===i?{outgoing:1e4,incoming:1e4}:i,c=n.debug,u=void 0===c||c,l=n.protocols,f=void 0===l?[]:l;this.ws=t,this.ws.binaryType="arraybuffer",this.isBinary=!!o,this.hasDebug=!!u,this.connected=!1,this.heartbeat=s||{outgoing:0,incoming:0},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData="",this.protocols=f}return t(a,[{key:"debug",value:function(){var e;this.hasDebug&&(e=console).log.apply(e,arguments)}},{key:"connect",value:function(){var e=this,t=this._parseConnect.apply(this,arguments),a=n(t,3),s=a[0],u=a[1],l=a[2];this.connectCallback=u,this.debug("Opening Web Socket..."),this.ws.onmessage=function(t){var n,i,a=t.data;if(t.data instanceof ArrayBuffer&&(n=new Uint8Array(t.data),i=String.fromCharCode.apply(String,r(n)).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return 2>n.length&&(n="0"+n),"%"+n}),a=decodeURIComponent(i)),e.serverActivity=Date.now(),"\n"!==a){e.debug("<<< "+a);var s=c.unmarshall(e.partialData+a);e.partialData=s.partial,s.frames.forEach(function(t){switch(t.command){case"CONNECTED":e.debug("connected to server "+t.headers.server),e.connected=!0,e.version=t.headers.version,e._setupHeartbeat(t.headers),u&&u(t);break;case"MESSAGE":var n=t.headers.subscription,r=e.subscriptions[n]||e.onreceive;if(r){var i=e.version===o.V1_2&&t.headers.ack||t.headers["message-id"];t.ack=e.ack.bind(e,i,n),t.nack=e.nack.bind(e,i,n),r(t)}else e.debug("Unhandled received MESSAGE: "+t);break;case"RECEIPT":e.onreceipt&&e.onreceipt(t);break;case"ERROR":l&&l(t);break;default:e.debug("Unhandled frame: "+t)}})}else e.debug("<<< PONG")},this.ws.onclose=function(t){e.debug("Whoops! Lost connection to "+e.ws.url+":",{event:t}),e._cleanUp(),l&&l(t)},this.ws.onopen=function(){var t,n,r;e.debug("Web Socket Opened..."),s["accept-version"]=(t=e.ws.protocol||e.protocols[0],n=e.debug.bind(e),!(r=i[t])&&n&&n("DEPRECATED: "+t+" is not a recognized STOMP version. In next major client version, this will close the connection."),r||o.V1_2),s["heart-beat"]||(s["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(",")),e._transmit("CONNECT",s)},this.ws.readyState===this.ws.OPEN&&this.ws.onopen()}},{key:"disconnect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),e&&e()}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},n);r.destination=e,this._transmit("SEND",r,t)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tx-"+s();return this._transmit("BEGIN",{transaction:e}),{id:e,commit:this.commit.bind(this,e),abort:this.abort.bind(this,e)}}},{key:"commit",value:function(e){this._transmit("COMMIT",{transaction:e})}},{key:"abort",value:function(e){this._transmit("ABORT",{transaction:e})}},{key:"ack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},n),i=this.version===o.V1_2?"id":"message-id";r[i]=e,r.subscription=t,this._transmit("ACK",r)}},{key:"nack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},n),i=this.version===o.V1_2?"id":"message-id";r[i]=e,r.subscription=t,this._transmit("NACK",r)}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},n);return r.id||(r.id="sub-"+s()),r.destination=e,this.subscriptions[r.id]=t,this._transmit("SUBSCRIBE",r),{id:r.id,unsubscribe:this.unsubscribe.bind(this,r.id)}}},{key:"unsubscribe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t);delete this.subscriptions[e],n.id=e,this._transmit("UNSUBSCRIBE",n)}},{key:"_cleanUp",value:function(){this.connected=!1,clearInterval(this.pinger),clearInterval(this.ponger)}},{key:"_transmit",value:function(e,t,n){var r=c.marshall(e,t,n);this.debug(">>> "+r,{frame:{command:e,headers:t,body:n}}),this._wsSend(r)}},{key:"_wsSend",value:function(e){var t,n;for(this.isBinary&&(t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}),n=Array.prototype.map.call(t,function(e){return e.charCodeAt(0)}),e=new Uint8Array(n)),this.debug(">>> length "+e.length);;){if(this.maxWebSocketFrameSize>=e.length)return this.ws.send(e);this.ws.send(e.slice(0,this.maxWebSocketFrameSize)),e=e.slice(this.maxWebSocketFrameSize),this.debug("remaining = "+e.length)}}},{key:"_setupHeartbeat",value:function(e){var t=this;if(this.version===o.V1_1||this.version===o.V1_2){var r=(e["heart-beat"]||"0,0").split(",").map(function(e){return parseInt(e,10)}),i=n(r,2),a=i[0],s=i[1];if(0!==this.heartbeat.outgoing&&0!==s){var c=Math.max(this.heartbeat.outgoing,s);this.debug("send PING every "+c+"ms"),this.pinger=setInterval(function(){t._wsSend("\n"),t.debug(">>> PING")},c)}if(0!==this.heartbeat.incoming&&0!==a){var u=Math.max(this.heartbeat.incoming,a);this.debug("check PONG every "+u+"ms"),this.ponger=setInterval(function(){var e=Date.now()-t.serverActivity;e>2*u&&(t.debug("did not receive server activity for the last "+e+"ms"),t.ws.close())},u)}}}},{key:"_parseConnect",value:function(){for(var e={},t=void 0,n=void 0,r=arguments.length,o=Array(r),i=0;r>i;i++)o[i]=arguments[i];switch(o.length){case 2:e=o[0],t=o[1];break;case 3:o[1]instanceof Function?(e=o[0],t=o[1],n=o[2]):(e.login=o[0],e.passcode=o[1],t=o[2]);break;case 4:e.login=o[0],e.passcode=o[1],t=o[2],n=o[3];break;default:e.login=o[0],e.passcode=o[1],t=o[2],n=o[3],e.host=o[4]}return[e,t,n]}}]),a}();return{Frame:c,VERSIONS:o,client:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new WebSocket(e,t.protocols||o.supportedProtocols());return new u(n,t)},over:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(u,[null].concat(t)))}}}()},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.experienceGenerated=function(e){n.setExperienceId(e.id)},n}return o(t,e),t}(n(58).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){var e=this;this.enqueue=function(t){e.q.push(t)},this.pop=function(){e.q.splice(0,1)},this.reset=function(){e.q=[]},this.peek=function(){return e.q[0]},this.isEmpty=function(){return 0===e.q.length},this.getLength=function(){return e.q.length},this.q=[]}}();t.default=r},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),s=n(58),c=n(19),u=n(20),l=n(38),f=n(5).videoPlayer,p=window.hls,d=function(e){function t(n,r,o){void 0===o&&(o=f.defaultConfig);var s=e.call(this,n)||this;s.eventDelegateRefs={play:{callback:null,native:!0},pause:{callback:null,native:!0},ended:{callback:null,native:!0},error:{callback:null,native:!0},seeked:{callback:null,native:!0},timeupdate:{callback:null,native:!0},volumechanged:{callback:null,native:!0},muted:{callback:null,native:!1},controlsset:{callback:null,native:!1}},s.hlsSupport="",s.hlsPlayer=null,s.experienceCache=[],s.clientRef=null,s.imposiumPlayerConfig=null,s.init=function(e){var t=f.defaultConfig;for(var n in l.prepConfig(e,t),s.imposiumPlayerConfig=i({},t,e),s.imposiumPlayerConfig)s.imposiumPlayerConfig[n]&&(s.node[n]=s.imposiumPlayerConfig[n])},s.experienceGenerated=function(e){var t=s.imposiumPlayerConfig.qualityOverride,n=e.output,r=n.videos,o=n.images,i="";s.setExperienceId(e.id),o&&o.hasOwnProperty("poster")&&(i=o.poster),t?s.doQualityOverride(r,i):s.doQualityAssessment(r,i)},s.on=function(e,n){var r=s.storyId,o=s.eventDelegateRefs;try{if(!l.isFunc(n))throw new u.PlayerConfigurationError("invalidCallbackType",e);if(!l.keyExists(t.events,e))throw new u.PlayerConfigurationError("invalidEventName",e);var i=o[e];i.callback=n,i.native&&s.node.addEventListener(e,i.callback)}catch(e){c.default.trapError(e,r)}},s.off=function(e){var n=s.storyId,r=s.eventDelegateRefs;try{if(!l.keyExists(t.events,e))throw new u.PlayerConfigurationError("invalidEventName",e);var o=r[e];o.native&&s.node.removeEventListener(e,o.callback),o.callback=null}catch(e){c.default.trapError(e,n)}},s.play=function(){s.node.play()},s.pause=function(){s.node.pause()},s.getPlaybackState=function(){return s.node.paused?"paused":"playing"},s.getPosition=function(){return s.node.currentTime},s.getDuration=function(){return s.node.duration},s.seek=function(e){var t=s.node.duration;isNaN(t)?c.default.logWarning("playerFailure","seekNotReady"):l.inRangeNumeric(e=Math.floor(e),0,t)?s.node.currentTime=e:c.default.logWarning("playerFailure","invalidSeekTime")},s.getMute=function(){return s.node.muted},s.setMute=function(e){var t=s.eventDelegateRefs.muted.callback;s.node.muted=e,t&&t()},s.getVolume=function(){return s.node.volume},s.setVolume=function(e){var t=f.volumeMin,n=f.volumeMax;l.inRangeNumeric(e=Math.round(10*e)/10,t,n)?s.node.volume=e:c.default.logWarning("playerFailure","invalidVolume")},s.getControls=function(){return s.node.controls},s.setControls=function(e){var t=s.eventDelegateRefs.controlsset;s.node.controls=e,t&&t.callback()},s.replay=function(){s.pauseIfPlaying(),s.node.currentTime=0,s.node.play()},s.remove=function(){var e=s.eventDelegateRefs,t=f.defaultConfig;s.pauseIfPlaying();for(var n=0,r=Object.keys(e);r.length>n;n++){s.off(e[r[n]])}s.imposiumPlayerConfig=i({},t),s.node=null},s.setupHls=function(){var e=t.hlsSupportLevels,n=e.NATIVE,r=e.HLSJS;s.node.canPlayType(t.STREAM_TYPE)?s.hlsSupport=n:void 0!==p&&p.isSupported()&&(s.hlsSupport=r)},s.doQualityOverride=function(e,t){var n=s.storyId,r=s.imposiumPlayerConfig.qualityOverride;try{if(!e.hasOwnProperty(r))throw new u.PlayerConfigurationError("badQualityOverride",null);s.setPlayerData(e[r].url,!0,t)}catch(e){c.default.trapError(e,n)}},s.doQualityAssessment=function(e,n){var r=s.hlsSupport,o=t.compressionLevels.STREAM;if(e.hasOwnProperty(o)&&r)s.setPlayerData(e[o].url,!0,n);else{var i=Object.keys(e);1===i.length?s.setPlayerData(e[i[0]].url,!1,n):s.checkBandwidth(e).then(function(t){s.setPlayerData(e[t].url,!1,n)}).catch(function(t){s.setPlayerData(e[t].url,!1,n)})}},s.checkBandwidth=function(e){for(var n=t.BANDWIDTH_SAMPLES,r=[],o=Object.keys(e).filter(function(e){return"m3u8"!==e}),i=0;n>i;i++)r.push(a.default.checkBandwidth());return new Promise(function(t,n){Promise.all(r).then(function(n){var r=l.calculateAverageMbps(n),i={};o.forEach(function(t){var n=e[t];i[n.width*n.height/1e5]=t});var a=Object.keys(i).map(function(e){return parseFloat(e)}).reduce(function(e,t){return Math.abs(t-r)>Math.abs(e-r)?e:t});t(i[a])}).catch(function(e){n(o.slice(-1).pop())})})},s.setPlayerData=function(e,n,r){void 0===r&&(r=null),n&&s.hlsSupport===t.hlsSupportLevels.HLSJS?(s.hlsPlayer&&s.hlsPlayer.destroy(),s.hlsPlayer=new p,s.hlsPlayer.attachMedia(s.node),s.hlsPlayer.loadSource(e)):s.node.src=e,r&&(s.node.poster=r)},s.pauseIfPlaying=function(){s.node.paused||s.node.pause()};var d=!(!r||!r.clientConfig);try{if(!d)throw new u.PlayerConfigurationError("badClient",null);n instanceof HTMLVideoElement&&(r.setPlayer(s),s.init(o),s.setupHls())}catch(e){c.default.trapError(e,d?r.clientConfig.storyId:"")}return s}return o(t,e),t.events={PLAY:"play",PAUSE:"pause",COMPLETE:"ended",ERROR:"error",SEEK:"seeked",TIME:"timeupdate",VOLUME:"volumechange",MUTE:"muted",CONTROLS:"controlsset"},t.STREAM_TYPE=f.streamType,t.BANDWIDTH_SAMPLES=f.bandwidthSamples,t.bandwidthRatings={LOW:f.bandwidth.low,MID:f.bandwidth.mid},t.compressionLevels={STREAM:f.compression.stream,LOW:f.compression.low,MID:f.compression.mid,HIGH:f.compression.high},t.hlsSupportLevels={NATIVE:f.hlsSupportLevels.native,HLSJS:f.hlsSupportLevels.hlsjs},t}(s.default);t.default=d}])}); 