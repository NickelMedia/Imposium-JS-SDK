// [IMPOSIUM-JS-SDK]  Version: 2.0.0  
 !function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("has-flag"),require("form-data"),require("isomorphic-ws")):"function"==typeof define&&define.amd?define("Imposium",["has-flag","form-data","isomorphic-ws"],e):"object"==typeof exports?exports.Imposium=e(require("has-flag"),require("form-data"),require("isomorphic-ws")):t.Imposium=e(t["has-flag"],t["form-data"],t["isomorphic-ws"])}(this,function(t,e,r){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=148)}([function(t,e,r){var n=r(2),i=r(22),o=r(12),a=r(13),s=r(19),u=function(t,e,r){var c,l,f,d,h=t&u.F,p=t&u.G,v=t&u.S,g=t&u.P,y=t&u.B,m=p?n:v?n[e]||(n[e]={}):(n[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),E=b.prototype||(b.prototype={});for(c in p&&(r=e),r)f=((l=!h&&m&&void 0!==m[c])?m:r)[c],d=y&&l?s(f,n):g&&"function"==typeof f?s(Function.call,f):f,m&&a(m,c,f,t&u.U),b[c]!=f&&o(b,c,d),g&&E[c]!=f&&(E[c]=f)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){var n=r(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(52)("wks"),i=r(34),o=r(2).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=n},function(t,e,r){t.exports=!r(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(1),i=r(99),o=r(23),a=Object.defineProperty;e.f=r(6)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(25),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(24);t.exports=function(t){return Object(n(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(7),i=r(33);t.exports=r(6)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(2),i=r(12),o=r(11),a=r(34)("src"),s=Function.toString,u=(""+s).split("toString");r(22).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(c&&(o(r,a)||i(r,a,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,r){var n=r(0),i=r(3),o=r(24),a=/"/g,s=function(t,e,r,n){var i=String(o(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},function(t,e,r){"use strict";var n=r(133),i=r(354),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),a(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,function(e,i){t[i]=r&&"function"==typeof e?n(e,r):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){var n=r(48),i=r(24);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(49),i=r(33),o=r(16),a=r(23),s=r(11),u=r(99),c=Object.getOwnPropertyDescriptor;e.f=r(6)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(11),i=r(9),o=r(69)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(10);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var r=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(4);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(0),i=r(22),o=r(3);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(t,e,r){var n=r(19),i=r(48),o=r(9),a=r(8),s=r(86);t.exports=function(t,e){var r=1==t,u=2==t,c=3==t,l=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,p){for(var v,g,y=o(e),m=i(y),b=n(s,p,3),E=a(m.length),S=0,_=r?h(e,E):u?h(e,0):void 0;E>S;S++)if((d||S in m)&&(g=b(v=m[S],S,y),t))if(r)_[S]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return S;case 2:_.push(v)}else if(l)return!1;return f?-1:c||l?l:_}}},function(t,e,r){"use strict";if(r(6)){var n=r(35),i=r(2),o=r(3),a=r(0),s=r(62),u=r(92),c=r(19),l=r(41),f=r(33),d=r(12),h=r(43),p=r(25),v=r(8),g=r(125),y=r(37),m=r(23),b=r(11),E=r(50),S=r(4),_=r(9),w=r(83),T=r(38),R=r(18),A=r(39).f,x=r(85),L=r(34),O=r(5),C=r(27),I=r(53),k=r(60),P=r(88),D=r(46),F=r(57),M=r(40),N=r(87),U=r(115),B=r(7),j=r(17),G=B.f,V=j.f,H=i.RangeError,q=i.TypeError,W=i.Uint8Array,K=Array.prototype,Y=u.ArrayBuffer,z=u.DataView,X=C(0),J=C(2),$=C(3),Q=C(4),Z=C(5),tt=C(6),et=I(!0),rt=I(!1),nt=P.values,it=P.keys,ot=P.entries,at=K.lastIndexOf,st=K.reduce,ut=K.reduceRight,ct=K.join,lt=K.sort,ft=K.slice,dt=K.toString,ht=K.toLocaleString,pt=O("iterator"),vt=O("toStringTag"),gt=L("typed_constructor"),yt=L("def_constructor"),mt=s.CONSTR,bt=s.TYPED,Et=s.VIEW,St=C(1,function(t,e){return At(k(t,t[yt]),e)}),_t=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),wt=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),Tt=function(t,e){var r=p(t);if(r<0||r%e)throw H("Wrong offset!");return r},Rt=function(t){if(S(t)&&bt in t)return t;throw q(t+" is not a typed array!")},At=function(t,e){if(!(S(t)&&gt in t))throw q("It is not a typed array constructor!");return new t(e)},xt=function(t,e){return Lt(k(t,t[yt]),e)},Lt=function(t,e){for(var r=0,n=e.length,i=At(t,n);n>r;)i[r]=e[r++];return i},Ot=function(t,e,r){G(t,e,{get:function(){return this._d[r]}})},Ct=function(t){var e,r,n,i,o,a,s=_(t),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,d=x(s);if(void 0!=d&&!w(d)){for(a=d.call(s),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);s=n}for(f&&u>2&&(l=c(l,arguments[2],2)),e=0,r=v(s.length),i=At(this,r);r>e;e++)i[e]=f?l(s[e],e):s[e];return i},It=function(){for(var t=0,e=arguments.length,r=At(this,e);e>t;)r[t]=arguments[t++];return r},kt=!!W&&o(function(){ht.call(new W(1))}),Pt=function(){return ht.apply(kt?ft.call(Rt(this)):Rt(this),arguments)},Dt={copyWithin:function(t,e){return U.call(Rt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(Rt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Rt(this),arguments)},filter:function(t){return xt(this,J(Rt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Z(Rt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Rt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(Rt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(Rt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Rt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Rt(this),arguments)},lastIndexOf:function(t){return at.apply(Rt(this),arguments)},map:function(t){return St(Rt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Rt(this),arguments)},reduceRight:function(t){return ut.apply(Rt(this),arguments)},reverse:function(){for(var t,e=Rt(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return $(Rt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Rt(this),t)},subarray:function(t,e){var r=Rt(this),n=r.length,i=y(t,n);return new(k(r,r[yt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,v((void 0===e?n:y(e,n))-i))}},Ft=function(t,e){return xt(this,ft.call(Rt(this),t,e))},Mt=function(t){Rt(this);var e=Tt(arguments[1],1),r=this.length,n=_(t),i=v(n.length),o=0;if(i+e>r)throw H("Wrong length!");for(;o<i;)this[e+o]=n[o++]},Nt={entries:function(){return ot.call(Rt(this))},keys:function(){return it.call(Rt(this))},values:function(){return nt.call(Rt(this))}},Ut=function(t,e){return S(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Bt=function(t,e){return Ut(t,e=m(e,!0))?f(2,t[e]):V(t,e)},jt=function(t,e,r){return!(Ut(t,e=m(e,!0))&&S(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,e,r):(t[e]=r.value,t)};mt||(j.f=Bt,B.f=jt),a(a.S+a.F*!mt,"Object",{getOwnPropertyDescriptor:Bt,defineProperty:jt}),o(function(){dt.call({})})&&(dt=ht=function(){return ct.call(this)});var Gt=h({},Dt);h(Gt,Nt),d(Gt,pt,Nt.values),h(Gt,{slice:Ft,set:Mt,constructor:function(){},toString:dt,toLocaleString:Pt}),Ot(Gt,"buffer","b"),Ot(Gt,"byteOffset","o"),Ot(Gt,"byteLength","l"),Ot(Gt,"length","e"),G(Gt,vt,{get:function(){return this[bt]}}),t.exports=function(t,e,r,u){var c=t+((u=!!u)?"Clamped":"")+"Array",f="get"+t,h="set"+t,p=i[c],y=p||{},m=p&&R(p),b=!p||!s.ABV,_={},w=p&&p.prototype,x=function(t,r){G(t,r,{get:function(){return function(t,r){var n=t._d;return n.v[f](r*e+n.o,_t)}(this,r)},set:function(t){return function(t,r,n){var i=t._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[h](r*e+i.o,n,_t)}(this,r,t)},enumerable:!0})};b?(p=r(function(t,r,n,i){l(t,p,c,"_d");var o,a,s,u,f=0,h=0;if(S(r)){if(!(r instanceof Y||"ArrayBuffer"==(u=E(r))||"SharedArrayBuffer"==u))return bt in r?Lt(p,r):Ct.call(p,r);o=r,h=Tt(n,e);var y=r.byteLength;if(void 0===i){if(y%e)throw H("Wrong length!");if((a=y-h)<0)throw H("Wrong length!")}else if((a=v(i)*e)+h>y)throw H("Wrong length!");s=a/e}else s=g(r),o=new Y(a=s*e);for(d(t,"_d",{b:o,o:h,l:a,e:s,v:new z(o)});f<s;)x(t,f++)}),w=p.prototype=T(Gt),d(w,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&F(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=r(function(t,r,n,i){var o;return l(t,p,c),S(r)?r instanceof Y||"ArrayBuffer"==(o=E(r))||"SharedArrayBuffer"==o?void 0!==i?new y(r,Tt(n,e),i):void 0!==n?new y(r,Tt(n,e)):new y(r):bt in r?Lt(p,r):Ct.call(p,r):new y(g(r))}),X(m!==Function.prototype?A(y).concat(A(m)):A(y),function(t){t in p||d(p,t,y[t])}),p.prototype=w,n||(w.constructor=p));var L=w[pt],O=!!L&&("values"==L.name||void 0==L.name),C=Nt.values;d(p,gt,!0),d(w,bt,c),d(w,Et,!0),d(w,yt,p),(u?new p(1)[vt]==c:vt in w)||G(w,vt,{get:function(){return c}}),_[c]=p,a(a.G+a.W+a.F*(p!=y),_),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){y.of.call(p,1)}),c,{from:Ct,of:It}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),a(a.P,c,Dt),M(c),a(a.P+a.F*wt,c,{set:Mt}),a(a.P+a.F*!O,c,Nt),n||w.toString==dt||(w.toString=dt),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:Ft}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Pt}),D[c]=O?L:C,n||O||d(w,pt,C)}}else t.exports=function(){}},function(t,e,r){var n=r(120),i=r(0),o=r(52)("metadata"),a=o.store||(o.store=new(r(123))),s=function(t,e,r){var i=a.get(t);if(!i){if(!r)return;a.set(t,i=new n)}var o=i.get(e);if(!o){if(!r)return;i.set(e,o=new n)}return o};t.exports={store:a,map:s,has:function(t,e,r){var n=s(e,r,!1);return void 0!==n&&n.has(t)},get:function(t,e,r){var n=s(e,r,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,r,n){s(r,n,!0).set(t,e)},keys:function(t,e){var r=s(t,e,!1),n=[];return r&&r.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,e,r){var n=r(34)("meta"),i=r(4),o=r(11),a=r(7).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(3)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[n].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,n)&&l(t),t}}},function(t,e,r){var n=r(5)("unscopables"),i=Array.prototype;void 0==i[n]&&r(12)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t){t.exports={client:{defaultConfig:{accessToken:"",storyId:"",actId:"",sceneId:"",environment:"production"}},api:{production:"https://api.imposium.com",staging:"https://api.staging.imposium.com",currentVersion:"2.0.0",version:"X-Imposium-Api-Version",hmac:"X-Imposium-Access-Key",jwt:"Authorization",img:"https://cdn.imposium.com/SampleJPGImage_1mb.jpg"},messageConsumer:{maxReconnects:5,minReconnects:0,errorOverTcp:"Server failure.",videoSceneKey:"VideoScene01"},stomp:{production:"wss://stomp.prod.k8s.nickel.media/ws/",staging:"wss://stomp.staging.k8s.nickel.media/ws",exchange:"/exchange/imposium/",username:"imposium_stomp",password:"Teehe1ceeMe7Pe1d"},analytics:{exceptionProp:"UA-123315989-1",baseUrl:"https://ssl.google-analytics.com/collect",lsLookup:"imposium_js_ga_cid",gaPropPlaceholder:"[id_placeholder]",cidPlaceholder:"[cid_placeholder]",concurrency:10,frequency:50},videoPlayer:{defaultConfig:{volume:1,preload:"auto",loop:!1,muted:!1,autoLoad:!0,autoPlay:!0,controls:!0,crossOrigin:"anonymous",qualityOverride:null},playbackEvents:[.25,.5,.75],checkPlaybackRateMs:100,volumeMin:0,volumeMax:1,bandwidth:{low:2.4,mid:8},compression:{stream:"m3u8",low:"mp4_480",mid:"mp4_720",high:"mp4_1080"},bandwidthSamples:5,hlsSupportLevels:{native:"native",hlsjs:"hls-js"},streamType:"application/vnd.apple.mpegurl"}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,r){var n=r(101),i=r(70);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(25),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(1),i=r(102),o=r(70),a=r(69)("IE_PROTO"),s=function(){},u=function(){var t,e=r(67)("iframe"),n=o.length;for(e.style.display="none",r(71).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[a]=t):r=u(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(101),i=r(70).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){"use strict";var n=r(2),i=r(7),o=r(6),a=r(5)("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(19),i=r(113),o=r(83),a=r(1),s=r(8),u=r(85),c={},l={};(e=t.exports=function(t,e,r,f,d){var h,p,v,g,y=d?function(){return t}:u(t),m=n(r,f,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(h=s(t.length);h>b;b++)if((g=e?m(a(p=t[b])[0],p[1]):m(t[b]))===c||g===l)return g}else for(v=y.call(t);!(p=v.next()).done;)if((g=i(v,m,p.value,e))===c||g===l)return g}).BREAK=c,e.RETURN=l},function(t,e,r){var n=r(13);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){var n=r(7).f,i=r(11),o=r(5)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(0),i=r(24),o=r(3),a=r(73),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,r){var i={},s=o(function(){return!!a[t]()||"​"!="​"[t]()}),u=i[t]=s?e(f):a[t];r&&(i[r]=u),n(n.P+n.F*s,"String",i)},f=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e){t.exports={}},function(t,e,r){var n=r(4);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,r){var n=r(20);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(20),i=r(5)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(393),o={ENV:"environment",MODERATION:"moderation",CLIENT_CONFIG:"clientConfiguration",PLAYER_CONFIG:"playerConfiguration",NETWORK:"network",UNCAUGHT:"uncaught"},a=function(t){function e(r,n){var i=t.call(this,r)||this;return i.prefix="[IMPOSIUM ERROR]",i.type="",Error.captureStackTrace&&Error.captureStackTrace(i,e),i.type=n,i}return n(e,t),e}(Error);e.ImposiumError=a;var s=function(t){function e(r,n){void 0===n&&(n=o.ENV);var a=t.call(this,i[n][r],n)||this;return a.log=function(){console.error(a.prefix+"\n            \nReason: Unavailable feature\n            \nMessage: "+a.message)},Error.captureStackTrace&&Error.captureStackTrace(a,e),a}return n(e,t),e}(a);e.EnvironmentError=s;var u=function(t){function e(e,r,n){void 0===n&&(n=o.MODERATION);var a=t.call(this,i[n][e],n)||this;return a.experienceId=null,a.log=function(){console.error(a.prefix+"\n            \nReason: Moderation Issue\n            \nExperience ID: "+a.experienceId+"\n            \nMessage: "+a.message)},Error.captureStackTrace&&Error.captureStackTrace(a,s),a}return n(e,t),e}(a);e.ModerationError=u;var c=function(t){function e(r,n,a){void 0===a&&(a=o.CLIENT_CONFIG);var s=t.call(this,i[a][r],a)||this;return s.eventName="",s.log=function(){console.error(s.prefix+"\n            \nReason: Invalid client configuration\n            \nMessage: "+s.message+"\n            \nEvent name: "+s.eventName)},Error.captureStackTrace&&Error.captureStackTrace(s,e),s.eventName=n||"<not_set>",s}return n(e,t),e}(a);e.ClientConfigurationError=c;var l=function(t){function e(r,n,a){void 0===a&&(a=o.PLAYER_CONFIG);var s=t.call(this,i[a][r],a)||this;return s.eventName="",s.log=function(){console.error(s.prefix+"\n            \nReason: Invalid player configuration\n            \nMessage: "+s.message+"\n            \nEvent name: "+s.eventName)},Error.captureStackTrace&&Error.captureStackTrace(s,e),s.eventName=n||"<not_set>",s}return n(e,t),e}(a);e.PlayerConfigurationError=l;var f=function(t){function e(r,n,a,s){void 0===s&&(s=o.NETWORK);var u=t.call(this,i[s][r],s)||this;return u.experienceId=null,u.networkError=null,u.log=function(){console.error(u.prefix+"\n            \nReason: Network related error\n            \nMessage: "+u.message+"\n            \nExperience ID: "+u.experienceId+"\n            \nNetwork Error: ",u.networkError)},Error.captureStackTrace&&Error.captureStackTrace(u,e),u.experienceId=n||"<not_set>",u.networkError=a,u}return n(e,t),e}(a);e.NetworkError=f;var d=function(t){function e(e,r,n){void 0===n&&(n=o.UNCAUGHT);var a=t.call(this,i[n][e],n)||this;return a.uncaughtError=null,a.log=function(){console.error(a.prefix+"\n            \nReason: Unknown\n            \nMessage: "+a.message+"\n            \nError: ",a.uncaughtError)},Error.captureStackTrace&&Error.captureStackTrace(a,f),a.uncaughtError=r,a}return n(e,t),e}(a);e.UncaughtError=d},function(t,e,r){var n=r(2),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,r){var n=r(16),i=r(8),o=r(37);t.exports=function(t){return function(e,r,a){var s,u=n(e),c=i(u.length),l=o(a,c);if(t&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(20);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(4),i=r(20),o=r(5)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(5)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},t(o)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(1);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){"use strict";var n=r(12),i=r(13),o=r(3),a=r(24),s=r(5);t.exports=function(t,e,r){var u=s(t),c=r(a,u,""[t]),l=c[0],f=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),n(RegExp.prototype,u,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},function(t,e,r){var n=r(1),i=r(10),o=r(5)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||void 0==(r=n(a)[o])?e:i(r)}},function(t,e,r){"use strict";var n=r(2),i=r(0),o=r(13),a=r(43),s=r(30),u=r(42),c=r(41),l=r(4),f=r(3),d=r(57),h=r(44),p=r(74);t.exports=function(t,e,r,v,g,y){var m=n[t],b=m,E=g?"set":"add",S=b&&b.prototype,_={},w=function(t){var e=S[t];o(S,t,"delete"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof b&&(y||S.forEach&&!f(function(){(new b).entries().next()}))){var T=new b,R=T[E](y?{}:-0,1)!=T,A=f(function(){T.has(1)}),x=d(function(t){new b(t)}),L=!y&&f(function(){for(var t=new b,e=5;e--;)t[E](e,e);return!t.has(-0)});x||((b=e(function(e,r){c(e,b,t);var n=p(new m,e,b);return void 0!=r&&u(r,g,n[E],n),n})).prototype=S,S.constructor=b),(A||L)&&(w("delete"),w("has"),g&&w("get")),(L||R)&&w(E),y&&S.clear&&delete S.clear}else b=v.getConstructor(e,t,g,E),a(b.prototype,r),s.NEED=!0;return h(b,t),_[t]=b,i(i.G+i.W+i.F*(b!=m),_),y||v.setStrong(b,t,g),b}},function(t,e,r){for(var n,i=r(2),o=r(12),a=r(34),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=i[d[f++]])?(o(n.prototype,s,!0),o(n.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,r){"use strict";t.exports=r(35)||!r(3)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(2)[t]})},function(t,e,r){"use strict";var n=r(0);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,r){"use strict";var n=r(0),i=r(10),o=r(19),a=r(42);t.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,s,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(r=[],e?(n=0,s=o(u,arguments[2],2),a(t,!1,function(t){r.push(s(t,n++))})):a(t,!1,r.push,r),new this(r))}})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(388);e.isNode=function(){return"undefined"!=typeof process&&process+""=="[object process]"&&void 0!==((process||{}).versions||{}).node},e.prepConfig=function(t,e){var r=Object.keys(e);for(var n in t)-1===r.indexOf(n)&&delete t[n]},e.inRangeNumeric=function(t,e,r){return(t-e)*(t-r)<=0},e.isFunc=function(t){return"[object Function]"===Object.prototype.toString.call(t)},e.keyExists=function(t,e){return~Object.keys(t).map(function(e){return t[e]}).indexOf(e)},e.cloneWithKeys=function(t){return Object.keys(t).reduce(function(t,e){return t[e]=null,t},{})},e.calculateMbps=function(t,e){return 8*e/(((new Date).getTime()-t)/1e3)/Math.pow(1024,2)},e.calculateAverageMbps=function(t){var e=t.reduce(function(t,e){return t+e});return parseFloat((e/t.length).toFixed(2))},e.inventoryToFormData=function(t,r){return e.isNode()?o(t,r):i(t,r)};var i=function(t,e){var r=new FormData;for(var n in r.append("story_id",t),e)if(e[n]){var i=e[n];if(i&&"file"===i.type){var o=i.files;o.length>0?(e[n]="",r.append(n,o[0])):e[n]=""}else(i&&i instanceof Blob||i instanceof File)&&(e[n]="",r.append(n,i,"inventory.png"));r.append("inventory["+n+"]",e[n])}return r},o=function(t,e){var i=r(141),o=new n;for(var a in o.append("story_id",t),e)if(e[a]){var s=e[a];e[a]instanceof i.Readable&&(e[a]="",o.append(a,s,"test.jpg")),o.append("inventory["+a+"]",e[a]?e[a]:"")}return o}},function(t,e,r){var n=r(4),i=r(2).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(2),i=r(22),o=r(35),a=r(100),s=r(7).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,r){var n=r(52)("keys"),i=r(34);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(2).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(4),i=r(1),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(19)(Function.call,r(17).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,r){var n=r(4),i=r(72).set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},function(t,e,r){"use strict";var n=r(25),i=r(24);t.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){var n=r(25),i=r(24);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,r){"use strict";var n=r(35),i=r(0),o=r(13),a=r(12),s=r(11),u=r(46),c=r(80),l=r(44),f=r(18),d=r(5)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,r,v,g,y,m){c(r,e,v);var b,E,S,_=function(t){if(!h&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},w=e+" Iterator",T="values"==g,R=!1,A=t.prototype,x=A[d]||A["@@iterator"]||g&&A[g],L=!h&&x||_(g),O=g?T?_("entries"):L:void 0,C="Array"==e&&A.entries||x;if(C&&(S=f(C.call(new t)))!==Object.prototype&&S.next&&(l(S,w,!0),n||s(S,d)||a(S,d,p)),T&&x&&"values"!==x.name&&(R=!0,L=function(){return x.call(this)}),n&&!m||!h&&!R&&A[d]||a(A,d,L),u[e]=L,u[w]=p,g)if(b={values:T?L:_("values"),keys:y?L:_("keys"),entries:O},m)for(E in b)E in A||o(A,E,b[E]);else i(i.P+i.F*(h||R),e,b);return b}},function(t,e,r){"use strict";var n=r(38),i=r(33),o=r(44),a={};r(12)(a,r(5)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){var n=r(56),i=r(24);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n=r(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(46),i=r(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){"use strict";var n=r(7),i=r(33);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(50),i=r(5)("iterator"),o=r(46);t.exports=r(22).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(242);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(9),i=r(37),o=r(8);t.exports=function(t){for(var e=n(this),r=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>s;)e[s++]=t;return e}},function(t,e,r){"use strict";var n=r(31),i=r(116),o=r(46),a=r(16);t.exports=r(79)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n,i,o,a=r(19),s=r(106),u=r(71),c=r(67),l=r(2),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};d&&h||(d=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return y[++g]=function(){s("function"==typeof t?t:Function(t),e)},n(g),g},h=function(t){delete y[t]},"process"==r(20)(f)?n=function(t){f.nextTick(a(m,t,1))}:v&&v.now?n=function(t){v.now(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):n="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,r){var n=r(2),i=r(89).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(20)(a);t.exports=function(){var t,e,r,c=function(){var n,i;for(u&&(n=a.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve();r=function(){l.then(c)}}else r=function(){i.call(n,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),r=function(){d.data=f=!f}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){"use strict";var n=r(10);t.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}(t)}},function(t,e,r){"use strict";var n=r(2),i=r(6),o=r(35),a=r(62),s=r(12),u=r(43),c=r(3),l=r(41),f=r(25),d=r(8),h=r(125),p=r(39).f,v=r(7).f,g=r(87),y=r(44),m="prototype",b="Wrong index!",E=n.ArrayBuffer,S=n.DataView,_=n.Math,w=n.RangeError,T=n.Infinity,R=E,A=_.abs,x=_.pow,L=_.floor,O=_.log,C=_.LN2,I=i?"_b":"buffer",k=i?"_l":"byteLength",P=i?"_o":"byteOffset";function D(t,e,r){var n,i,o,a=new Array(r),s=8*r-e-1,u=(1<<s)-1,c=u>>1,l=23===e?x(2,-24)-x(2,-77):0,f=0,d=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===T?(i=t!=t?1:0,n=u):(n=L(O(t)/C),t*(o=x(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?l/o:l*x(2,1-c))*o>=2&&(n++,o/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(t*o-1)*x(2,e),n+=c):(i=t*x(2,c-1)*x(2,e),n=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(n=n<<e|i,s+=e;s>0;a[f++]=255&n,n/=256,s-=8);return a[--f]|=128*d,a}function F(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=r-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-T:T;n+=x(2,e),l-=a}return(c?-1:1)*n*x(2,l-e)}function M(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function N(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function B(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function j(t){return D(t,52,8)}function G(t){return D(t,23,4)}function V(t,e,r){v(t[m],e,{get:function(){return this[r]}})}function H(t,e,r,n){var i=h(+r);if(i+e>t[k])throw w(b);var o=t[I]._b,a=i+t[P],s=o.slice(a,a+e);return n?s:s.reverse()}function q(t,e,r,n,i,o){var a=h(+r);if(a+e>t[k])throw w(b);for(var s=t[I]._b,u=a+t[P],c=n(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c(function(){E(1)})||!c(function(){new E(-1)})||c(function(){return new E,new E(1.5),new E(NaN),"ArrayBuffer"!=E.name})){for(var W,K=(E=function(t){return l(this,E),new R(h(t))})[m]=R[m],Y=p(R),z=0;Y.length>z;)(W=Y[z++])in E||s(E,W,R[W]);o||(K.constructor=E)}var X=new S(new E(2)),J=S[m].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||u(S[m],{setInt8:function(t,e){J.call(this,t,e<<24>>24)},setUint8:function(t,e){J.call(this,t,e<<24>>24)}},!0)}else E=function(t){l(this,E,"ArrayBuffer");var e=h(t);this._b=g.call(new Array(e),0),this[k]=e},S=function(t,e,r){l(this,S,"DataView"),l(t,E,"DataView");var n=t[k],i=f(e);if(i<0||i>n)throw w("Wrong offset!");if(i+(r=void 0===r?n-i:d(r))>n)throw w("Wrong length!");this[I]=t,this[P]=i,this[k]=r},i&&(V(E,"byteLength","_l"),V(S,"buffer","_b"),V(S,"byteLength","_l"),V(S,"byteOffset","_o")),u(S[m],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return M(H(this,4,t,arguments[1]))},getUint32:function(t){return M(H(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(H(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(H(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,N,e)},setUint8:function(t,e){q(this,1,t,N,e)},setInt16:function(t,e){q(this,2,t,U,e,arguments[2])},setUint16:function(t,e){q(this,2,t,U,e,arguments[2])},setInt32:function(t,e){q(this,4,t,B,e,arguments[2])},setUint32:function(t,e){q(this,4,t,B,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,G,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,j,e,arguments[2])}});y(E,"ArrayBuffer"),y(S,"DataView"),s(S[m],a.VIEW,!0),e.ArrayBuffer=E,e.DataView=S},function(t,e,r){var n=r(2).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(352),o=r(382),a=r(385),s=r(66),u=r(32).api,c=function(){function t(e,r){var a=this;this.http=null,this.configureClient=function(e,r){var o,s=u.version,c=u.currentVersion;a.http=i.default.create({baseURL:u[r],headers:n({},a.getAuthHeader(e),(o={},o[s]=c,o))}),t.retry(a.http,{retryDelay:t.retry.exponentialDelay})},this.getStory=function(t){var e=a.http.get;return new Promise(function(r,n){e("/story/"+t).then(function(t){var e=t.data;r(e)}).catch(function(t){n(t)})})},this.getExperience=function(t){var e=a.http.get;return new Promise(function(r,n){e("/experience/"+t).then(function(t){var e=t.data;r(e)}).catch(function(t){n(t)})})},this.postExperience=function(t,e,r){void 0===r&&(r=null);var n=a,i=n.doPostExperience,o=n.uploadProgress,u=s.inventoryToFormData(t,e),c={headers:{},onUploadProgress:function(t){return o(t,r)}};return s.isNode()?(c.headers=u.getHeaders(),i(u,c)):i(u,c)},this.invokeStream=function(t){var e=a.http.post;return new Promise(function(r,n){e("/experience/"+t+"/trigger-event").then(function(t){r()}).catch(function(t){n(t)})})},this.getAuthHeader=function(t){var e,r,n=u.jwt,i=u.hmac;try{return o(t),(e={})[n]=t,e}catch(e){return(r={})[i]=t,r}},this.doPostExperience=function(t,e){var r=a.http.post;return new Promise(function(n,i){r("/experience/render",t,e).then(function(t){var e=t.data;n(e)}).catch(function(t){i(t)})})},this.uploadProgress=function(t,e){if(void 0===e&&(e=null),e){var r=t.loaded,n=t.total;e(Math.round(r/n*100))}},this.configureClient(e,r)}return t.getGATrackingPixel=function(t){var e=i.default.get;return new Promise(function(r,n){e(t).then(function(t){r()}).catch(function(t){n(t)})})},t.checkBandwidth=function(){var e=i.default.get,r=t.testImage+"?bust="+Math.random(),n={responseType:"blob",timeout:1500};return new Promise(function(t,i){var o=(new Date).getTime();e(r,n).then(function(e){var r=e.data.size;t(s.calculateMbps(o,r))}).catch(function(t){i(t)})})},t.testImage=u.img,t.retry=a,t}();e.default=c},function(t,e,r){"use strict";var n=r(15),i=r(356),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=r(357):"undefined"!=typeof process&&(t=r(362)),t}(),transformRequest:[function(t,e){return i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(t){s.headers[t]={}}),n.forEach(["post","put","patch"],function(t){s.headers[t]=n.merge(o)}),t.exports=s},function(t,e,r){"use strict";var n=r(135);t.exports=function(t,e,r,i,o){var a=new Error(t);return n(a,e,r,i,o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(98),i=r(51),o=r(146),a=r(32).analytics,s=r(394),u=function(){function t(){}return t.logWarning=function(t,e){console.warn("IMPOSIUM\n"+s[t][e])},t.trapError=function(e,r,n){if(void 0===n&&(n=null),n&&n(e),e.log)if(e.networkError)if(e.networkError.config)t.logError(e,r);else{var o=new i.UncaughtError("generic",e.networkError);t.logError(o,r)}else t.logError(e,r);else o=new i.UncaughtError("generic",e),t.logError(o,r)},t.errorsProperty=a.exceptionProp,t.logError=function(e,r){e.log(),t.traceError(e,r)},t.traceError=function(e,r){var i=t.errorsProperty,a="Version: "+o.version+"*";e.eventName&&(a+="Event name: "+e.eventName+"*"),e.experienceId&&(a+="Experience ID: "+e.experienceId+"*"),e.networkError?a+="Url: "+e.networkError.config.url+"*Stack: "+e.networkError:e.uncaughtError?a+="Stack: "+e.uncaughtError:a+="Stack: "+e.stack,n.default.send({prp:i,t:"event",ec:e.type,ea:a,el:r,ev:0})},t}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(94),i=r(145),o=r(32).analytics,a=function(){function t(){}return t.setup=function(){t.request.clientId=t.checkCache()},t.send=function(e){var r=t.emit,n=t.addToQueue,i=t.concatParams,o=t.broker,a=o.defer;o.active.isEmpty()&&!a&&r(),n(i(e))},t.emitter=null,t.retryTimeout=null,t.request={baseUrl:o.baseUrl,cacheKey:o.lsLookup,clientId:o.cidPlaceholder},t.broker={concurrency:o.concurrency,frequency:o.frequency,defer:!1,active:new i.default,deferred:new i.default},t.checkCache=function(){var e=t.setCache,r=t.generateGuid,n=t.request.cacheKey;try{var i=JSON.parse(localStorage.getItem(n));if(i){var o=i.expiry,a=i.guid;if(o>new Date)return a;localStorage.removeItem(n)}return e(r())}catch(t){return r()}},t.setCache=function(e){try{var r=t.request.cacheKey,n=new Date,i={guid:e,expiry:n.setFullYear(n.getFullYear()+2)};localStorage.setItem(r,JSON.stringify(i))}catch(t){return e}return e},t.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t.generateGuid=function(){var e=t.s4;return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.getRandom=function(){return""+Math.round((new Date).getTime()/1e3)},t.concatParams=function(e){var r=t.getRandom,n=t.request,i=n.baseUrl,o=n.clientId,a=e.prp;delete e.prp;for(var s=i+"?v=1&tid="+a+"&z="+r()+"&cid="+o,u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(e[l])}return s},t.emit=function(){var e=t.setRequestUrl,r=t.broker.frequency;t.emitter=setInterval(function(){return e()},r)},t.addToQueue=function(e){var r=t.broker,n=r.concurrency,i=r.active,o=r.deferred,a=t.broker.defer;a?o.enqueue(e):(i.enqueue(e),a=!(i.getLength()<n))},t.scrapeDeferred=function(){var e=t.emit,r=t.broker,n=t.broker,i=n.concurrency,o=n.active,a=n.deferred;if(n.defer,a.isEmpty())r.defer=!1;else{var s,u=a.getLength();s=u>i?i:u;for(var c=0;c<s;c++)o.enqueue(a.peek()),a.pop();r.defer=!1,e()}},t.setRequestUrl=function(){var e=t.makeRequest,r=t.scrapeDeferred,n=t.broker,i=t.emitter,o=n.active,a=o.peek();a?(o.pop(),e(a)):(clearInterval(i),r())},t.makeRequest=function(e){var r=t.broker,i=t.emit,o=t.emitter,a=r.active;n.default.getGATrackingPixel(e).then(function(){a.isEmpty()&&clearInterval(o)}).catch(function(t){clearInterval(o),a.pop(),i()})},t}();e.default=a},function(t,e,r){t.exports=!r(6)&&!r(3)(function(){return 7!=Object.defineProperty(r(67)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){e.f=r(5)},function(t,e,r){var n=r(11),i=r(16),o=r(53)(!1),a=r(69)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~o(c,r)||c.push(r));return c}},function(t,e,r){var n=r(7),i=r(1),o=r(36);t.exports=r(6)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),s=a.length,u=0;s>u;)n.f(t,r=a[u++],e[r]);return t}},function(t,e,r){var n=r(16),i=r(39).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(n(t))}},function(t,e,r){"use strict";var n=r(36),i=r(54),o=r(49),a=r(9),s=r(48),u=Object.assign;t.exports=!u||r(3)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var r=a(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?n(h).concat(l(h)):n(h),v=p.length,g=0;v>g;)f.call(h,d=p[g++])&&(r[d]=h[d]);return r}:u},function(t,e,r){"use strict";var n=r(10),i=r(4),o=r(106),a=[].slice,s={};t.exports=Function.bind||function(t){var e=n(this),r=a.call(arguments,1),u=function(){var n=r.concat(a.call(arguments));return this instanceof u?function(t,e,r){if(!(e in s)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,r)}(e,n.length,n):o(e,n,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(2).parseInt,i=r(45).trim,o=r(73),a=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var r=i(String(t),3);return n(r,e>>>0||(a.test(r)?16:10))}:n},function(t,e,r){var n=r(2).parseFloat,i=r(45).trim;t.exports=1/n(r(73)+"-0")!=-1/0?function(t){var e=i(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){var n=r(20);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){var n=r(4),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){var n=r(76),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,r,i=Math.abs(t),c=n(t);return i<u?c*(i/u/a+1/o-1/o)*u*a:(r=(e=(1+a/o)*i)-(e-i))>s||r!=r?c*(1/0):c*r}},function(t,e,r){var n=r(1);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){var n=r(10),i=r(9),o=r(48),a=r(8);t.exports=function(t,e,r,s,u){n(e);var c=i(t),l=o(c),f=a(c.length),d=u?f-1:0,h=u?-1:1;if(r<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in l&&(s=e(s,l[d],d,c));return s}},function(t,e,r){"use strict";var n=r(9),i=r(37),o=r(8);t.exports=[].copyWithin||function(t,e){var r=n(this),a=o(r.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in r?r[s]=r[u]:delete r[s],s+=f,u+=f;return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){r(6)&&"g"!=/./g.flags&&r(7).f(RegExp.prototype,"flags",{configurable:!0,get:r(58)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(1),i=r(4),o=r(91);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(121),i=r(47);t.exports=r(61)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(i(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(7).f,i=r(38),o=r(43),a=r(19),s=r(41),u=r(42),c=r(79),l=r(116),f=r(40),d=r(6),h=r(30).fastKey,p=r(47),v=d?"_s":"size",g=function(t,e){var r,n=h(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,c){var l=t(function(t,n){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=n&&u(n,r,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var r=p(this,e),n=g(r,t);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[v]--}return!!n},forEach:function(t){p(this,e);for(var r,n=a(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!g(p(this,e),t)}}),d&&n(l.prototype,"size",{get:function(){return p(this,e)[v]}}),l},def:function(t,e,r){var n,i,o=g(t,e);return o?o.v=r:(t._l=o={i:i=h(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,r){c(t,e,function(t,r){this._t=p(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},r?"entries":"values",!r,!0),f(e)}}},function(t,e,r){"use strict";var n=r(121),i=r(47);t.exports=r(61)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(i(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n,i=r(27)(0),o=r(13),a=r(30),s=r(104),u=r(124),c=r(4),l=r(3),f=r(47),d=a.getWeak,h=Object.isExtensible,p=u.ufstore,v={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(c(t)){var e=d(t);return!0===e?p(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},m=t.exports=r(61)("WeakMap",g,y,u,!0,!0);l(function(){return 7!=(new m).set((Object.freeze||Object)(v),7).get(v)})&&(s((n=u.getConstructor(g,"WeakMap")).prototype,y),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=m.prototype,r=e[t];o(e,t,function(e,i){if(c(e)&&!h(e)){this._f||(this._f=new n);var o=this._f[t](e,i);return"set"==t?this:o}return r.call(this,e,i)})}))},function(t,e,r){"use strict";var n=r(43),i=r(30).getWeak,o=r(1),a=r(4),s=r(41),u=r(42),c=r(27),l=r(11),f=r(47),d=c(5),h=c(6),p=0,v=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},y=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var r=y(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var c=t(function(t,n){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=n&&u(n,r,t[o],t)});return n(c.prototype,{delete:function(t){if(!a(t))return!1;var r=i(t);return!0===r?v(f(this,e)).delete(t):r&&l(r,this._i)&&delete r[this._i]},has:function(t){if(!a(t))return!1;var r=i(t);return!0===r?v(f(this,e)).has(t):r&&l(r,this._i)}}),c},def:function(t,e,r){var n=i(o(e),!0);return!0===n?v(t).set(e,r):n[t._i]=r,t},ufstore:v}},function(t,e,r){var n=r(25),i=r(8);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw RangeError("Wrong length!");return r}},function(t,e,r){var n=r(39),i=r(54),o=r(1),a=r(2).Reflect;t.exports=a&&a.ownKeys||function(t){var e=n.f(o(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){"use strict";var n=r(55),i=r(4),o=r(8),a=r(19),s=r(5)("isConcatSpreadable");t.exports=function t(e,r,u,c,l,f,d,h){for(var p,v,g=l,y=0,m=!!d&&a(d,h,3);y<c;){if(y in u){if(p=m?m(u[y],y,r):u[y],v=!1,i(p)&&(v=void 0!==(v=p[s])?!!v:n(p)),v&&f>0)g=t(e,r,p,o(p.length),g,f-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=p}g++}y++}return g}},function(t,e,r){var n=r(8),i=r(75),o=r(24);t.exports=function(t,e,r,a){var s=String(o(t)),u=s.length,c=void 0===r?" ":String(r),l=n(e);if(l<=u||""==c)return s;var f=l-u,d=i.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(t,e,r){var n=r(36),i=r(16),o=r(49).f;t.exports=function(t){return function(e){for(var r,a=i(e),s=n(a),u=s.length,c=0,l=[];u>c;)o.call(a,r=s[c++])&&l.push(t?[r,a[r]]:a[r]);return l}}},function(t,e,r){var n=r(50),i=r(131);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,r){var n=r(42);t.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},function(t,e){t.exports=Math.scale||function(t,e,r,n,i){return 0===arguments.length||t!=t||e!=e||r!=r||n!=n||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-n)/(r-e)+n}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(96);t.exports=function(t,e,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t}},function(t,e,r){"use strict";var n=r(15);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var a=[];n.forEach(e,function(t,e){null!==t&&void 0!==t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("https")},function(t,e,r){var n=r(140),i=r(137),o=r(138),a=r(363),s=r(141).Writable,u=r(364)("follow-redirects"),c={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},l=Object.create(null);function f(t,e){s.call(this),t.headers=t.headers||{},this._options=t,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;if(this._onNativeResponse=function(t){r._processResponse(t)},!t.pathname&&t.path){var n=t.path.indexOf("?");n<0?t.pathname=t.path:(t.pathname=t.path.substring(0,n),t.search=t.path.substring(n))}this._performRequest()}function d(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(i){var o=i+":",s=r[o]=t[i],c=e[i]=Object.create(s);c.request=function(t,i){return"string"==typeof t?(t=n.parse(t)).maxRedirects=e.maxRedirects:t=Object.assign({protocol:o,maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},t),t.nativeProtocols=r,a.equal(t.protocol,o,"protocol mismatch"),u("options",t),new f(t,i)},c.get=function(t,e){var r=c.request(t,e);return r.end(),r}}),e}["abort","aborted","error","socket","timeout"].forEach(function(t){l[t]=function(e){this._redirectable.emit(t,e)}}),f.prototype=Object.create(s.prototype),f.prototype.write=function(t,e,r){if(!("string"==typeof t||"object"==typeof t&&"length"in t))throw new Error("data should be a string, Buffer or Uint8Array");this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort())},f.prototype.end=function(t,e,r){var n=this._currentRequest;t?this.write(t,e,function(){n.end(null,null,r)}):n.end(null,null,r)},f.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)},f.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach(function(t){f.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}}),["aborted","connection","socket"].forEach(function(t){Object.defineProperty(f.prototype,t,{get:function(){return this._currentRequest[t]}})}),f.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=e.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=n.format(this._options),i._redirectable=this,l)o&&i.on(o,l[o]);if(this._isRedirect){var a=this._requestBodyBuffers;!function t(){if(0!==a.length){var e=a.pop();i.write(e.data,e.encoding,t)}else i.end()}()}},f.prototype._processResponse=function(t){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:t.statusCode});var e=t.headers.location;if(e&&!1!==this._options.followRedirects&&t.statusCode>=300&&t.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==t.statusCode&&!(this._options.method in c))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var o=n.resolve(this._currentUrl,e);u("redirecting to",o),Object.assign(this._options,n.parse(o)),this._isRedirect=!0,this._performRequest()}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]},t.exports=d({http:i,https:o}),t.exports.wrap=d},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("stream")},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=e.formatters[n];if("function"==typeof i){var o=a[u];r=i.call(t,o),a.splice(u,1),u--}return r}),e.formatArgs.call(t,a),(n.log||e.log||console.log.bind(console)).apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=i,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var o=e.instances[r];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(366),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this;this.enqueue=function(e){t.q.push(e)},this.pop=function(){t.q.splice(0,1)},this.reset=function(){t.q=[]},this.peek=function(){return t.q[0]},this.isEmpty=function(){return 0===t.q.length},this.getLength=function(){return t.q.length},this.q=[]};e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="2.0.0",e.printVersion=function(){console.log("%cPowered By%c Imposium%c v"+e.version+"%c https://imposium.com","text-transform: uppercase; padding: 5px 0px 5px 5px; background-color: black; color: white;","text-transform: uppercase; padding: 5px 0px 5px 0px; background-color: black; color: #a1b83a;","padding: 5px 5px 5px 0px; background-color: black; color: white;","padding: 5px 5px 5px 0px;")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(145),i=r(98),o=r(51),a=r(32).videoPlayer,s=function(){function t(e){var r=this;this.node=null,this.storyId="",this.mediaEvents={loadstart:function(){return r.onLoad()},play:function(){return r.onPlay()},pause:function(){return r.onPause()},ended:function(){return r.onEnd()}},this.experienceId="",this.gaProperty="",this.prevPlaybackEvent=0,this.deferredGaCalls=new n.default,this.remove=function(){for(var t=r,e=t.mediaEvents,n=t.node,i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];n.removeEventListener(a,e[a])}},this.setGaProperty=function(t){var e=r.deferredGaCalls;for(r.gaProperty&&r.gaProperty!==t&&!e.isEmpty()&&e.reset(),r.gaProperty=t;e.peek();)i.default.send(e.peek()),e.pop()},this.setStoryId=function(t){r.storyId=t},this.setExperienceId=function(t){r.experienceId=t},this.onLoad=function(){var t=r,e=t.gaProperty,n=t.experienceId,o=t.deferredGaCalls,a={prp:e,t:"event",ec:"video_player",ea:"view",el:n};e?i.default.send(a):o.enqueue(a)},this.onPlay=function(){clearInterval(r.playbackInterval),r.playbackInterval=setInterval(function(){return r.checkPlayback()},t.intervalRate)},this.onPause=function(){var t=r.playbackInterval;clearInterval(t)},this.checkPlayback=function(){var e=r,n=e.node,o=e.prevPlaybackEvent,a=e.gaProperty,s=e.experienceId,u=e.deferredGaCalls,c=e.playbackInterval;if(n){var l=n.currentTime/n.duration,f=t.playbackEvents[o];if(l>f){var d={prp:a,t:"event",ec:"video_player",ea:"playback_"+f,el:s};a?i.default.send(d):u.enqueue(d),r.prevPlaybackEvent++}}else clearInterval(c)},this.onEnd=function(){var t=r,e=t.gaProperty,n=t.experienceId,o=t.deferredGaCalls,a=t.playbackInterval;clearInterval(a);var s={prp:e,t:"event",ec:"video_player",ea:"playback_1",el:n};e?i.default.send(s):o.enqueue(s),r.prevPlaybackEvent=0};var a=this.mediaEvents;this.storyId,this.node=e;for(var s=0,u=Object.keys(a);s<u.length;s++){var c=u[s];try{this.node.addEventListener(c,this.mediaEvents[c])}catch(t){throw new o.PlayerConfigurationError("invalidPlayerRef",null)}}}return t.intervalRate=a.checkPlaybackRateMs,t.playbackEvents=a.playbackEvents,t}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(149);e.Client=n.default;var i=r(396);e.Player=i.default;var o=n.default.events;e.Events=o},function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0}),r(150);var i=r(94),o=r(389),a=r(98),s=r(395),u=r(97),c=r(146),l=r(51),f=r(66),d=r(32).client;f.isNode()||c.printVersion();var h=function(){function t(e){var r=this;this.clientConfig=null,this.eventDelegateRefs=f.cloneWithKeys(t.events),this.api=null,this.player=null,this.consumer=null,this.gaProperty="",this.playerIsFallback=!1,this.setup=function(t){r.assignConfigOpts(t)},this.setPlayer=function(t,e){void 0===e&&(e=!1);var n=r.clientConfig.storyId;r.playerIsFallback=e,r.player=t,t.setStoryId(n)},this.on=function(e,n){var i=r,o=i.clientConfig.storyId,a=i.eventDelegateRefs,s=i.eventDelegateRefs.ERROR;try{if(!f.isFunc(n))throw new l.ClientConfigurationError("invalidCallbackType",e);if(!f.keyExists(t.events,e))throw new l.ClientConfigurationError("invalidEventName",e);a[e]=n}catch(t){u.default.trapError(t,o,s)}},this.off=function(e){void 0===e&&(e="");var n=r,i=n.clientConfig.storyId,o=n.eventDelegateRefs,a=n.eventDelegateRefs.ERROR;try{if(e){if(!f.keyExists(t.events,e))throw new l.ClientConfigurationError("invalidEventName",e);o[e]=null}else Object.keys(t.events).forEach(function(t){o[t]=null})}catch(t){u.default.trapError(t,i,a)}},this.getExperience=function(e){var n=r,i=n.api,o=n.player,a=(n.gaProperty,n.clientConfig.storyId),s=n.eventDelegateRefs,c=s.GOT_EXPERIENCE,f=s.ERROR;try{if(!c&&!o)throw new l.ClientConfigurationError("eventNotConfigured",t.events.GOT_EXPERIENCE);i.getExperience(e).then(function(t){var e=t.id,n=t.output,i=t.rendering,s=t.moderation_status;if(Object.keys(n).length>0)o&&o.experienceGenerated(t),c&&c(t);else if("rejected"===s){var d=new l.ModerationError("rejection",e);u.default.trapError(d,a,f)}else r.renderExperience(e,i)}).catch(function(t){var r=new l.NetworkError("httpFailure",e,t);u.default.trapError(r,a,f)})}catch(t){u.default.trapError(t,a,f)}},this.createExperience=function(e,n){void 0===n&&(n=!0);var i=r,o=i.player,a=i.playerIsFallback,s=i.clientConfig.storyId,c=i.eventDelegateRefs,d=c.GOT_EXPERIENCE,h=c.EXPERIENCE_CREATED,p=c.STATUS_UPDATE,v=c.UPLOAD_PROGRESS,g=c.ERROR,y=n&&null!==o&&!a||f.isFunc(d),m=f.isFunc(h);try{if(!y&&!m){var b=null;throw h||(b=t.events.EXPERIENCE_CREATED),n&&!d&&(b=t.events.GOT_EXPERIENCE),new l.ClientConfigurationError("eventNotConfigured",b)}var E=r.api;p&&p({status:"Creating Experience"}),E.postExperience(s,e,v).then(function(t){var e=r.clientConfig,i=(e.sceneId,e.actId,t.id),o=t.rendering;h&&h(t),n&&r.renderExperience(i,o)}).catch(function(t){var e=new l.NetworkError("httpFailure",null,t);u.default.trapError(e,s,g)})}catch(t){u.default.trapError(t,s,g)}},this.captureAnalytics=function(t){void 0===t&&(t=null);var e=r,n=e.clientConfig.storyId,i=e.eventDelegateRefs.ERROR;try{if(f.isNode())throw new l.EnvironmentError("node");if(!(t instanceof HTMLVideoElement))throw new l.PlayerConfigurationError("invalidPlayerRef",null);r.setPlayer(new s.default(t),!0)}catch(t){u.default.trapError(t,n,i)}},this.assignConfigOpts=function(t){r.clientConfig;var e=d.defaultConfig;f.prepConfig(t,e),r.clientConfig=n({},e,t),r.api?r.api.configureClient(r.clientConfig.accessToken,r.clientConfig.environment):r.api=new i.default(r.clientConfig.accessToken,r.clientConfig.environment),f.isNode()||r.getAnalyticsProperty()},this.getAnalyticsProperty=function(){var t=r,e=t.api,n=t.clientConfig.storyId,i=t.eventDelegateRefs.ERROR;e.getStory(n).then(function(t){var e=t.gaTrackingId;e&&(r.gaProperty=e,r.player&&r.player.setGaProperty(e),a.default.setup(),r.doPageView(),window.addEventListener("popstate",function(){return r.doPageView()}))}).catch(function(t){var e=new l.NetworkError("httpFailure",null,t);u.default.trapError(e,n,i)})},this.doPageView=function(){var t=r.gaProperty;a.default.send({prp:t,t:"pageview",dp:window.location.pathname})},this.startMessaging=function(t){var e=r,n=e.api,i=e.clientConfig.storyId,o=e.eventDelegateRefs.ERROR;n.invokeStream(t).catch(function(e){var r=new l.NetworkError("httpFailure",t,e);u.default.trapError(r,i,o)})},this.makeConsumer=function(t,e){var i=r,a=i.clientConfig,s=a.storyId,u=a.environment,c=i.eventDelegateRefs,l=i.player,f=n({start:e?null:function(t){return r.startMessaging(t)}},c);r.consumer=new o.default(u,s,t,f,l)},this.renderExperience=function(t,e){var n=r.consumer;n?n.kill().then(function(){r.makeConsumer(t,e)}):r.makeConsumer(t,e)},e.accessToken&&e.storyId&&this.assignConfigOpts(e)}return t.events={EXPERIENCE_CREATED:"EXPERIENCE_CREATED",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",GOT_EXPERIENCE:"GOT_EXPERIENCE",STATUS_UPDATE:"STATUS_UPDATE",ERROR:"ERROR"},t}();e.default=h},function(t,e,r){"use strict";if(r(151),r(348),r(349),global._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");global._babelPolyfill=!0;var n="defineProperty";function i(t,e,r){t[e]||Object[n](t,e,{writable:!0,configurable:!0,value:r})}i(String.prototype,"padLeft","".padStart),i(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&i(Array,t,Function.call.bind([][t]))})},function(t,e,r){r(152),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(232),r(233),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(88),r(256),r(257),r(117),r(258),r(259),r(260),r(261),r(262),r(120),r(122),r(123),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(344),r(345),r(346),r(347),t.exports=r(22)},function(t,e,r){"use strict";var n=r(2),i=r(11),o=r(6),a=r(0),s=r(13),u=r(30).KEY,c=r(3),l=r(52),f=r(44),d=r(34),h=r(5),p=r(100),v=r(68),g=r(153),y=r(55),m=r(1),b=r(4),E=r(16),S=r(23),_=r(33),w=r(38),T=r(103),R=r(17),A=r(7),x=r(36),L=R.f,O=A.f,C=T.f,I=n.Symbol,k=n.JSON,P=k&&k.stringify,D=h("_hidden"),F=h("toPrimitive"),M={}.propertyIsEnumerable,N=l("symbol-registry"),U=l("symbols"),B=l("op-symbols"),j=Object.prototype,G="function"==typeof I,V=n.QObject,H=!V||!V.prototype||!V.prototype.findChild,q=o&&c(function(){return 7!=w(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=L(j,e);n&&delete j[e],O(t,e,r),n&&t!==j&&O(j,e,n)}:O,W=function(t){var e=U[t]=w(I.prototype);return e._k=t,e},K=G&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},Y=function(t,e,r){return t===j&&Y(B,e,r),m(t),e=S(e,!0),m(r),i(U,e)?(r.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),r=w(r,{enumerable:_(0,!1)})):(i(t,D)||O(t,D,_(1,{})),t[D][e]=!0),q(t,e,r)):O(t,e,r)},z=function(t,e){m(t);for(var r,n=g(e=E(e)),i=0,o=n.length;o>i;)Y(t,r=n[i++],e[r]);return t},X=function(t){var e=M.call(this,t=S(t,!0));return!(this===j&&i(U,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,D)&&this[D][t])||e)},J=function(t,e){if(t=E(t),e=S(e,!0),t!==j||!i(U,e)||i(B,e)){var r=L(t,e);return!r||!i(U,e)||i(t,D)&&t[D][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=C(E(t)),n=[],o=0;r.length>o;)i(U,e=r[o++])||e==D||e==u||n.push(e);return n},Q=function(t){for(var e,r=t===j,n=C(r?B:E(t)),o=[],a=0;n.length>a;)!i(U,e=n[a++])||r&&!i(j,e)||o.push(U[e]);return o};G||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(r){this===j&&e.call(B,r),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),q(this,t,_(1,r))};return o&&H&&q(j,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",function(){return this._k}),R.f=J,A.f=Y,r(39).f=T.f=$,r(49).f=X,r(54).f=Q,o&&!r(35)&&s(j,"propertyIsEnumerable",X,!0),p.f=function(t){return W(h(t))}),a(a.G+a.W+a.F*!G,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)h(Z[tt++]);for(var et=x(h.store),rt=0;et.length>rt;)v(et[rt++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(N,t+="")?N[t]:N[t]=I(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!G,"Object",{create:function(t,e){return void 0===e?w(t):z(w(t),e)},defineProperty:Y,defineProperties:z,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),k&&a(a.S+a.F*(!G||c(function(){var t=I();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(b(e)||void 0!==t)&&!K(t))return y(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),n[1]=e,P.apply(k,n)}}),I.prototype[F]||r(12)(I.prototype,F,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(t,e,r){var n=r(36),i=r(54),o=r(49);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,s=r(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,r){var n=r(0);n(n.S,"Object",{create:r(38)})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(6),"Object",{defineProperty:r(7).f})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(6),"Object",{defineProperties:r(102)})},function(t,e,r){var n=r(16),i=r(17).f;r(26)("getOwnPropertyDescriptor",function(){return function(t,e){return i(n(t),e)}})},function(t,e,r){var n=r(9),i=r(18);r(26)("getPrototypeOf",function(){return function(t){return i(n(t))}})},function(t,e,r){var n=r(9),i=r(36);r(26)("keys",function(){return function(t){return i(n(t))}})},function(t,e,r){r(26)("getOwnPropertyNames",function(){return r(103).f})},function(t,e,r){var n=r(4),i=r(30).onFreeze;r(26)("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(4),i=r(30).onFreeze;r(26)("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(4),i=r(30).onFreeze;r(26)("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},function(t,e,r){var n=r(4);r(26)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(4);r(26)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,r){var n=r(4);r(26)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(104)})},function(t,e,r){var n=r(0);n(n.S,"Object",{is:r(169)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(72).set})},function(t,e,r){"use strict";var n=r(50),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(13)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,r){var n=r(0);n(n.P,"Function",{bind:r(105)})},function(t,e,r){var n=r(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(6)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(4),i=r(18),o=r(5)("hasInstance"),a=Function.prototype;o in a||r(7).f(a,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(0),i=r(107);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(t,e,r){var n=r(0),i=r(108);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(t,e,r){"use strict";var n=r(2),i=r(11),o=r(20),a=r(74),s=r(23),u=r(3),c=r(39).f,l=r(17).f,f=r(7).f,d=r(45).trim,h=n.Number,p=h,v=h.prototype,g="Number"==o(r(38)(v)),y="trim"in String.prototype,m=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var r,n,i,o=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,n)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof h&&(g?u(function(){v.valueOf.call(r)}):"Number"!=o(r))?a(new p(m(e)),r,h):m(e)};for(var b,E=r(6)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;E.length>S;S++)i(p,b=E[S])&&!i(h,b)&&f(h,b,l(p,b));h.prototype=v,v.constructor=h,r(13)(n,"Number",h)}},function(t,e,r){"use strict";var n=r(0),i=r(25),o=r(109),a=r(75),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*c[r],c[r]=n%1e7,n=u(n/1e7)},d=function(t){for(var e=6,r=0;--e>=0;)r+=c[e],c[e]=u(r/t),r=r%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var r=String(c[t]);e=""===e?r:e+a.call("0",7-r.length)+r}return e},p=function(t,e,r){return 0===e?r:e%2==1?p(t,e-1,r*t):p(t*t,e/2,r)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(3)(function(){s.call({})})),"Number",{toFixed:function(t){var e,r,n,s,u=o(this,l),c=i(t),v="",g="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(r=(e=function(t){for(var e=0,r=u*p(2,69,1);r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}()-69)<0?u*p(2,-e,1):u/p(2,e,1),r*=4503599627370496,(e=52-e)>0){for(f(0,r),n=c;n>=7;)f(1e7,0),n-=7;for(f(p(10,n,1),0),n=e-1;n>=23;)d(1<<23),n-=23;d(1<<n),f(1,1),d(2),g=h()}else f(0,r),f(1<<-e,0),g=h()+a.call("0",c);return c>0?v+((s=g.length)<=c?"0."+a.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):v+g}})},function(t,e,r){"use strict";var n=r(0),i=r(3),o=r(109),a=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(0),i=r(2).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{isInteger:r(110)})},function(t,e,r){var n=r(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(0),i=r(110),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(0),i=r(108);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,r){var n=r(0),i=r(107);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,r){var n=r(0),i=r(111),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,r){var n=r(0),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(0),i=r(76);n(n.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,r){var n=r(0),i=r(77);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,r){var n=r(0);n(n.S,"Math",{fround:r(112)})},function(t,e,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,o=0,a=0,s=arguments.length,u=0;a<s;)u<(r=i(arguments[a++]))?(o=o*(n=u/r)*n+1,u=r):o+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log1p:r(111)})},function(t,e,r){var n=r(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(0);n(n.S,"Math",{sign:r(76)})},function(t,e,r){var n=r(0),i=r(77),o=Math.exp;n(n.S+n.F*r(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(0),i=r(77),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(0),i=r(37),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,a=0;n>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(0),i=r(16),o=r(8);n(n.S,"String",{raw:function(t){for(var e=i(t.raw),r=o(e.length),n=arguments.length,a=[],s=0;r>s;)a.push(String(e[s++])),s<n&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,r){"use strict";r(45)("trim",function(t){return function(){return t(this,3)}})},function(t,e,r){"use strict";var n=r(78)(!0);r(79)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(0),i=r(78)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(0),i=r(8),o=r(81),a="".endsWith;n(n.P+n.F*r(82)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),s=void 0===r?n:Math.min(i(r),n),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,r){"use strict";var n=r(0),i=r(81);n(n.P+n.F*r(82)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(0);n(n.P,"String",{repeat:r(75)})},function(t,e,r){"use strict";var n=r(0),i=r(8),o=r(81),a="".startsWith;n(n.P+n.F*r(82)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";r(14)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,r){"use strict";r(14)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,r){"use strict";r(14)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,r){"use strict";r(14)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,r){"use strict";r(14)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,r){"use strict";r(14)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,r){"use strict";r(14)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,r){"use strict";r(14)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,r){"use strict";r(14)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,r){"use strict";r(14)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,r){"use strict";r(14)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,r){"use strict";r(14)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,r){"use strict";r(14)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(0),i=r(9),o=r(23);n(n.P+n.F*r(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),r=o(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(0),i=r(231);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,r){"use strict";var n=r(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!n(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}:o},function(t,e,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(13)(n,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,e,r){var n=r(5)("toPrimitive"),i=Date.prototype;n in i||r(12)(i,n,r(234))},function(t,e,r){"use strict";var n=r(1),i=r(23);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),"number"!=t)}},function(t,e,r){var n=r(0);n(n.S,"Array",{isArray:r(55)})},function(t,e,r){"use strict";var n=r(19),i=r(0),o=r(9),a=r(113),s=r(83),u=r(8),c=r(84),l=r(85);i(i.S+i.F*!r(57)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,f,d=o(t),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,m=l(d);if(g&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(r=new h(e=u(d.length));e>y;y++)c(r,y,g?v(d[y],y):d[y]);else for(f=m.call(d),r=new h;!(i=f.next()).done;y++)c(r,y,g?a(f,v,[i.value,y],!0):i.value);return r.length=y,r}})},function(t,e,r){"use strict";var n=r(0),i=r(84);n(n.S+n.F*r(3)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";var n=r(0),i=r(16),o=[].join;n(n.P+n.F*(r(48)!=Object||!r(21)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,r){"use strict";var n=r(0),i=r(71),o=r(20),a=r(37),s=r(8),u=[].slice;n(n.P+n.F*r(3)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var r=s(this.length),n=o(this);if(e=void 0===e?r:e,"Array"==n)return u.call(this,t,e);for(var i=a(t,r),c=a(e,r),l=s(c-i),f=new Array(l),d=0;d<l;d++)f[d]="String"==n?this.charAt(i+d):this[i+d];return f}})},function(t,e,r){"use strict";var n=r(0),i=r(10),o=r(9),a=r(3),s=[].sort,u=[1,2,3];n(n.P+n.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!r(21)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,r){"use strict";var n=r(0),i=r(27)(0),o=r(21)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,r){var n=r(4),i=r(55),o=r(5)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(0),i=r(27)(1);n(n.P+n.F*!r(21)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(27)(2);n(n.P+n.F*!r(21)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(27)(3);n(n.P+n.F*!r(21)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(27)(4);n(n.P+n.F*!r(21)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(114);n(n.P+n.F*!r(21)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){"use strict";var n=r(0),i=r(114);n(n.P+n.F*!r(21)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){"use strict";var n=r(0),i=r(53)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(21)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(16),o=r(25),a=r(8),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!r(21)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),r=a(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(0);n(n.P,"Array",{copyWithin:r(115)}),r(31)("copyWithin")},function(t,e,r){var n=r(0);n(n.P,"Array",{fill:r(87)}),r(31)("fill")},function(t,e,r){"use strict";var n=r(0),i=r(27)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)("find")},function(t,e,r){"use strict";var n=r(0),i=r(27)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)(o)},function(t,e,r){r(40)("Array")},function(t,e,r){var n=r(2),i=r(74),o=r(7).f,a=r(39).f,s=r(56),u=r(58),c=n.RegExp,l=c,f=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(r(6)&&(!p||r(3)(function(){return h[r(5)("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")}))){c=function(t,e){var r=this instanceof c,n=s(t),o=void 0===e;return!r&&n&&t.constructor===c&&o?t:i(p?new l(n&&!o?t.source:t,e):l((n=t instanceof c)?t.source:t,n&&o?u.call(t):e),r?this:f,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},g=a(l),y=0;g.length>y;)v(g[y++]);f.constructor=c,c.prototype=f,r(13)(n,"RegExp",c)}r(40)("RegExp")},function(t,e,r){"use strict";r(117);var n=r(1),i=r(58),o=r(6),a=/./.toString,s=function(t){r(13)(RegExp.prototype,"toString",t,!0)};r(3)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(t,e,r){r(59)("match",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){r(59)("replace",2,function(t,e,r){return[function(n,i){"use strict";var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,r){r(59)("search",1,function(t,e,r){return[function(r){"use strict";var n=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]})},function(t,e,r){r(59)("split",2,function(t,e,n){"use strict";var i=r(56),o=n,a=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(r,t,e);var n,u,c,l,f,d=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,h+"g");for(s||(n=new RegExp("^"+g.source+"$(?!\\s)",h));(u=g.exec(r))&&!((c=u.index+u[0].length)>p&&(d.push(r.slice(p,u.index)),!s&&u.length>1&&u[0].replace(n,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(u[f]=void 0)}),u.length>1&&u.index<r.length&&a.apply(d,u.slice(1)),l=u[0].length,p=c,d.length>=v));)g.lastIndex===u.index&&g.lastIndex++;return p===r.length?!l&&g.test("")||d.push(""):d.push(r.slice(p)),d.length>v?d.slice(0,v):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(r,i){var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,r){"use strict";var n,i,o,a,s=r(35),u=r(2),c=r(19),l=r(50),f=r(0),d=r(4),h=r(10),p=r(41),v=r(42),g=r(60),y=r(89).set,m=r(90)(),b=r(91),E=r(118),S=r(119),_=u.TypeError,w=u.process,T=u.Promise,R="process"==l(w),A=function(){},x=i=b.f,L=!!function(){try{var t=T.resolve(1),e=(t.constructor={})[r(5)("species")]=function(t){t(A,A)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof e}catch(t){}}(),O=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var r=t._c;m(function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&P(t),t._h=1),!0===a?r=n:(c&&c.enter(),r=a(n),c&&c.exit()),r===e.promise?u(_("Promise-chain cycle")):(o=O(r))?o.call(r,s,u):s(r)):u(n)}catch(t){u(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){y.call(u,function(){var e,r,n,i=t._v,o=k(t);if(o&&(e=E(function(){R?w.emit("unhandledRejection",i,t):(r=u.onunhandledrejection)?r({promise:t,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=R||k(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},k=function(t){return 1!==t._h&&0===(t._a||t._c).length},P=function(t){y.call(u,function(){var e;R?w.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},F=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _("Promise can't be resolved itself");(e=O(t))?m(function(){var n={_w:r,_d:!1};try{e.call(t,c(F,n,1),c(D,n,1))}catch(t){D.call(n,t)}}):(r._v=t,r._s=1,C(r,!1))}catch(t){D.call({_w:r,_d:!1},t)}}};L||(T=function(t){p(this,T,"Promise","_h"),h(t),n.call(this);try{t(c(F,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(43)(T.prototype,{then:function(t,e){var r=x(g(this,T));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=R?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&C(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(F,t,1),this.reject=c(D,t,1)},b.f=x=function(t){return t===T||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!L,{Promise:T}),r(44)(T,"Promise"),r(40)("Promise"),a=r(22).Promise,f(f.S+f.F*!L,"Promise",{reject:function(t){var e=x(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!L),"Promise",{resolve:function(t){return S(s&&this===a?T:this,t)}}),f(f.S+f.F*!(L&&r(57)(function(t){T.all(t).catch(A)})),"Promise",{all:function(t){var e=this,r=x(e),n=r.resolve,i=r.reject,o=E(function(){var r=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;r.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=x(e),n=r.reject,i=E(function(){v(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(t,e,r){"use strict";var n=r(124),i=r(47);r(61)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(i(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(0),i=r(62),o=r(92),a=r(1),s=r(37),u=r(8),c=r(4),l=r(2).ArrayBuffer,f=r(60),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,v=d.prototype.slice,g=i.VIEW;n(n.G+n.W+n.F*(l!==d),{ArrayBuffer:d}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||c(t)&&g in t}}),n(n.P+n.U+n.F*r(3)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var r=a(this).byteLength,n=s(t,r),i=s(void 0===e?r:e,r),o=new(f(this,d))(u(i-n)),c=new h(this),l=new h(o),p=0;n<i;)l.setUint8(p++,c.getUint8(n++));return o}}),r(40)("ArrayBuffer")},function(t,e,r){var n=r(0);n(n.G+n.W+n.F*!r(62).ABV,{DataView:r(92).DataView})},function(t,e,r){r(28)("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},function(t,e,r){r(28)("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){r(28)("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},function(t,e,r){var n=r(0),i=r(10),o=r(1),a=(r(2).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(3)(function(){a(function(){})}),"Reflect",{apply:function(t,e,r){var n=i(t),u=o(r);return a?a(n,e,u):s.call(n,e,u)}})},function(t,e,r){var n=r(0),i=r(38),o=r(10),a=r(1),s=r(4),u=r(3),c=r(105),l=(r(2).Reflect||{}).construct,f=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),d=!u(function(){l(function(){})});n(n.S+n.F*(f||d),"Reflect",{construct:function(t,e){o(t),a(e);var r=arguments.length<3?t:o(arguments[2]);if(d&&!f)return l(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=r.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(t,h,e);return s(p)?p:h}})},function(t,e,r){var n=r(7),i=r(0),o=r(1),a=r(23);i(i.S+i.F*r(3)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){o(t),e=a(e,!0),o(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),i=r(17).f,o=r(1);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=i(o(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){"use strict";var n=r(0),i=r(1),o=function(t){this._t=i(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(80)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,r){var n=r(17),i=r(18),o=r(11),a=r(0),s=r(4),u=r(1);a(a.S,"Reflect",{get:function t(e,r){var a,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[r]:(a=n.f(e,r))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(e))?t(c,r,l):void 0}})},function(t,e,r){var n=r(17),i=r(0),o=r(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,r){var n=r(0),i=r(18),o=r(1);n(n.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(0),i=r(1),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(126)})},function(t,e,r){var n=r(0),i=r(1),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(7),i=r(17),o=r(18),a=r(11),s=r(0),u=r(33),c=r(1),l=r(4);s(s.S,"Reflect",{set:function t(e,r,s){var f,d,h=arguments.length<4?e:arguments[3],p=i.f(c(e),r);if(!p){if(l(d=o(e)))return t(d,r,s,h);p=u(0)}return a(p,"value")?!(!1===p.writable||!l(h)||((f=i.f(h,r)||u(0)).value=s,n.f(h,r,f),0)):void 0!==p.set&&(p.set.call(h,s),!0)}})},function(t,e,r){var n=r(0),i=r(72);i&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){"use strict";var n=r(0),i=r(53)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(31)("includes")},function(t,e,r){"use strict";var n=r(0),i=r(127),o=r(9),a=r(8),s=r(10),u=r(86);n(n.P,"Array",{flatMap:function(t){var e,r,n=o(this);return s(t),e=a(n.length),r=u(n,0),i(r,n,n,e,0,1,t,arguments[1]),r}}),r(31)("flatMap")},function(t,e,r){"use strict";var n=r(0),i=r(127),o=r(9),a=r(8),s=r(25),u=r(86);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),r=a(e.length),n=u(e,0);return i(n,e,e,r,0,void 0===t?1:s(t)),n}}),r(31)("flatten")},function(t,e,r){"use strict";var n=r(0),i=r(78)(!0);n(n.P,"String",{at:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(0),i=r(128),o=r(93);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){"use strict";var n=r(0),i=r(128),o=r(93);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";r(45)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,r){"use strict";r(45)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,r){"use strict";var n=r(0),i=r(24),o=r(8),a=r(56),s=r(58),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};r(80)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),r="flags"in u?String(t.flags):s.call(t),n=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(t.lastIndex),new c(n,e)}})},function(t,e,r){r(68)("asyncIterator")},function(t,e,r){r(68)("observable")},function(t,e,r){var n=r(0),i=r(126),o=r(16),a=r(17),s=r(84);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=o(t),u=a.f,c=i(n),l={},f=0;c.length>f;)void 0!==(r=u(n,e=c[f++]))&&s(l,e,r);return l}})},function(t,e,r){var n=r(0),i=r(129)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){var n=r(0),i=r(129)(!0);n(n.S,"Object",{entries:function(t){return i(t)}})},function(t,e,r){"use strict";var n=r(0),i=r(9),o=r(10),a=r(7);r(6)&&n(n.P+r(63),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(0),i=r(9),o=r(10),a=r(7);r(6)&&n(n.P+r(63),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,r){"use strict";var n=r(0),i=r(9),o=r(23),a=r(18),s=r(17).f;r(6)&&n(n.P+r(63),"Object",{__lookupGetter__:function(t){var e,r=i(this),n=o(t,!0);do{if(e=s(r,n))return e.get}while(r=a(r))}})},function(t,e,r){"use strict";var n=r(0),i=r(9),o=r(23),a=r(18),s=r(17).f;r(6)&&n(n.P+r(63),"Object",{__lookupSetter__:function(t){var e,r=i(this),n=o(t,!0);do{if(e=s(r,n))return e.set}while(r=a(r))}})},function(t,e,r){var n=r(0);n(n.P+n.R,"Map",{toJSON:r(130)("Map")})},function(t,e,r){var n=r(0);n(n.P+n.R,"Set",{toJSON:r(130)("Set")})},function(t,e,r){r(64)("Map")},function(t,e,r){r(64)("Set")},function(t,e,r){r(64)("WeakMap")},function(t,e,r){r(64)("WeakSet")},function(t,e,r){r(65)("Map")},function(t,e,r){r(65)("Set")},function(t,e,r){r(65)("WeakMap")},function(t,e,r){r(65)("WeakSet")},function(t,e,r){var n=r(0);n(n.G,{global:r(2)})},function(t,e,r){var n=r(0);n(n.S,"System",{global:r(2)})},function(t,e,r){var n=r(0),i=r(20);n(n.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{clamp:function(t,e,r){return Math.min(r,Math.max(e,t))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,r){var n=r(0),i=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*i}})},function(t,e,r){var n=r(0),i=r(132),o=r(112);n(n.S,"Math",{fscale:function(t,e,r,n,a){return o(i(t,e,r,n,a))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{iaddh:function(t,e,r,n){var i=t>>>0,o=r>>>0;return(e>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,r){var n=r(0);n(n.S,"Math",{isubh:function(t,e,r,n){var i=t>>>0,o=r>>>0;return(e>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,r){var n=r(0);n(n.S,"Math",{imulh:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n,a=r>>16,s=n>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,r){var n=r(0),i=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*i}})},function(t,e,r){var n=r(0);n(n.S,"Math",{scale:r(132)})},function(t,e,r){var n=r(0);n(n.S,"Math",{umulh:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n,a=r>>>16,s=n>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,r){"use strict";var n=r(0),i=r(22),o=r(2),a=r(60),s=r(119);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then(function(){return r})}:t,r?function(r){return s(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var n=r(0),i=r(91),o=r(118);n(n.S,"Promise",{try:function(t){var e=i.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},function(t,e,r){var n=r(29),i=r(1),o=n.key,a=n.set;n.exp({defineMetadata:function(t,e,r,n){a(t,e,i(r),o(n))}})},function(t,e,r){var n=r(29),i=r(1),o=n.key,a=n.map,s=n.store;n.exp({deleteMetadata:function(t,e){var r=arguments.length<3?void 0:o(arguments[2]),n=a(i(e),r,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var u=s.get(e);return u.delete(r),!!u.size||s.delete(e)}})},function(t,e,r){var n=r(29),i=r(1),o=r(18),a=n.has,s=n.get,u=n.key,c=function(t,e,r){if(a(t,e,r))return s(t,e,r);var n=o(e);return null!==n?c(t,n,r):void 0};n.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,r){var n=r(122),i=r(131),o=r(29),a=r(1),s=r(18),u=o.keys,c=o.key,l=function(t,e){var r=u(t,e),o=s(t);if(null===o)return r;var a=l(o,e);return a.length?r.length?i(new n(r.concat(a))):a:r};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,r){var n=r(29),i=r(1),o=n.get,a=n.key;n.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,r){var n=r(29),i=r(1),o=n.keys,a=n.key;n.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,r){var n=r(29),i=r(1),o=r(18),a=n.has,s=n.key,u=function(t,e,r){if(a(t,e,r))return!0;var n=o(e);return null!==n&&u(t,n,r)};n.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,r){var n=r(29),i=r(1),o=n.has,a=n.key;n.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,r){var n=r(29),i=r(1),o=r(10),a=n.key,s=n.set;n.exp({metadata:function(t,e){return function(r,n){s(t,e,(void 0!==n?i:o)(r),a(n))}}})},function(t,e,r){var n=r(0),i=r(90)(),o=r(2).process,a="process"==r(20)(o);n(n.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(22),a=r(90)(),s=r(5)("observable"),u=r(10),c=r(1),l=r(41),f=r(43),d=r(12),h=r(42),p=h.RETURN,v=function(t){return null==t?void 0:u(t)},g=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},m=function(t){y(t)||(t._o=void 0,g(t))},b=function(t,e){c(t),this._c=void 0,this._o=t,t=new E(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(e){return void t.error(e)}y(this)&&g(this)};b.prototype=f({},{unsubscribe:function(){m(this)}});var E=function(t){this._s=t};E.prototype=f({},{next:function(t){var e=this._s;if(!y(e)){var r=e._o;try{var n=v(r.next);if(n)return n.call(r,t)}catch(t){try{m(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var r=e._o;e._o=void 0;try{var n=v(r.error);if(!n)throw t;t=n.call(r,t)}catch(t){try{g(e)}finally{throw t}}return g(e),t},complete:function(t){var e=this._s;if(!y(e)){var r=e._o;e._o=void 0;try{var n=v(r.complete);t=n?n.call(r,t):void 0}catch(t){try{g(e)}finally{throw t}}return g(e),t}}});var S=function(t){l(this,S,"Observable","_f")._f=u(t)};f(S.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(r,n){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),i.unsubscribe()}},error:n,complete:r})})}}),f(S,{from:function(t){var e="function"==typeof this?this:S,r=v(c(t)[s]);if(r){var n=c(r.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var r=!1;return a(function(){if(!r){try{if(h(t,!1,function(t){if(e.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void e.error(t)}e.complete()}}),function(){r=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:S)(function(t){var e=!1;return a(function(){if(!e){for(var n=0;n<r.length;++n)if(t.next(r[n]),e)return;t.complete()}}),function(){e=!0}})}}),d(S.prototype,s,function(){return this}),n(n.G,{Observable:S}),r(40)("Observable")},function(t,e,r){var n=r(2),i=r(0),o=r(93),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,r){var n=arguments.length>2,i=!!n&&a.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,r)}};i(i.G+i.B+i.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(t,e,r){var n=r(0),i=r(89);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){for(var n=r(88),i=r(36),o=r(13),a=r(2),s=r(12),u=r(46),c=r(5),l=c("iterator"),f=c("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var g,y=p[v],m=h[y],b=a[y],E=b&&b.prototype;if(E&&(E[l]||s(E,l,d),E[f]||s(E,f,y),u[y]=d,m))for(g in n)E[g]||o(E,g,n[g],!0)}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=E;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={},g={};g[a]=function(){return this};var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==n&&i.call(m,a)&&(g=m);var b=T.prototype=_.prototype=Object.create(g);w.prototype=b.constructor=T,T.constructor=w,T[u]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},R(A.prototype),A.prototype[s]=function(){return this},l.AsyncIterator=A,l.async=function(t,e,r,n){var i=new A(E(t,e,r,n));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},R(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function E(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new C(n||[]);return o._invoke=function(t,e,r){var n=f;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=S(t,e,r);if("normal"===u.type){if(n=r.done?p:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function S(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function _(){}function w(){}function T(){}function R(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(t){function r(e,n,o,a){var s=S(t[e],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){r("next",t,o,a)},function(t){r("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}var n;"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(t,e){function i(){return new Promise(function(n,i){r(t,e,n,i)})}return n=n?n.then(i,i):i()}}function x(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,x(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=S(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:r,done:!0}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this)},function(t,e,r){r(350),t.exports=r(22).RegExp.escape},function(t,e,r){var n=r(0),i=r(351)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var r=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,r)}}},function(t,e,r){t.exports=r(353)},function(t,e,r){"use strict";var n=r(15),i=r(133),o=r(355),a=r(95);function s(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var u=s(a);u.Axios=o,u.create=function(t){return s(n.merge(a,t))},u.Cancel=r(144),u.CancelToken=r(380),u.isCancel=r(143),u.all=function(t){return Promise.all(t)},u.spread=r(381),t.exports=u,t.exports.default=u},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";var n=r(95),i=r(15),o=r(375),a=r(376);function s(t){this.defaults=t,this.interceptors={request:new o,response:new o}}s.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},i.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,r){return this.request(i.merge(r||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,r,n){return this.request(i.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=s},function(t,e,r){"use strict";var n=r(15);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},function(t,e,r){"use strict";var n=r(15),i=r(134),o=r(136),a=r(358),s=r(359),u=r(96),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(360);t.exports=function(t){return new Promise(function(e,l){var f=t.data,d=t.headers;n.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(t.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var g=t.auth.username||"",y=t.auth.password||"";d.Authorization="Basic "+c(g+":"+y)}if(h.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:r,config:t,request:h};i(e,l,n),h=null}},h.onerror=function(){l(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var m=r(361),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;b&&(d[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&n.forEach(d,function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),l(t),h=null)}),void 0===f&&(f=null),h.send(f)})}},function(t,e,r){"use strict";var n=r(15),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,a={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}}),a):a}},function(t,e,r){"use strict";var n=r(15);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";function n(){this.message="String contains an invalid character"}n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,r,i=String(t),o="",a=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|a)||(s="=",a%1);o+=s.charAt(63&e>>8-a%1*8)){if((r=i.charCodeAt(a+=.75))>255)throw new n;e=e<<8|r}return o}},function(t,e,r){"use strict";var n=r(15);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(15),i=r(134),o=r(136),a=r(137),s=r(138),u=r(139).http,c=r(139).https,l=r(140),f=r(373),d=r(374),h=r(96),p=r(135);t.exports=function(t){return new Promise(function(e,r){var v,g=t.data,y=t.headers;if(y["User-Agent"]||y["user-agent"]||(y["User-Agent"]="axios/"+d.version),g&&!n.isStream(g)){if(Buffer.isBuffer(g));else if(n.isArrayBuffer(g))g=new Buffer(new Uint8Array(g));else{if(!n.isString(g))return r(h("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));g=new Buffer(g,"utf-8")}y["Content-Length"]=g.length}var m=void 0;t.auth&&(m=(t.auth.username||"")+":"+(t.auth.password||""));var b=l.parse(t.url),E=b.protocol||"http:";if(!m&&b.auth){var S=b.auth.split(":");m=(S[0]||"")+":"+(S[1]||"")}m&&delete y.Authorization;var _="https:"===E,w=_?t.httpsAgent:t.httpAgent,T={path:o(b.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method,headers:y,agent:w,auth:m};t.socketPath?T.socketPath=t.socketPath:(T.hostname=b.hostname,T.port=b.port);var R,A=t.proxy;if(!A&&!1!==A){var x=E.slice(0,-1)+"_proxy",L=process.env[x]||process.env[x.toUpperCase()];if(L){var O=l.parse(L);if(A={host:O.hostname,port:O.port},O.auth){var C=O.auth.split(":");A.auth={username:C[0],password:C[1]}}}}if(A&&(T.hostname=A.host,T.host=A.host,T.headers.host=b.hostname+(b.port?":"+b.port:""),T.port=A.port,T.path=E+"//"+b.hostname+(b.port?":"+b.port:"")+T.path,A.auth)){var I=new Buffer(A.auth.username+":"+A.auth.password,"utf8").toString("base64");T.headers["Proxy-Authorization"]="Basic "+I}t.transport?R=t.transport:0===t.maxRedirects?R=_?s:a:(t.maxRedirects&&(T.maxRedirects=t.maxRedirects),R=_?c:u),t.maxContentLength&&t.maxContentLength>-1&&(T.maxBodyLength=t.maxContentLength);var k=R.request(T,function(n){if(!k.aborted){clearTimeout(v),v=null;var o=n;switch(n.headers["content-encoding"]){case"gzip":case"compress":case"deflate":o=o.pipe(f.createUnzip()),delete n.headers["content-encoding"]}var a=n.req||k,s={status:n.statusCode,statusText:n.statusMessage,headers:n.headers,config:t,request:a};if("stream"===t.responseType)s.data=o,i(e,r,s);else{var u=[];o.on("data",function(e){u.push(e),t.maxContentLength>-1&&Buffer.concat(u).length>t.maxContentLength&&r(h("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,a))}),o.on("error",function(e){k.aborted||r(p(e,t,null,a))}),o.on("end",function(){var n=Buffer.concat(u);"arraybuffer"!==t.responseType&&(n=n.toString("utf8")),s.data=n,i(e,r,s)})}}});k.on("error",function(e){k.aborted||r(p(e,t,null,k))}),t.timeout&&!v&&(v=setTimeout(function(){k.abort(),r(h("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",k))},t.timeout)),t.cancelToken&&t.cancelToken.promise.then(function(t){k.aborted||(k.abort(),r(t))}),n.isStream(g)?g.pipe(k):k.end(g)})}},function(t,e){t.exports=require("assert")},function(t,e,r){"undefined"==typeof process||"renderer"===process.type?t.exports=r(365):t.exports=r(367)},function(t,e,r){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=r(142)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),r){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,n)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(n())},function(t,e){var r=1e3,n=6e4,i=36e5,o=24*i;function a(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}t.exports=function(t,e){e=e||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===s&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,i,"hour")||a(t,n,"minute")||a(t,r,"second")||t+" ms"}(t):function(t){return t>=o?Math.round(t/o)+"d":t>=i?Math.round(t/i)+"h":t>=n?Math.round(t/n)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){var n=r(368),i=r(369);(e=t.exports=r(142)).init=function(t){t.inspectOpts={};for(var r=Object.keys(e.inspectOpts),n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function(t){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+r+" [0m";t[0]=o+t[0].split("\n").join("\n"+o),t.push(i+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=a,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var o=r(370);o&&o.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function a(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter(function(t){return/^debug_/i.test(t)}).reduce(function(t,e){var r=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),t[r]=n,t},{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(a())},function(t,e){t.exports=require("tty")},function(t,e){t.exports=require("util")},function(t,e,r){"use strict";var n,i=r(371),o=r(372),a=process.env;function s(t){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function(t){if(!1===n)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(t&&!t.isTTY&&!0!==n)return a.VSCODE_PID?1:0;var e=n?1:0;if("win32"===process.platform){var r=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(t){return t in a})||"codeship"===a.CI_NAME?1:e;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){var s=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)?1:"COLORTERM"in a?1:(a.TERM,e)}(t))}o("no-color")||o("no-colors")||o("color=false")?n=!1:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(n=!0),"FORCE_COLOR"in a&&(n=0===a.FORCE_COLOR.length||0!==parseInt(a.FORCE_COLOR,10)),t.exports={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}},function(t,e){t.exports=require("os")},function(e,r){e.exports=t},function(t,e){t.exports=require("zlib")},function(t){t.exports={_from:"axios",_id:"axios@0.18.0",_inBundle:!1,_integrity:"sha1-MtU+SFHv3AoRmTts0AB4nXDAUQI=",_location:"/axios",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"axios",name:"axios",escapedName:"axios",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/","/apisauce"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.18.0.tgz",_shasum:"32d53e4851efdc0a11993b6cd000789d70c05102",_spec:"axios",_where:"/Users/patrickchisholm/Documents/work/Imposium-JS-SDK",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",typescript:"^2.0.3","url-search-params":"^0.6.1",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},homepage:"https://github.com/axios/axios",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test && bundlesize",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",version:"0.18.0"}},function(t,e,r){"use strict";var n=r(15);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,r){"use strict";var n=r(15),i=r(377),o=r(143),a=r(95),s=r(378),u=r(379);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,r){"use strict";var n=r(15);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(144);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new n(t),e(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";var n=r(383);function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(n(t.split(".")[r]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},function(t,e,r){var n=r(384);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(n(e).replace(/(.)/g,function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(t){return n(e)}}},function(t,e){function r(t){this.message=t}r.prototype=new Error,r.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,a=0,s="";i=e.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return s}},function(t,e,r){t.exports=r(386).default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNetworkError=o,e.isRetryableError=u,e.isSafeRequestError=c,e.isIdempotentRequestError=l,e.isNetworkOrIdempotentRequestError=f,e.exponentialDelay=h,e.default=v;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(387)),i="axios-retry";function o(t){return!t.response&&Boolean(t.code)&&"ECONNABORTED"!==t.code&&(0,n.default)(t)}var a=["get","head","options"],s=a.concat(["put","delete"]);function u(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function c(t){return!!t.config&&u(t)&&-1!==a.indexOf(t.config.method)}function l(t){return!!t.config&&u(t)&&-1!==s.indexOf(t.config.method)}function f(t){return o(t)||l(t)}function d(){return 0}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=100*Math.pow(2,t);return e+.2*e*Math.random()}function p(t){var e=t[i]||{};return e.retryCount=e.retryCount||0,t[i]=e,e}function v(t,e){t.interceptors.request.use(function(t){return p(t).lastRequestTime=Date.now(),t}),t.interceptors.response.use(null,function(r){var n=r.config;if(!n)return Promise.reject(r);var o=function(t,e){return Object.assign({},e,t[i])}(n,e),a=o.retries,s=void 0===a?3:a,u=o.retryCondition,c=void 0===u?f:u,l=o.retryDelay,h=void 0===l?d:l,v=o.shouldResetTimeout,g=void 0!==v&&v,y=p(n);if(c(r)&&y.retryCount<s){y.retryCount+=1;var m=h(y.retryCount,r);if(function(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}(t,n),!g&&n.timeout&&y.lastRequestTime){var b=Date.now()-y.lastRequestTime;n.timeout=Math.max(n.timeout-b-m,1)}return n.transformRequest=[function(t){return t}],new Promise(function(e){return setTimeout(function(){return e(t(n))},m)})}return Promise.reject(r)})}v.isNetworkError=o,v.isSafeRequestError=c,v.isIdempotentRequestError=l,v.isNetworkOrIdempotentRequestError=f,v.exponentialDelay=h,v.isRetryableError=u},function(t,e,r){"use strict";var n=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE"],i=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];t.exports=function(t){return!t||!t.code||-1!==n.indexOf(t.code)||-1===i.indexOf(t.code)}},function(t,r){t.exports=e},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(390),i=r(97),o=r(51),a=r(32).messageConsumer,s=function(){function t(e,r,s,u,c){var l=this;this.stompDelegates={start:function(){return l.startConsuming()},route:function(t){return l.routeMessageData(t)},error:function(t){return l.stompError(t)}},this.env="",this.storyId="",this.experienceId=null,this.clientDelegates=null,this.stomp=null,this.retried=a.minReconnects,this.kill=function(){var t=l.stomp;return new Promise(function(e){t.disconnectAsync().then(function(){e()})})},this.establishConnection=function(){var t=l,e=t.experienceId,r=t.env,i=t.stompDelegates;l.stomp=new n.default(e,i,r)},this.startConsuming=function(){var t=l,e=t.experienceId,r=t.clientDelegates.start;r&&r(e)},this.routeMessageData=function(e){var r=t.EVENT_NAMES,n=r.scene,a=r.message,s=r.complete,u=l,c=u.stomp,f=u.storyId,d=u.experienceId,h=u.clientDelegates.ERROR;try{var p=JSON.parse(e.body);switch(p.event){case s:c.disconnectAsync().then(function(){});break;case a:l.emitMessageData(p);break;case n:l.emitSceneData(p)}}catch(t){var v=new o.NetworkError("messageParseFailed",d,t);i.default.trapError(v,f,h)}},this.emitMessageData=function(t){var e=l,r=e.storyId,n=e.clientDelegates,s=n.STATUS_UPDATE,u=n.ERROR,c=t.status,f=t.id;try{if(c===a.errorOverTcp)throw new o.NetworkError("errorOverTcp",f,null);s&&s(t)}catch(t){i.default.trapError(t,r,u)}},this.emitSceneData=function(t){var e=l,r=e.player,n=e.storyId,a=e.clientDelegates,s=a.GOT_EXPERIENCE,u=a.ERROR,c=t.id;if("rejected"===t.moderation_status){var f=new o.ModerationError("rejection",c);i.default.trapError(f,n,u)}else r&&r.experienceGenerated(t),s&&s(t)},this.stompError=function(e){var r=l,n=r.retried,a=r.storyId,s=r.experienceId,u=r.stomp,c=r.clientDelegates.ERROR;if(e.wasClean,!e.wasClean)if(++l.retried,n<t.MAX_RETRIES)i.default.logWarning("network","tcpFailure"),u.disconnectAsync().then(function(){l.establishConnection()});else{var f=new o.NetworkError("tcpFailure",s,e);i.default.trapError(f,a,c)}},this.env=e,this.storyId=r,this.experienceId=s,this.clientDelegates=u,c&&(this.player=c),this.establishConnection()}return t.MAX_RETRIES=a.maxReconnects,t.EVENT_NAMES={scene:"gotScene",message:"gotMessage",complete:"actComplete"},t}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(391),i=r(66),o=r(392),a=r(32).stomp,s=function(){function t(e,r,s){var u=this;this.endpoint="",this.socket=null,this.client=null,this.subscription=null,this.disconnectAsync=function(){var t=u,e=t.client,r=t.client.connected,n=t.subscription;return new Promise(function(t){r?(n.unsubscribe(),e.disconnect(function(){t()})):t()})},this.init=function(){var e=t.username,r=t.password,a=u,s=a.endpoint,c=a.delegates.error;u.socket=i.isNode()?new o(s):new WebSocket(s),u.client=n.over(u.socket),u.client.debug=function(){},u.client.connect(e,r,function(){return u.establishSubscription()},c)},this.establishSubscription=function(){var e=t.exchange,r=u,n=r.experienceId,i=r.client,o=r.delegates,a=o.start,s=o.route;u.subscription=i.subscribe(""+e+n,s),a()},this.experienceId=e,this.delegates=r,this.endpoint=a[s],this.init()}return t.exchange=a.exchange,t.username=a.username,t.password=a.password,t}();e.default=s},function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unicodeStringToTypedArray=function(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}),r=Array.prototype.map.call(e,function(t){return t.charCodeAt(0)});return new Uint8Array(r)},e.typedArrayToUnicodeString=function(t){var e=String.fromCharCode.apply(String,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t)).replace(/(.)/g,function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r});return decodeURIComponent(e)},e.sizeOfUTF8=function(t){return t?encodeURIComponent(t).match(/%..|./g).length:0},e.createId=function(){var t=(new Date).getTime(),e=Math.floor(1e3*Math.random());return t+"-"+e},e.VERSIONS={V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"},supportedProtocols:function(){return["v10.stomp","v11.stomp","v12.stomp"]}},e.BYTES={LF:"\n",NULL:"\0"},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),a=r(0),s=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=r.binary,i=void 0!==n&&n,o=r.heartbeat,a=void 0===o?{outgoing:1e4,incoming:1e4}:o,s=r.debug,u=void 0===s||s;this.ws=e,this.ws.binaryType="arraybuffer",this.isBinary=!!i,this.hasDebug=!!u,this.connected=!1,this.heartbeat=a||{outgoing:0,incoming:0},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return i(t,[{key:"debug",value:function(){var t;this.hasDebug&&(t=console).log.apply(t,arguments)}},{key:"connect",value:function(){var t=this,e=this._parseConnect.apply(this,arguments),r=n(e,3),i=r[0],s=r[1],u=r[2];this.connectCallback=s,this.debug("Opening Web Socket..."),this.ws.onmessage=function(e){var r=e.data;if(e.data instanceof ArrayBuffer&&(r=(0,a.typedArrayToUnicodeString)(new Uint8Array(e.data))),t.serverActivity=Date.now(),r!==a.BYTES.LF){t.debug("<<< "+r);var n=o.default.unmarshall(t.partialData+r);t.partialData=n.partial,n.frames.forEach(function(e){switch(e.command){case"CONNECTED":t.debug("connected to server "+e.headers.server),t.connected=!0,t.version=e.headers.version,t._setupHeartbeat(e.headers),s&&s(e);break;case"MESSAGE":var r=e.headers.subscription,n=t.subscriptions[r]||t.onreceive;if(n){var i=t.version===a.VERSIONS.V1_2&&e.headers.ack||e.headers["message-id"];e.ack=t.ack.bind(t,i,r),e.nack=t.nack.bind(t,i,r),n(e)}else t.debug("Unhandled received MESSAGE: "+e);break;case"RECEIPT":t.onreceipt&&t.onreceipt(e);break;case"ERROR":u&&u(e);break;default:t.debug("Unhandled frame: "+e)}})}else t.debug("<<< PONG")},this.ws.onclose=function(e){t.debug("Whoops! Lost connection to "+t.ws.url+":",{event:e}),t._cleanUp(),u&&u(e)},this.ws.onopen=function(){t.debug("Web Socket Opened..."),i["accept-version"]=a.VERSIONS.supportedVersions(),i["heart-beat"]||(i["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(",")),t._transmit("CONNECT",i)}}},{key:"disconnect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),t&&t()}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},r);n.destination=t,this._transmit("SEND",n,e)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tx-"+(0,a.createId)();return this._transmit("BEGIN",{transaction:t}),{id:t,commit:this.commit.bind(this,t),abort:this.abort.bind(this,t)}}},{key:"commit",value:function(t){this._transmit("COMMIT",{transaction:t})}},{key:"abort",value:function(t){this._transmit("ABORT",{transaction:t})}},{key:"ack",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},r);n[this.version===a.VERSIONS.V1_2?"id":"message-id"]=t,n.subscription=e,this._transmit("ACK",n)}},{key:"nack",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},r);n[this.version===a.VERSIONS.V1_2?"id":"message-id"]=t,n.subscription=e,this._transmit("NACK",n)}},{key:"subscribe",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({},r);return n.id||(n.id="sub-"+(0,a.createId)()),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),{id:n.id,unsubscribe:this.unsubscribe.bind(this,n.id)}}},{key:"unsubscribe",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},e);delete this.subscriptions[t],r.id=t,this._transmit("UNSUBSCRIBE",r)}},{key:"_cleanUp",value:function(){this.connected=!1,clearInterval(this.pinger),clearInterval(this.ponger)}},{key:"_transmit",value:function(t,e,r){var n=o.default.marshall(t,e,r);this.debug(">>> "+n,{frame:{command:t,headers:e,body:r}}),this._wsSend(n)}},{key:"_wsSend",value:function(t){for(this.isBinary&&(t=(0,a.unicodeStringToTypedArray)(t)),this.debug(">>> length "+t.length);;){if(!(t.length>this.maxWebSocketFrameSize))return this.ws.send(t);this.ws.send(t.slice(0,this.maxWebSocketFrameSize)),t=t.slice(this.maxWebSocketFrameSize),this.debug("remaining = "+t.length)}}},{key:"_setupHeartbeat",value:function(t){var e=this;if(this.version===a.VERSIONS.V1_1||this.version===a.VERSIONS.V1_2){var r=(t["heart-beat"]||"0,0").split(",").map(function(t){return parseInt(t,10)}),i=n(r,2),o=i[0],s=i[1];if(0!==this.heartbeat.outgoing&&0!==s){var u=Math.max(this.heartbeat.outgoing,s);this.debug("send PING every "+u+"ms"),this.pinger=setInterval(function(){e._wsSend(a.BYTES.LF),e.debug(">>> PING")},u)}if(0!==this.heartbeat.incoming&&0!==o){var c=Math.max(this.heartbeat.incoming,o);this.debug("check PONG every "+c+"ms"),this.ponger=setInterval(function(){var t=Date.now()-e.serverActivity;t>2*c&&(e.debug("did not receive server activity for the last "+t+"ms"),e.ws.close())},c)}}}},{key:"_parseConnect",value:function(){for(var t={},e=void 0,r=void 0,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];switch(i.length){case 2:t=i[0],e=i[1];break;case 3:i[1]instanceof Function?(t=i[0],e=i[1],r=i[2]):(t.login=i[0],t.passcode=i[1],e=i[2]);break;case 4:t.login=i[0],t.passcode=i[1],e=i[2],r=i[3];break;default:t.login=i[0],t.passcode=i[1],e=i[2],r=i[3],t.host=i[4]}return[t,e,r]}}]),t}();e.default=s,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0),o=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.command=e,this.headers=r,this.body=n}return n(t,[{key:"toString",value:function(){var t=this,e=[this.command],r=!1===this.headers["content-length"];return r&&delete this.headers["content-length"],Object.keys(this.headers).forEach(function(r){var n=t.headers[r];e.push(r+":"+n)}),this.body&&!r&&e.push("content-length:"+(0,i.sizeOfUTF8)(this.body)),e.push(i.BYTES.LF+this.body),e.join(i.BYTES.LF)}}],[{key:"unmarshallSingle",value:function(e){var r=e.search(new RegExp(i.BYTES.LF+i.BYTES.LF)),n=e.substring(0,r).split(i.BYTES.LF),o=n.shift(),a={},s="",u=r+2,c=!0,l=!1,f=void 0;try{for(var d,h=n.reverse()[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value,v=p.indexOf(":");a[(0,i.trim)(p.substring(0,v))]=(0,i.trim)(p.substring(v+1))}}catch(t){l=!0,f=t}finally{try{!c&&h.return&&h.return()}finally{if(l)throw f}}if(a["content-length"]){var g=parseInt(a["content-length"],10);s=(""+e).substring(u,u+g)}else for(var y=null,m=u;m<e.length&&(y=e.charAt(m))!==i.BYTES.NULL;m++)s+=y;return new t(o,a,s)}},{key:"unmarshall",value:function(e){var r=e.split(new RegExp(i.BYTES.NULL+i.BYTES.LF+"*")),n=r.slice(0,-1),o=r.slice(-1)[0],a={frames:n.map(function(e){return t.unmarshallSingle(e)}),partial:""};return o===i.BYTES.LF||-1!==o.search(RegExp(i.BYTES.NULL+i.BYTES.LF+"*$"))?a.frames.push(t.unmarshallSingle(o)):a.partial=o,a}},{key:"marshall",value:function(e,r,n){return new t(e,r,n).toString()+i.BYTES.NULL}}]),t}();e.default=o,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),i=r(0),o={VERSIONS:i.VERSIONS,client:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new WebSocket(t,e.protocols||i.VERSIONS.supportedProtocols());return new n.default(r,e)},over:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return new(Function.prototype.bind.apply(n.default,[null].concat(e)))}};e.default=o,t.exports=e.default}])},function(t,e){t.exports=r},function(t){t.exports={environment:{node:"Sorry, this feature is incompatible with NodeJS"},moderation:{rejection:"This experience was rejected."},clientConfiguration:{invalidEventName:"Invalid client event name.",invalidCallbackType:"The callback reference set for this client event is not of type function.",eventNotConfigured:"You cannot invoke this client event without a callback set."},playerConfiguration:{noClient:"You must provide an Imposium client reference to the player.",invalidPlayerRef:"No reference to an HTML5 video element was detected.",invalidEventName:"Invalid player event name.",invalidCallbackType:"The callback reference set for this player event is not of type function.",eventNotConfigured:"You cannot invoke this player event without a callback set.",badQualityOverride:"The quality specified does not exist for this experience."},network:{httpFailure:"Unable to process request to the Imposium API.",tcpFailure:"Unable to reach Imposium while processing this experience.",errorOverTcp:"Something went wrong while processing this experience.",messageParseFailure:"Message data from Imposium was malformed."},uncaught:{generic:"Something unexpected went wrong."}}},function(t){t.exports={client:{nodeAnalytics:"Sorry, analytics are not currently available in NodeJS."},network:{tcpFailure:"Unable to reach Imposium while processing this experience, retrying..."},playerFailure:{seekNotReady:"Seek can't be called until the video metadata has loaded, please try again shortly.",invalidSeekTime:"Could not seek to time outside of current video duration.",invalidVolume:"Could not set volume outside of range (double) 0.0 - 1.0."}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var r=t.call(this,e)||this;return r.experienceGenerated=function(t){var e=t.id;r.setExperienceId(e)},r}return n(e,t),e}(r(147).default);e.default=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=r(94),a=r(147),s=r(97),u=r(66),c=r(51),l=r(32).videoPlayer,f=null;u.isNode()||(f=r(397));var d=function(t){function e(r,n,a){void 0===a&&(a=l.defaultConfig);var d=t.call(this,r)||this;d.events={PLAY:"play",PAUSE:"pause",COMPLETE:"ended",ERROR:"error",SEEK:"seeked",TIME:"timeupdate",VOLUME:"volumechange",MUTE:"muted",CONTROLS:"controlsset"},d.eventDelegateRefs={play:{callback:null,native:!0},pause:{callback:null,native:!0},ended:{callback:null,native:!0},error:{callback:null,native:!0},seeked:{callback:null,native:!0},timeupdate:{callback:null,native:!0},volumechanged:{callback:null,native:!0},muted:{callback:null,native:!1},controlsset:{callback:null,native:!1}},d.hlsSupport="",d.hlsPlayer=null,d.experienceCache=[],d.clientRef=null,d.imposiumPlayerConfig=null,d.init=function(t){var e=l.defaultConfig;for(var r in u.prepConfig(t,e),d.imposiumPlayerConfig=i({},e,t),d.imposiumPlayerConfig)d.imposiumPlayerConfig[r]&&(d.node[r]=d.imposiumPlayerConfig[r])},d.experienceGenerated=function(t){d.experienceCache;var e=d.imposiumPlayerConfig.qualityOverride,r=t.id,n=t.output,i=n.videos,o=n.images,a="";d.setExperienceId(r),o&&o.hasOwnProperty("poster")&&(a=o.poster),e?d.doQualityOverride(i,a):d.doQualityAssessment(i,a)},d.on=function(t,e){var r=d,n=r.storyId,i=r.eventDelegateRefs;try{if(!u.isFunc(e))throw new c.PlayerConfigurationError("invalidCallbackType",t);if(!u.keyExists(d.events,t))throw new c.PlayerConfigurationError("invalidEventName",t);var o=i[t];o.callback=e,o.native&&d.node.addEventListener(t,o.callback)}catch(t){s.default.trapError(t,n)}},d.off=function(t){var e=d,r=e.storyId,n=e.eventDelegateRefs;try{if(!u.keyExists(d.events,t))throw new c.PlayerConfigurationError("invalidEventName",t);var i=n[t];i.native&&d.node.removeEventListener(t,i.callback),i.callback=null}catch(t){s.default.trapError(t,r)}},d.play=function(){d.node.play()},d.pause=function(){d.node.pause()},d.getPlaybackState=function(){return d.node.paused?"paused":"playing"},d.getPosition=function(){return d.node.currentTime},d.getDuration=function(){return d.node.duration},d.seek=function(t,e){void 0===e&&(e=-1);var r=d.node.duration;isNaN(r)?s.default.logWarning("playerFailure","seekNotReady"):(t=Math.floor(t),u.inRangeNumeric(t,0,r)?d.node.currentTime=t:s.default.logWarning("playerFailure","invalidSeekTime"))},d.getMute=function(){return d.node.muted},d.setMute=function(t){var e=d.eventDelegateRefs.muted.callback;d.node.muted=t,e&&e()},d.getVolume=function(){return d.node.volume},d.setVolume=function(t){var e=l.volumeMin,r=l.volumeMax;t=Math.round(10*t)/10,u.inRangeNumeric(t,e,r)?d.node.volume=t:s.default.logWarning("playerFailure","invalidVolume")},d.getControls=function(){return d.node.controls},d.setControls=function(t){var e=d.eventDelegateRefs.controlsset;d.node.controls=t,e&&e.callback()},d.replay=function(){d.pauseIfPlaying(),d.node.currentTime=0,d.node.play()},d.remove=function(){var t=d.eventDelegateRefs,e=l.defaultConfig;d.pauseIfPlaying();for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];d.off(t[o])}d.imposiumPlayerConfig=i({},e),d.node=null},d.setupHls=function(){var t=e.hlsSupportLevels,r=t.NATIVE,n=t.HLSJS;d.node.canPlayType(e.STREAM_TYPE)?d.hlsSupport=r:f.isSupported()&&(d.hlsSupport=n)},d.doQualityOverride=function(t,e){var r=d.storyId,n=d.imposiumPlayerConfig.qualityOverride;try{if(!t.hasOwnProperty(n))throw new c.PlayerConfigurationError("badQualityOverride",null);d.setPlayerData(t[n].url,!0,e)}catch(t){s.default.trapError(t,r)}},d.doQualityAssessment=function(t,r){var n=d.hlsSupport,i=e.compressionLevels.STREAM;if(t.hasOwnProperty(i)&&n)d.setPlayerData(t[i].url,!0,r);else{var o=Object.keys(t);1===o.length?d.setPlayerData(t[o[0]].url,!1,r):d.checkBandwidth(t).then(function(e){d.setPlayerData(t[e].url,!1,r)}).catch(function(e){d.setPlayerData(t[e].url,!1,r)})}},d.checkBandwidth=function(t){e.bandwidthRatings,e.compressionLevels;for(var r=e.BANDWIDTH_SAMPLES,n=[],i=0;i<r;i++)n.push(o.default.checkBandwidth());return new Promise(function(e,r){Promise.all(n).then(function(r){var n=u.calculateAverageMbps(r),i={};Object.keys(t).forEach(function(e){var r=t[e],n=r.width,o=r.height;i[n*o/1e5]=e});var o=Object.keys(i).map(function(t){return parseFloat(t)}).reduce(function(t,e){return Math.abs(t-n)<Math.abs(e-n)?t:e});e(i[o])}).catch(function(e){r(Object.keys(t).slice(-1).pop())})})},d.setPlayerData=function(t,r,n){void 0===n&&(n=null);var i=d.hlsSupport,o=e.hlsSupportLevels.HLSJS;r&&i===o?(d.hlsPlayer&&d.hlsPlayer.destroy(),d.hlsPlayer=new f,d.hlsPlayer.attachMedia(d.node),d.hlsPlayer.loadSource(t)):d.node.src=t,n&&(d.node.poster=n)},d.pauseIfPlaying=function(){d.node.paused||d.node.pause()};try{if(u.isNode())throw new c.EnvironmentError("node");if(!(r instanceof HTMLVideoElement))throw new c.PlayerConfigurationError("invalidPlayerRef",null);if(!n)throw new c.PlayerConfigurationError("noClient",null);n.setPlayer(d),d.init(a),d.setupHls()}catch(t){s.default.trapError(t,n.clientConfig.storyId)}return d}return n(e,t),e.STREAM_TYPE=l.streamType,e.BANDWIDTH_SAMPLES=l.bandwidthSamples,e.bandwidthRatings={LOW:l.bandwidth.low,MID:l.bandwidth.mid},e.compressionLevels={STREAM:l.compression.stream,LOW:l.compression.low,MID:l.compression.mid,HIGH:l.compression.high},e.hlsSupportLevels={NATIVE:l.hlsSupportLevels.native,HLSJS:l.hlsSupportLevels.hlsjs},e}(a.default);e.default=d},function(t,e,r){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=23)}([function(t,e,r){"use strict";function n(){}function i(t){var e=c.console[t];return e?function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=function(t,e){return"["+t+"] > "+e}(t,n[0])),e.apply(c.console,n)}:n}r.d(e,"a",function(){return l}),r.d(e,"b",function(){return f});var o=r(5),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=s,c=Object(o.a)(),l=function(t){if(!0===t||"object"===(void 0===t?"undefined":a(t))){!function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach(function(e){u[e]=t[e]?t[e].bind(t):i(e)})}(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=s}}else u=s},f=u},function(t,e,r){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return i});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(1),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),u=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(s.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){try{(function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}).call(this,t,e).call()}catch(e){n.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(o.a.ERROR,{type:i.b.OTHER_ERROR,details:i.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();e.a=u},function(t,e){t.exports=void 0},function(t,e,r){"use strict";e.a=function(){return"undefined"==typeof window?self:window}},function(t,e,r){!function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var l=s.path,f=l.substring(0,l.lastIndexOf("/")+1)+o.path;c.path=a.normalizePath(f)}else c.path=s.path,o.params||(c.params=s.params,o.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(c)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},function(t,e,r){"use strict";e.a={search:function(t,e){for(var r=0,n=t.length-1,i=null,o=null;r<=n;){var a=e(o=t[i=(r+n)/2|0]);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(c=r.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,o,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var n=r,i=0;t.isHeader(e,r);)i+=10,i+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(i+=10),r+=i;if(i>0)return e.subarray(n,n+i)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),n=0;n<r.length;n++){var i=r[n];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:r,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var r=0,n=[];t.isHeader(e,r);){for(var i=t._readSize(e,r+6),o=(r+=10)+i;r+8<o;){var a=t._getFrameData(e.subarray(r)),s=t._decodeFrame(a);s&&n.push(s),r+=a.size+10}t.isFooter(e,r)&&(r+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.length,n=void 0,i=void 0,o=void 0,a="",s=0;s<r;){if(0===(n=t[s++])&&e)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=t[s++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=t[s++],o=t[s++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&o)<<0)}}return a},t}();n._utf8ArrayToStr,e.a=n},function(t,e,r){"use strict";e.a=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(2),a=r(0),s=r(12),u=r(24),c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=window.performance,f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},d={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.MANIFEST_LOADING,n.a.LEVEL_LOADING,n.a.AUDIO_TRACK_LOADING,n.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.canHaveQualityLevels=function(t){return t!==f.AUDIO_TRACK&&t!==f.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case f.AUDIO_TRACK:return d.AUDIO;case f.SUBTITLE_TRACK:return d.SUBTITLE;default:return d.MAIN}},e.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r},e.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,n=e.loader,i=new(r||n)(e);return t.loader=i,this.loaders[t.type]=i,i},e.prototype.getInternalLoader=function(t){return this.loaders[t.type]},e.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:f.MANIFEST,level:0,id:null})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:f.LEVEL,level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:f.AUDIO_TRACK,level:0,id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:f.SUBTITLE_TRACK,level:0,id:t.id})},e.prototype.load=function(t,e){var r=this.hls.config;a.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n=this.getInternalLoader(e);if(n){var i=n.context;if(i&&i.url===t)return a.b.trace("playlist request ongoing"),!1;a.b.warn("aborting previous loader for type: "+e.type),n.abort()}var o=void 0,s=void 0,u=void 0,c=void 0;switch(e.type){case f.MANIFEST:o=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,u=r.manifestLoadingRetryDelay,c=r.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:o=0,s=r.levelLoadingTimeOut;break;default:o=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,u=r.levelLoadingRetryDelay,c=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var l={timeout:s,maxRetry:o,retryDelay:u,maxRetryDelay:c},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return a.b.debug("Calling internal loader delegate for URL: "+t),n.load(e,l,d),!0},e.prototype.loadsuccess=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r.isSidxRequest)return this._handleSidxRequest(t,r),void this._handlePlaylistLoaded(t,e,r,n);this.resetInternalLoader(r.type);var i=t.data;e.tload=l.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,r,n):this._handleMasterPlaylist(t,e,r,n):this._handleManifestParsingError(t,r,"no EXTM3U delimiter",n)},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r)},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,r,!0)},e.prototype._handleMasterPlaylist=function(t,r,i,o){var s=this.hls,c=t.data,l=e.getResponseUrl(t,i),f=u.a.parseMasterPlaylist(c,l);if(f.length){var d=f.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),h=u.a.parseMasterPlaylistMedia(c,l,"AUDIO",d),p=u.a.parseMasterPlaylistMedia(c,l,"SUBTITLES");if(h.length){var v=!1;h.forEach(function(t){t.url||(v=!0)}),!1===v&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(a.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}s.trigger(n.a.MANIFEST_LOADED,{levels:f,audioTracks:h,subtitles:p,url:l,stats:r,networkDetails:o})}else this._handleManifestParsingError(t,i,"no level found in manifest",o)},e.prototype._handleTrackOrLevelPlaylist=function(t,r,i,o){var a=this.hls,s=i.id,c=i.level,d=i.type,h=e.getResponseUrl(t,i),p=isNaN(s)?0:s,v=isNaN(c)?p:c,g=e.mapContextToLevelType(i),y=u.a.parseLevelPlaylist(t.data,h,v,g,p);if(y.tload=r.tload,d===f.MANIFEST){var m={url:h,details:y};a.trigger(n.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:h,stats:r,networkDetails:o})}if(r.tparsed=l.now(),y.needSidxRanges){var b=y.initSegment.url;this.load(b,{isSidxRequest:!0,type:d,level:c,levelDetails:y,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=y,this._handlePlaylistLoaded(t,r,i,o)},e.prototype._handleSidxRequest=function(t,e){var r=s.a.parseSegmentIndex(new Uint8Array(t.data));r.references.forEach(function(t,r){var n=t.info,i=e.levelDetails.fragments[r];0===i.byteRange.length&&(i.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),e.levelDetails.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"},e.prototype._handleManifestParsingError=function(t,e,r,i){this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:i})},e.prototype._handleNetworkError=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.b.info("A network error occured while loading a "+t.type+"-type playlist");var i=void 0,s=void 0,u=this.getInternalLoader(t);switch(t.type){case f.MANIFEST:i=r?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,s=!0;break;case f.LEVEL:i=r?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,s=!1;break;case f.AUDIO_TRACK:i=r?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}u&&(u.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:i,fatal:s,url:u.url,loader:u,context:t,networkDetails:e})},e.prototype._handlePlaylistLoaded=function(t,r,i,o){var a=i.type,s=i.level,u=i.id,c=i.levelDetails;if(c.targetduration)if(e.canHaveQualityLevels(i.type))this.hls.trigger(n.a.LEVEL_LOADED,{details:c,level:s||0,id:u||0,stats:r,networkDetails:o});else switch(a){case f.AUDIO_TRACK:this.hls.trigger(n.a.AUDIO_TRACK_LOADED,{details:c,id:u,stats:r,networkDetails:o});break;case f.SUBTITLE_TRACK:this.hls.trigger(n.a.SUBTITLE_TRACK_LOADED,{details:c,id:u,stats:r,networkDetails:o})}else this._handleManifestParsingError(t,i,"invalid target duration",o)},c(e,null,[{key:"ContextType",get:function(){return f}},{key:"LevelType",get:function(){return d}}]),e}(i.a);e.a=h},function(t,e,r){"use strict";var n=r(0),i=r(1),o=Math.pow(2,32)-1,a=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.remuxer=r}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,n,o){if(e&&e.byteLength){var a=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?e:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?e:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?e:null})),this.observer.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var n=[],i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=void 0;if(e.data?(c=e.start,s=e.end,e=e.data):(c=0,s=e.byteLength),!r.length)return null;for(i=c;i<s;)o=t.readUint32(e,i),a=t.bin2str(e.subarray(i+4,i+8)),l=o>1?i+o:s,a===r[0]&&(1===r.length?n.push({data:e,start:i+8,end:l}):(u=t.findBox({data:e,start:i+8,end:l},r.slice(1))).length&&(n=n.concat(u))),i=l;return n},t.parseSegmentIndex=function(e){var r=t.findBox(e,["moov"])[0],n=r?r.end:null,i=0,o=t.findBox(e,["sidx"]),a=void 0;if(!o||!o[0])return null;a=[];var s=(o=o[0]).data[0];i=0===s?8:16;var u=t.readUint32(o,i);i+=4,i+=0===s?8:16,i+=2;var c=o.end+0,l=t.readUint16(o,i);i+=2;for(var f=0;f<l;f++){var d=i,h=t.readUint32(o,d);d+=4;var p=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=t.readUint32(o,d);d+=4,a.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:c,end:c+p-1}}),c+=p,i=d+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:l,references:a,moovEndOffset:n}},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=t.readUint32(i,a),u=t.findBox(e,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var c=t.readUint32(u,a),l=t.findBox(e,["mdia","hdlr"])[0];if(l){var f={soun:"audio",vide:"video"}[t.bin2str(l.data.subarray(l.start+8,l.start+12))];if(f){var d=t.findBox(e,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var h=t.bin2str(d.data.subarray(d.start+12,d.start+16));n.b.log("MP4Demuxer:"+f+":"+h+" found")}r[s]={timescale:c,type:f},r[f]={timescale:c,id:s}}}}}}),r},t.getStartDTS=function(e,r){var n,i,o=void 0;return o=t.findBox(r,["moof","traf"]),n=[].concat.apply([],o.map(function(r){return t.findBox(r,["tfhd"]).map(function(n){var i,o;return i=t.readUint32(n,4),o=e[i].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r,n=void 0;return r=e.data[e.start],n=t.readUint32(e,4),1===r&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/o})})),i=Math.min.apply(null,n),isFinite(i)?i:0},t.offsetStartDTS=function(e,r,n){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var a=t.readUint32(i,4),s=e[a].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],i=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,i-n*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),u=Math.floor(i%(o+1));t.writeUint32(e,4,a),t.writeUint32(e,8,u)}})})})},t.prototype.append=function(e,r,n,o){var a=this.initData;a||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var c=t.getStartDTS(a,e);this.initPTS=u=c-r,this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(a,e,u),s=t.getStartDTS(a,e),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,e)},t.prototype.destroy=function(){},t}();e.a=a},function(t,e,r){"use strict";var n=r(6),i=r.n(n),o=r(14),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(){var e;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return t.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},t.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&((r=new o.a).method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},a(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=i.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),t}();e.a=s},function(t,e,r){"use strict";var n=r(6),i=r.n(n),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return o(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=i.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();e.a=a},function(t,e,r){"use strict";function n(t,e){var r=o[e];return!!r&&!0===r[t.slice(0,4)]}function i(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}r.d(e,"b",function(){return n}),r.d(e,"a",function(){return i});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return a});var n=r(3),i=r(1),o={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},a=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,i.a.BUFFER_APPENDED,i.a.FRAG_BUFFERED,i.a.FRAG_LOADED));return n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=r.config,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,n.a.prototype.destroy.call(this),t.prototype.destroy.call(this)},e.prototype.getBufferedFrag=function(t,e){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=t&&t<=o.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},e.prototype.detectEvictedFragments=function(t,e){var r=this,n=void 0,i=void 0;Object.keys(this.fragments).forEach(function(o){var a=r.fragments[o];if(!0===a.buffered){var s=a.range[t];if(s){n=s.time;for(var u=0;u<n.length;u++)if(i=n[u],!1===r.isTimeBuffered(i.startPTS,i.endPTS,e)){r.removeFragment(a.body);break}}}})},e.prototype.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(!0===t.hasElementaryStream(r)){var i=e.timeRanges[r];n.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}}))},e.prototype.getBufferedTimes=function(t,e,r){for(var n=[],i=void 0,o=void 0,a=!1,s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,o=r.end(s)+this.bufferPadding,t>=i&&e<=o){n.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<o&&e>i)n.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),a=!0;else if(e<=i)break}return{time:n,partial:a}},e.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},e.prototype.getPartialFragment=function(t){var e=this,r=void 0,n=void 0,i=void 0,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var u=e.fragments[s];e.isPartial(u)&&(n=u.body.startPTS-e.bufferPadding,i=u.body.endPTS+e.bufferPadding,t>=n&&t<=i&&(r=Math.min(t-n,i-t),a<=r&&(o=u.body,a=r)))}),o},e.prototype.getState=function(t){var e=this.getFragmentKey(t),r=this.fragments[e],n=o.NOT_LOADED;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?o.PARTIAL:o.OK:o.APPENDING),n},e.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},e.prototype.isTimeBuffered=function(t,e,r){for(var n=void 0,i=void 0,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,t>=n&&e<=i)return!0;if(e<=n)return!1}return!1},e.prototype.onFragLoaded=function(t){var e=t.frag;if(!isNaN(e.sn)&&!e.bitrateTest){var r=this.getFragmentKey(e),n={body:e,range:Object.create(null),buffered:!1};this.fragments[r]=n}},e.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var r=e.timeRanges[t];e.detectEvictedFragments(t,r)})},e.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},e.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},e.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},e.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},e}(n.a)},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,r){try{if(t){var n=t.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,r){var n=[],i=void 0,o=void 0,a=void 0,s=void 0,u=void 0;for(t.sort(function(t,e){return t.start-e.start||e.end-t.end}),u=0;u<t.length;u++){var c=n.length;if(c){var l=n[c-1].end;t[u].start-l<r?t[u].end>l&&(n[c-1].end=t[u].end):n.push(t[u])}else n.push(t[u])}for(u=0,i=0,o=a=e;u<n.length;u++){var f=n[u].start,d=n[u].end;if(e+r>=f&&e<d)o=f,i=(a=d)-e;else if(e+r<f){s=f;break}}return{len:i,start:o,end:a,nextStart:s}},t}()},function(t,e,r){"use strict";var n=r(1),i=r(2),o=r(19),a=r(34),s=r(12),u=r(35),c=r(38),l=r(39),f=r(42),d=r(5),h=Object(d.a)(),p=function(){function t(e,r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.typeSupported=r,this.config=n,this.vendor=i}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,i,a,s,u,c,l,f,d,p){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var v=this.decrypter;null==v&&(v=this.decrypter=new o.a(this.observer,this.config));var g=this,y=void 0;try{y=h.now()}catch(t){y=Date.now()}v.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var o=void 0;try{o=h.now()}catch(t){o=Date.now()}g.observer.trigger(n.a.FRAG_DECRYPTED,{stats:{tstart:y,tdecrypt:o}}),g.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,s,u,c,l,f,d,p)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,s,u,c,l,f,d,p)},t.prototype.pushDecrypted=function(t,e,r,o,d,h,p,v,g,y,m,b){var E=this.demuxer;if(!E||(p||v)&&!this.probe(t)){for(var S=this.observer,_=this.typeSupported,w=this.config,T=[{demux:u.a,remux:l.a},{demux:s.a,remux:f.a},{demux:a.a,remux:l.a},{demux:c.a,remux:l.a}],R=0,A=T.length;R<A;R++){var x=T[R],L=x.demux.probe;if(L(t)){var O=this.remuxer=new x.remux(S,w,_,this.vendor);E=new x.demux(S,O,w,_),this.probe=L;break}}if(!E)return void S.trigger(n.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var C=this.remuxer;(p||v)&&(E.resetInitSegment(r,o,d,y),C.resetInitSegment()),p&&(E.resetTimeStamp(b),C.resetTimeStamp(b)),"function"==typeof E.setDecryptData&&E.setDecryptData(e),E.append(t,h,g,m)},t}();e.a=p},function(t,e,r){"use strict";var n=r(31),i=r(32),o=r(33),a=r(2),s=r(0),u=r(1),c=r(5),l=Object(c.a)(),f=function(){function t(e,r){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,i=void 0===n||n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logEnabled=!0,this.observer=e,this.config=r,this.removePKCS7Padding=i,i)try{var o=l.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new o.a),c.expandKey(e),a(c.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i.a(l,e)),this.fastAesKey.expandKey().then(function(i){new n.a(l,r).decrypt(t,i).catch(function(n){u.onWebCryptoError(n,t,e,r,a)}).then(function(t){a(t)})}).catch(function(n){u.onWebCryptoError(n,t,e,r,a)})}},t.prototype.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(s.b.error("decrypting error : "+t.message),this.observer.trigger(u.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=f},function(t,e,r){"use strict";function n(t,e){return 255===t[e]&&240==(246&t[e+1])}function i(t,e){return 1&t[e+1]?7:9}function o(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function a(t){return 9216e4/t}function s(t,e,r,n,a){var s,u=void 0,c=t.length;if(s=i(t,e),u=o(t,e),(u-=s)>0&&e+s+u<=c)return{headerLength:s,frameLength:u,stamp:r+n*a}}e.d=function(t,e){return!!(e+1<t.length&&n(t,e))},e.e=function(t,e){if(e+1<t.length&&n(t,e)){var r=i(t,e);e+5<t.length&&(r=o(t,e));var a=e+r;if(a===t.length||a+1<t.length&&n(t,a))return!0}return!1},e.c=function(t,e,r,n,i){if(!t.samplerate){var o=function(t,e,r,n){var i,o=void 0,a=void 0,s=void 0,f=void 0,d=navigator.userAgent.toLowerCase(),h=n,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return o=1+((192&e[r+2])>>>6),(i=(60&e[r+2])>>>2)>p.length-1?void t.trigger(l.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+i}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,u.b.log("manifest codec:"+n+",ADTS data:type:"+o+",sampleingIndex:"+i+"["+p[i]+"Hz],channelConfig:"+s),/firefox/i.test(d)?i>=6?(o=5,f=new Array(4),a=i-3):(o=2,f=new Array(2),a=i):-1!==d.indexOf("android")?(o=2,f=new Array(2),a=i):(o=5,f=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&i>=6?a=i-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(i>=6&&1===s||/vivaldi/i.test(d))||!n&&1===s)&&(o=2,f=new Array(2)),a=i)),f[0]=o<<3,f[0]|=(14&i)>>1,f[1]|=(1&i)<<7,f[1]|=s<<3,5===o&&(f[1]|=(14&a)>>1,f[2]=(1&a)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:p[i],channelCount:s,codec:"mp4a.40."+o,manifestCodec:h})}(e,r,n,i);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,u.b.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}},e.b=a,e.a=function(t,e,r,n,i){var o=s(e,r,n,i,a(t.samplerate));if(o){var u=o.stamp,c=o.headerLength,l=o.frameLength,f={unit:e.subarray(r+c,r+c+l),pts:u,dts:u};return t.samples.push(f),t.len+=l,{sample:f,length:l+c}}};var u=r(0),c=r(2),l=r(1);r(5)},function(t,e,r){"use strict";var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var o=this.parseHeader(e,r);if(o&&r+o.frameLength<=e.length){var a=n+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:e.subarray(r,r+o.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(s),t.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,o=t[e+2]>>4&15,a=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var u=3===r?3-i:3===i?3:4,c=1e3*n.BitratesMap[14*u+o-1],l=3===r?0:2===r?1:2,f=n.SamplingRateMap[3*l+a],d=t[e+3]>>6==3?1:2,h=n.SamplesCoefficients[r][i],p=n.BytesInSlot[i],v=8*h*p;return{sampleRate:f,channelCount:d,frameLength:parseInt(h*c/f+s,10)*p,samplesPerFrame:v}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),n=4;r&&r.frameLength&&(n=r.frameLength);var i=e+n;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}};e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=t[e],i=t[r],a=i.startPTS;isNaN(a)?i.start=r>e?n.start+n.duration:Math.max(n.start-i.duration,0):r>e?(n.duration=a-n.start,n.duration<0&&o.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&o.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function i(t,e,r,i,o,a){var s=r;if(!isNaN(e.startPTS)){var u=Math.abs(e.startPTS-r);isNaN(e.deltaPTS)?e.deltaPTS=u:e.deltaPTS=Math.max(u,e.deltaPTS),s=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),i=Math.max(i,e.endPTS),o=Math.min(o,e.startDTS),a=Math.max(a,e.endDTS)}var c=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=s,e.endPTS=i,e.startDTS=o,e.endDTS=a,e.duration=i-r;var l=e.sn;if(!t||l<t.startSN||l>t.endSN)return 0;var f,d,h=void 0;for(f=l-t.startSN,(d=t.fragments)[f]=e,h=f;h>0;h--)n(d,h,h-1);for(h=f;h<d.length-1;h++)n(d,h,h+1);return t.PTSKnown=!0,c}e.a=function(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}},e.c=i,e.b=function(t,e){var r=Math.max(t.startSN,e.startSN)-e.startSN,n=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,s=t.fragments,u=e.fragments,c=0,l=void 0;if(e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),n<r)e.PTSKnown=!1;else{for(var f=r;f<=n;f++){var d=s[a+f],h=u[f];h&&d&&(c=d.cc-h.cc,isNaN(d.startPTS)||(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,l=h))}if(c)for(o.b.log("discontinuity sliding from playlist, take drift into account"),f=0;f<u.length;f++)u[f].cc+=c;if(l)i(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(a>=0&&a<s.length){var p=s[a].start;for(f=0;f<u.length;f++)u[f].start+=p}e.PTSKnown=t.PTSKnown}};var o=r(0)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r.n(n),o=r(2),a=r(11),s=r(26),u=r(27),c=r(16),l=r(28),f=r(48),d=r(49),h=r(51),p=r(0),v=r(52),g=r(1),y=r(8),m=r.n(y),b=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r(61);var E=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in n)i in r||(r[i]=n[i]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(p.a)(r.debug),this.config=r,this._autoLevelCapping=-1;var o=this.observer=new m.a;o.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.emit.apply(o,[t,t].concat(r))},o.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[t].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.once=o.once.bind(o),this.trigger=o.trigger.bind(o);var h=this.abrController=new r.abrController(this),v=new r.bufferController(this),g=new r.capLevelController(this),y=new r.fpsController(this),b=new a.a(this),E=new s.a(this),S=new u.a(this),_=new d.a(this),w=this.levelController=new f.a(this),T=new c.b(this),R=[w,this.streamController=new l.a(this,T)],A=r.audioStreamController;A&&R.push(new A(this,T)),this.networkControllers=R;var x=[b,E,S,h,v,g,y,_,T];if(A=r.audioTrackController){var L=new A(this);this.audioTrackController=L,x.push(L)}if(A=r.subtitleTrackController){var O=new A(this);this.subtitleTrackController=O,x.push(O)}if(A=r.emeController){var C=new A(this);this.emeController=C,x.push(C)}[r.subtitleStreamController,r.timelineController].forEach(function(t){t&&x.push(new t(e))}),this.coreComponents=x}return t.isSupported=function(){return Object(h.a)()},b(t,null,[{key:"version",get:function(){return"0.10.0"}},{key:"Events",get:function(){return g.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:v.a},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){p.b.log("destroy"),this.trigger(g.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){p.b.log("attachMedia"),this.media=t,this.trigger(g.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){p.b.log("detachMedia"),this.trigger(g.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=i.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),p.b.log("loadSource:"+t),this.url=t,this.trigger(g.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;p.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){p.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){p.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){p.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},b(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){p.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){p.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){p.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){p.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){p.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){p.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,r=t?t.length:0,n=0;n<r;n++)if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>e)return n;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=E},function(t,e,r){"use strict";var n=r(6),i=r.n(n),o=r(13),a=r(14),s=r(25),u=r(0),c=r(15),l=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,f=/#EXT-X-MEDIA:(.*)/g,d=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),h=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,p=/\.(mp4|m4s|m4v|m4a)$/i,v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.findGroup=function(t,e){if(!t)return null;for(var r=null,n=0;n<t.length;n++){var i=t[n];i.id===e&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(t){var e=void 0,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return i.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n=[],i=void 0;for(l.lastIndex=0;null!=(i=l.exec(e));){var o={},a=o.attrs=new s.a(i[1]);o.url=t.resolve(i[2],r);var u=a.decimalResolution("RESOLUTION");u&&(o.width=u.width,o.height=u.height),o.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),o.name=a.NAME,function(t,e){["video","audio"].forEach(function(r){var n=t.filter(function(t){return Object(c.b)(t,r)});if(n.length){var i=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}([].concat((a.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),n.push(o)}return n},t.parseMasterPlaylistMedia=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,a=[],u=0;for(f.lastIndex=0;null!==(o=f.exec(e));){var c={},l=new s.a(o[1]);if(l.TYPE===n){if(c.groupId=l["GROUP-ID"],c.name=l.NAME,c.type=n,c.default="YES"===l.DEFAULT,c.autoselect="YES"===l.AUTOSELECT,c.forced="YES"===l.FORCED,l.URI&&(c.url=t.resolve(l.URI,r)),c.lang=l.LANGUAGE,c.name||(c.name=c.lang),i.length){var d=t.findGroup(i,c.groupId);c.audioCodec=d?d.codec:i[0].codec}c.id=u++,a.push(c)}}return a},t.parseLevelPlaylist=function(t,e,r,n,i){var c=0,l=0,f={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},v=new a.a,g=0,y=null,m=new o.a,b=void 0,E=void 0;for(d.lastIndex=0;null!==(b=d.exec(t));){var S=b[1];if(S){m.duration=parseFloat(S);var _=(" "+b[2]).slice(1);m.title=_||null,m.tagList.push(_?["INF",S,_]:["INF",S])}else if(b[3]){if(!isNaN(m.duration)){var w=c++;m.type=n,m.start=l,m.levelkey=v,m.sn=w,m.level=r,m.cc=g,m.urlId=i,m.baseurl=e,m.relurl=(" "+b[3]).slice(1),f.programDateTime&&(y?m.rawProgramDateTime?m.pdt=Date.parse(m.rawProgramDateTime):m.pdt=y.pdt+1e3*y.duration:m.pdt=Date.parse(f.programDateTime),m.endPdt=m.pdt+1e3*m.duration),f.fragments.push(m),y=m,l+=m.duration,m=new o.a}}else if(b[4]){if(m.rawByteRange=(" "+b[4]).slice(1),y){var T=y.byteRangeEndOffset;T&&(m.lastByteRangeEndOffset=T)}}else if(b[5])m.rawProgramDateTime=(" "+b[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),void 0===f.programDateTime&&(f.programDateTime=new Date(new Date(Date.parse(b[5]))-1e3*l));else{for(b=b[0].match(h),E=1;E<b.length&&void 0===b[E];E++);var R=(" "+b[E+1]).slice(1),A=(" "+b[E+2]).slice(1);switch(b[E]){case"#":m.tagList.push(A?[R,A]:[R]);break;case"PLAYLIST-TYPE":f.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":c=f.startSN=parseInt(R);break;case"TARGETDURATION":f.targetduration=parseFloat(R);break;case"VERSION":f.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":g++,m.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":g=parseInt(R);break;case"KEY":var x=R,L=new s.a(x),O=L.enumeratedString("METHOD"),C=L.URI,I=L.hexadecimalInteger("IV");O&&(v=new a.a,C&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(v.method=O,v.baseuri=e,v.reluri=C,v.key=null,v.iv=I));break;case"START":var k=R,P=new s.a(k).decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(f.startTimeOffset=P);break;case"MAP":var D=new s.a(R);m.relurl=D.URI,m.rawByteRange=D.BYTERANGE,m.baseurl=e,m.level=r,m.type=n,m.sn="initSegment",f.initSegment=m,m=new o.a;break;default:u.b.warn("line parsed but not handled: "+b)}}}return(m=y)&&!m.relurl&&(f.fragments.pop(),l-=m.duration),f.totalduration=l,f.averagetargetduration=l/f.fragments.length,f.endSN=c-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=g,!f.initSegment&&f.fragments.length&&f.fragments.every(function(t){return p.test(t.relurl)})&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(m=new o.a).relurl=f.fragments[0].relurl,m.baseurl=e,m.level=r,m.type=n,m.sn="initSegment",f.initSegment=m,f.needSidxRanges=!0),f},t}();e.a=v},function(t,e,r){"use strict";var n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){function t(e){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=n.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e=void 0,r={};for(i.lastIndex=0;null!==(e=i.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[e[1]]=n}return r},t}();e.a=o},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(2),a=r(0),s=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.FRAG_LOADING));return i.loaders={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,r=e.type,n=this.loaders,i=this.hls.config,o=i.fLoader,s=i.loader;e.loaded=0;var u=n[r];u&&(a.b.warn("abort previous fragment loader for type: "+r),u.abort()),u=n[r]=e.loader=i.fLoader?new o(i):new s(i);var c,l,f=void 0;f={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var d=e.byteRangeStartOffset,h=e.byteRangeEndOffset;isNaN(d)||isNaN(h)||(f.rangeStart=d,f.rangeEnd=h),c={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},u.load(f,c,l)},e.prototype.loadsuccess=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(n.a.FRAG_LOADED,{payload:o,frag:a,stats:e,networkDetails:i})},e.prototype.loaderror=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},e.prototype.loadtimeout=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},e.prototype.loadprogress=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.frag;o.loaded=t.loaded,this.hls.trigger(n.a.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:i})},e}(i.a);e.a=s},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(2),a=r(0),s=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},i.a.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,i=this.loaders[r],o=e.decryptdata,s=o.uri;if(s!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;i&&(a.b.warn("abort previous key loader for type:"+r),i.abort()),e.loader=this.loaders[r]=new u.loader(u),this.decrypturl=s,this.decryptkey=null;var c,l,f;c={url:s,frag:e,responseType:"arraybuffer"},l={timeout:u.fragLoadingTimeOut,maxRetry:u.fragLoadingMaxRetry,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(c,l,f)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(n.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(n.a.KEY_LOADED,{frag:i})},e.prototype.loaderror=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(n.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(i.a);e.a=s},function(t,e,r){"use strict";var n=r(7),i=r(17),o=r(29),a=r(1),s=r(16),u=r(13),c=r(11),l=r(22),f=r(44),d=r(2),h=r(0),p=r(45),v=r(46),g=r(47),y=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),m={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},b=function(t){function e(r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,a.a.MEDIA_ATTACHED,a.a.MEDIA_DETACHING,a.a.MANIFEST_LOADING,a.a.MANIFEST_PARSED,a.a.LEVEL_LOADED,a.a.KEY_LOADED,a.a.FRAG_LOADED,a.a.FRAG_LOAD_EMERGENCY_ABORTED,a.a.FRAG_PARSING_INIT_SEGMENT,a.a.FRAG_PARSING_DATA,a.a.FRAG_PARSED,a.a.ERROR,a.a.AUDIO_TRACK_SWITCHING,a.a.AUDIO_TRACK_SWITCHED,a.a.BUFFER_CREATED,a.a.BUFFER_APPENDED,a.a.BUFFER_FLUSHED));return i.fragmentTracker=n,i.config=r.config,i.audioCodecSwap=!1,i._state=m.STOPPED,i.stallReported=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},e.prototype.onHandlerDestroyed=function(){this.state=m.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(h.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=m.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=m.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=m.STOPPED,this.forceStartLoad=!1},e.prototype.doTick=function(){switch(this.state){case m.BUFFER_FLUSHING:this.fragLoadError=0;break;case m.IDLE:this._doTickIdle();break;case m.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=m.IDLE);break;case m.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(h.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=m.IDLE);break;case m.ERROR:case m.STOPPED:case m.FRAG_LOADING:case m.PARSING:case m.PARSED:case m.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var o=t.nextLoadLevel,s=this.levels[o];if(s){var u=s.bitrate,c=void 0;c=u?Math.max(8*e.maxBufferSize/u,e.maxBufferLength):e.maxBufferLength,c=Math.min(c,e.maxMaxBufferLength);var l=i.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,e.maxBufferHole),f=l.len;if(!(f>=c)){h.b.trace("buffer length of "+f.toFixed(3)+" is below max of "+c.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=o;var d=s.details;if(!d||d.live&&this.levelLastLoaded!==o)return void(this.state=m.WAITING_LEVEL);var p=this.fragPrevious;if(!d.live&&p&&!p.backtracked&&p.sn===d.endSN&&!l.nextStart&&Math.min(r.duration,p.start+p.duration)-Math.max(l.end,p.start)<=Math.max(.2,p.duration)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(a.a.BUFFER_EOS,v),void(this.state=m.ENDED)}this._fetchPayloadOrEos(n,l,d)}}}},e.prototype._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s=o[0].start,u=o[a-1].start+o[a-1].duration,c=e.end,l=void 0;if(r.initSegment&&!r.initSegment.data)l=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(a<f)return void h.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+f);if(null===(l=this._ensureFragmentAtLivePoint(r,c,s,u,n,o,a)))return}else c<s&&(l=o[0]);l||(l=this._findFragment(s,n,a,o,c,u,r)),l&&(l.encrypted?(h.b.log("Loading key for "+l.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(l)):(h.b.log("Loading "+l.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+t.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(l)))}},e.prototype._ensureFragmentAtLivePoint=function(t,e,r,i,o,a,s){var u=this.hls.config,c=this.media,l=void 0,f=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-u.maxFragLookUpTolerance,i-f)){var d=this.liveSyncPosition=this.computeLivePosition(r,t);h.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),e=d,c&&c.readyState&&c.duration>d&&(c.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&e>i&&c&&c.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(o)if(t.programDateTime)l=Object(g.b)(a,o.endPdt+1);else{var p=o.sn+1;if(p>=t.startSN&&p<=t.endSN){var v=a[p-t.startSN];o.cc===v.cc&&(l=v,h.b.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=n.a.search(a,function(t){return o.cc-t.cc}))&&h.b.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],h.b.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},e.prototype._findFragment=function(t,e,r,n,i,o,a){var s=this.hls.config,u=void 0,c=void 0;if(i<o?a.programDateTime?(c=Object(g.b)(n,Object(g.a)(t,i,a)))&&!Object(g.d)(i,s.maxFragLookUpTolerance,c)||(h.b.warn("Frag found by PDT search did not fit within tolerance; falling back to finding by SN"),c=Object(g.c)(e,n,i,o,s.maxFragLookUpTolerance)):c=Object(g.c)(e,n,i,o,s.maxFragLookUpTolerance):c=n[r-1],c){var l=(u=c).sn-a.startSN,f=e&&u.level===e.level,d=n[l-1],p=n[l+1];if(e&&u.sn===e.sn)if(f&&!u.backtracked)if(u.sn<a.endSN){var v=e.deltaPTS;v&&v>s.maxBufferHole&&e.dropped&&l?(u=d,h.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(u=p,h.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(p&&p.backtracked?(h.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+p.sn),u=p):(h.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,d?(u=d).backtracked=!0:l&&(u=null)))}return u},e.prototype._loadKey=function(t){this.state=m.KEY_LOADING,this.hls.trigger(a.a.KEY_LOADING,{frag:t})},e.prototype._loadFragment=function(t){var e=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===s.a.NOT_LOADED||e===s.a.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(a.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new o.a(this.hls,"main")),this.state=m.FRAG_LOADING):e===s.a.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},e.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,c.a.LevelType.MAIN)},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),i.a.isBuffered(r,e)?t=this.getBufferedFrag(e):i.a.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(a.a.FRAG_CHANGED,{frag:n});var o=n.level;this.fragPlaying&&this.fragPlaying.level===o||this.hls.trigger(a.a.LEVEL_SWITCHED,{level:o}),this.fragPlaying=n}}},e.prototype.immediateLevelSwitch=function(){if(h.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,i.a.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,r=void 0,n=void 0;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)r=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;r=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((n=this.getBufferedFrag(t.currentTime+r))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=m.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(a.a.BUFFER_FLUSHING,r)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(h.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;isNaN(e)||h.b.log("media seeking to "+e.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:t,o=i.a.bufferInfo(n,e,this.config.maxBufferHole);if(this.state===m.FRAG_LOADING){var a=this.fragCurrent;if(0===o.len&&a){var s=r.maxFragLookUpTolerance,u=a.start-s,c=a.start+a.duration+s;e<u||e>c?(a.loader&&(h.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=m.IDLE):h.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===m.ENDED&&(0===o.len&&(this.fragPrevious=0),this.state=m.IDLE);t&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||h.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){h.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){h.b.log("trigger BUFFER_RESET"),this.hls.trigger(a.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e=!1,r=!1,n=void 0;t.levels.forEach(function(t){(n=t.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(e=!0),-1!==n.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=e&&r,this.audioCodecSwitch&&h.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,r=t.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],o=e.totalduration,s=0;if(h.b.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var u=i.details;u&&e.fragments.length>0?(l.b(u,e),s=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,u),e.PTSKnown&&!isNaN(s)?h.b.log("live playlist sliding:"+s.toFixed(3)):(h.b.log("live playlist - outdated PTS, unknown sliding"),Object(p.a)(this.fragPrevious,n,e))):(h.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,Object(p.a)(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=r,this.hls.trigger(a.a.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=e.startTimeOffset;isNaN(c)?e.live?(this.startPosition=this.computeLivePosition(s,e),h.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(h.b.log("negative start time offset "+c+", count from end of last fragment"),c=s+o+c),h.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===m.WAITING_LEVEL&&(this.state=m.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===m.KEY_LOADING&&(this.state=m.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===m.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var n=t.stats,i=this.levels[e.level],s=i.details;if(h.b.log("Loaded  "+e.sn+" of ["+s.startSN+" ,"+s.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=n,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=m.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=window.performance.now(),this.hls.trigger(a.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=m.IDLE,n.tparsed=n.tbuffered=window.performance.now(),s.initSegment.data=t.payload,this.hls.trigger(a.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=m.PARSING;var u=s.totalduration,c=e.level,l=e.sn,f=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(h.b.log("swapping playlist audio codec"),void 0===f&&(f=this.lastAudioCodec),f&&(f=-1!==f.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,h.b.log("Parsing "+l+" of ["+s.startSN+" ,"+s.endSN+"],level "+c+", cc "+e.cc);var d=this.demuxer;d||(d=this.demuxer=new o.a(this.hls,"main"));var p=this.media,v=!(p&&p.seeking)&&(s.PTSKnown||!s.live),g=s.initSegment?s.initSegment.data:[];d.push(t.payload,g,f,i.videoCodec,e,u,v,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===m.PARSING){var n=t.tracks,i=void 0,o=void 0;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var s=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(h.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===u.indexOf("firefox")&&(s="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==o.container&&(s="mp4a.40.2",h.b.log("Android: force audio codec to "+s)),o.levelCodec=s,o.id=t.id}for(i in(o=n.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=t.id),this.hls.trigger(a.a.BUFFER_CODECS,n),n){o=n[i],h.b.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var c=o.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(a.a.BUFFER_APPENDING,{type:i,data:c,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,r=this.fragCurrent,n=t.frag;if(r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===m.PARSING){var i=this.levels[this.level],o=r;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&o.addElementaryStream(u.a.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&o.addElementaryStream(u.a.ElementaryStreamTypes.VIDEO),h.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped)if(o.backtracked)h.b.warn("Already backtracked on this fragment, appending with the gap",o.sn);else{var s=i.details;if(!s||o.sn!==s.startSN)return h.b.warn("missing video frame(s), backtracking fragment",o.sn),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=m.IDLE,this.fragPrevious=o,void this.tick();h.b.warn("missing video frame(s) on first frag, appending with gap",o.sn)}else o.backtracked=!1;var c=l.c(i.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),f=this.hls;f.trigger(a.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(r){r&&r.length&&e.state===m.PARSING&&(e.appended=!0,e.pendingBuffering=!0,f.trigger(a.a.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===m.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=m.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,r=t.id;if(!e){if(this.mediaBuffer!==this.media){h.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(h.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=m.IDLE}var i=this.hls;i.trigger(a.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(a.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(h.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,r=void 0,n=void 0,i=!1;for(var o in e){var a=e[o];"main"===a.id?(n=o,r=a,"video"===o&&(this.videoBuffer=e[o].buffer)):i=!0}i&&r?(h.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==m.PARSING&&e!==m.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==m.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;h.b.log("main buffered : "+f.a.toString(e.buffered)),this.fragPrevious=t;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(a.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=m.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&i.a.isBuffered(this.media,this.media.currentTime)&&i.a.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case d.a.FRAG_LOAD_ERROR:case d.a.FRAG_LOAD_TIMEOUT:case d.a.KEY_LOAD_ERROR:case d.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=m.FRAG_LOADING_WAITING_RETRY}else h.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=m.ERROR;break;case d.a.LEVEL_LOAD_ERROR:case d.a.LEVEL_LOAD_TIMEOUT:this.state!==m.ERROR&&(t.fatal?(this.state=m.ERROR,h.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==m.WAITING_LEVEL||(this.state=m.IDLE));break;case d.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==m.PARSING&&this.state!==m.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=m.IDLE):(h.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,h.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},e.prototype._checkBuffer=function(){var t=this.config,e=this.media;if(e&&0!==e.readyState){var r=e.currentTime,n=(this.mediaBuffer?this.mediaBuffer:e).buffered;if(!this.loadedmetadata&&n.length)this.loadedmetadata=!0,this._seekToStartPos();else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var o=!(e.paused&&e.readyState>1||e.ended||0===e.buffered.length),a=window.performance.now();if(r!==this.lastCurrentTime)this.stallReported&&(h.b.warn("playback not stuck anymore @"+r+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(o){var s=a-this.stalled,u=i.a.bufferInfo(e,r,t.maxBufferHole);if(!this.stalled)return void(this.stalled=a);s>=1e3&&this._reportStall(u.len),this._tryFixBufferStall(u,s)}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=m.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(u.a.ElementaryStreamTypes.VIDEO,t.buffered),this.state=m.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},e.prototype._tryFixBufferStall=function(t,e){var r=this.config,n=this.media.currentTime,i=this.fragmentTracker.getPartialFragment(n);i&&this._trySkipBufferHole(i),t.len>.5&&e>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,h.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),e.trigger(a.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e.prototype._trySkipBufferHole=function(t){for(var e=this.hls,r=this.media,n=r.currentTime,i=0,o=0;o<r.buffered.length;o++){var s=r.buffered.start(o);if(n>=i&&n<s)return r.currentTime=Math.max(s,r.currentTime+.1),h.b.warn("skipping hole, adjusting currentTime from "+n+" to "+r.currentTime),this.stalled=null,void e.trigger(a.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+r.currentTime,frag:t});i=r.buffered.end(o)}},e.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<t.nudgeMaxRetry){var o=n+i*t.nudgeOffset;h.b.log("adjust currentTime from "+n+" to "+o),r.currentTime=o,e.trigger(a.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(a.a.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.BUFFER_STALLED_ERROR,fatal:!0})},e.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=t.seeking?e:this.startPosition;e!==r&&(h.b.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+e+" "),t.currentTime=r)},y(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,h.b.log("main stream:"+e+"->"+t),this.hls.trigger(a.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(v.a);e.a=b},function(t,e,r){"use strict";var n=r(8),i=r.n(n),o=r(30),a=r.n(o),s=r(1),u=r(18),c=r(0),l=r(2),f=r(10),d=r(5),h=Object(d.a)(),p=Object(f.a)(),v=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.id=r;var n=this.observer=new i.a,o=e.config;n.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.emit.apply(n,[t,t].concat(r))},n.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[t].concat(r))};var f=function(t,r){(r=r||{}).frag=this.frag,r.id=this.id,e.trigger(t,r)}.bind(this);n.on(s.a.FRAG_DECRYPTED,f),n.on(s.a.FRAG_PARSING_INIT_SEGMENT,f),n.on(s.a.FRAG_PARSING_DATA,f),n.on(s.a.FRAG_PARSED,f),n.on(s.a.ERROR,f),n.on(s.a.FRAG_PARSING_METADATA,f),n.on(s.a.FRAG_PARSING_USERDATA,f),n.on(s.a.INIT_PTS_FOUND,f);var d={mp4:p.isTypeSupported("video/mp4"),mpeg:p.isTypeSupported("audio/mpeg"),mp3:p.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){c.b.log("demuxing in webworker");var g=void 0;try{g=this.w=a()(43),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(s.a.ERROR,{type:l.b.OTHER_ERROR,details:l.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:d,vendor:v,id:r,config:JSON.stringify(o)})}catch(t){c.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&h.URL.revokeObjectURL(g.objectURL),this.demuxer=new u.a(n,d,o,v),this.w=void 0}}else this.demuxer=new u.a(n,d,o,v)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,r,n,i,o,a,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,f=i.decryptdata,d=this.frag,h=!(d&&i.cc===d.cc),p=!(d&&i.level===d.level),v=d&&i.sn===d.sn+1,g=!p&&v;if(h&&c.b.log(this.id+":discontinuity detected"),p&&c.b.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:e,audioCodec:r,videoCodec:n,timeOffset:l,discontinuity:h,trackSwitch:p,contiguous:g,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,f,e,r,n,l,h,p,g,o,a,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":h.URL.revokeObjectURL(this.w.objectURL);break;case s.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}();e.a=v},function(t,e,r){function n(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var n=e(e.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t,e,n){var o={};o[n]=[];var a=e.toString(),s=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var l,f=s[1],d=new RegExp("(\\\\n|\\W)"+i(f)+c,"g");l=d.exec(a);)"dll-reference"!==l[3]&&o[n].push(l[3]);for(d=new RegExp("\\("+i(f)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+c,"g");l=d.exec(a);)t[l[2]]||(o[n].push(l[1]),t[l[2]]=r(l[1]).m),o[l[2]]=o[l[2]]||[],o[l[2]].push(l[4]);return o}function a(t){return Object.keys(t).reduce(function(e,r){return e||t[r].length>0},!1)}function s(t,e){for(var r={main:[e]},n={main:[]},i={main:{}};a(r);)for(var s=Object.keys(r),u=0;u<s.length;u++){var c=s[u],l=r[c].pop();if(i[c]=i[c]||{},!i[c][l]&&t[c][l]){i[c][l]=!0,n[c]=n[c]||[],n[c].push(l);for(var f=o(t,t[c][l],c),d=Object.keys(f),h=0;h<d.length;h++)r[d[h]]=r[d[h]]||[],r[d[h]]=r[d[h]].concat(f[d[h]])}}return n}var u="[\\.|\\-|\\+|\\w|/|@]+",c="\\((/\\*.*?\\*/)?s?.*?("+u+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:r.m},o=e.all?{main:Object.keys(i)}:s(i,t),a="";Object.keys(o).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),a=a+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map(function(t){return JSON.stringify(t)+": "+i.main[t].toString()}).join(",")+"})(self);";var u=new window.Blob([a],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),l=new window.Worker(c);return l.objectURL=c,l}},function(t,e,r){"use strict";var n=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.aesIV=r}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}();e.a=n},function(t,e,r){"use strict";var n=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.subtle=e,this.key=r}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}();e.a=n},function(t,e,r){"use strict";var n=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,u=s[0],c=s[1],l=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[h]=g,e[g]=h;var y=d[h],m=d[y],b=d[m],E=257*d[g]^16843008*g;n[h]=E<<24|E>>>8,i[h]=E<<16|E>>>16,o[h]=E<<8|E>>>24,a[h]=E,E=16843009*b^65537*m^257*y^16843008*h,u[g]=E<<24|E>>>8,c[g]=E<<16|E>>>16,l[g]=E<<8|E>>>24,f[g]=E,h?(h=y^d[d[d[b^y]]],p^=d[d[p]]):h=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),l=this.sBox,f=this.rcon,d=this.invSubMix,h=d[0],p=d[1],v=d[2],g=d[3],y=void 0,m=void 0;for(a=0;a<o;a++)a<i?y=u[a]=e[a]:(m=y,a%i==0?(m=l[(m=m<<8|m>>>24)>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m],m^=f[a/i|0]<<24):i>6&&a%i==4&&(m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m]),u[a]=y=(u[a-i]^m)>>>0);for(s=0;s<o;s++)a=o-s,m=3&s?u[a]:u[a-4],c[s]=s<4||a<=4?m:h[l[m>>>24]]^p[l[m>>>16&255]]^v[l[m>>>8&255]]^g[l[255&m]],c[s]=c[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r,n){for(var i=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,u=s[0],c=s[1],l=s[2],f=s[3],d=this.uint8ArrayToUint32Array_(r),h=d[0],p=d[1],v=d[2],g=d[3],y=new Int32Array(t),m=new Int32Array(y.length),b=void 0,E=void 0,S=void 0,_=void 0,w=void 0,T=void 0,R=void 0,A=void 0,x=void 0,L=void 0,O=void 0,C=void 0,I=void 0,k=void 0,P=this.networkToHostOrderSwap;e<y.length;){for(x=P(y[e]),L=P(y[e+1]),O=P(y[e+2]),C=P(y[e+3]),w=x^o[0],T=C^o[1],R=O^o[2],A=L^o[3],I=4,k=1;k<i;k++)b=u[w>>>24]^c[T>>16&255]^l[R>>8&255]^f[255&A]^o[I],E=u[T>>>24]^c[R>>16&255]^l[A>>8&255]^f[255&w]^o[I+1],S=u[R>>>24]^c[A>>16&255]^l[w>>8&255]^f[255&T]^o[I+2],_=u[A>>>24]^c[w>>16&255]^l[T>>8&255]^f[255&R]^o[I+3],w=b,T=E,R=S,A=_,I+=4;b=a[w>>>24]<<24^a[T>>16&255]<<16^a[R>>8&255]<<8^a[255&A]^o[I],E=a[T>>>24]<<24^a[R>>16&255]<<16^a[A>>8&255]<<8^a[255&w]^o[I+1],S=a[R>>>24]<<24^a[A>>16&255]<<16^a[w>>8&255]<<8^a[255&T]^o[I+2],_=a[A>>>24]<<24^a[w>>16&255]<<16^a[T>>8&255]<<8^a[255&R]^o[I+3],I+=3,m[e]=P(b^h),m[e+1]=P(_^p),m[e+2]=P(S^v),m[e+3]=P(E^g),h=x,p=L,v=O,g=C,e+=4}return n?function(t){var e=t.byteLength,r=e&&new DataView(t).getUint8(e-1);return r?t.slice(0,e-r):t}(m.buffer):m.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.a=n},function(t,e,r){"use strict";var n=r(20),i=r(0),o=r(9),a=function(){function t(e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(o.a.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(n.e(t,e))return i.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,a){for(var s=this._audioTrack,u=o.a.getID3Data(t,0)||[],c=o.a.getTimeStamp(u),l=c?90*c:9e4*e,f=0,d=l,h=t.length,p=u.length,v=[{pts:d,dts:d,data:u}];p<h-1;)if(n.d(t,p)&&p+5<h){n.c(s,this.observer,t,p,s.manifestCodec);var g=n.a(s,t,p,l,f);if(!g){i.b.log("Unable to parse AAC frame");break}p+=g.length,d=g.sample.pts,f++}else o.a.isHeader(t,p)?(u=o.a.getID3Data(t,p),v.push({pts:d,dts:d,data:u}),p+=u.length):p++;this.remuxer.remux(s,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},e,r,a)},t.prototype.destroy=function(){},t}();e.a=a},function(t,e,r){"use strict";var n=r(20),i=r(21),o=r(1),a=r(36),s=r(37),u=r(0),c=r(2),l={video:1,audio:2,id3:3,text:4},f=function(){function t(e,r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.typeSupported=i,this.remuxer=r,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new s.a(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0||(r&&u.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:l[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,n,i){var a=void 0,s=e.length,l=void 0,f=void 0,d=void 0,h=void 0,p=!1;this.contiguous=n;var v=this.pmtParsed,g=this._avcTrack,y=this._audioTrack,m=this._id3Track,b=g.pid,E=y.pid,S=m.pid,_=this._pmtId,w=g.pesData,T=y.pesData,R=m.pesData,A=this._parsePAT,x=this._parsePMT,L=this._parsePES,O=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),P=t._syncOffset(e);for(s-=(s+P)%188,a=P;a<s;a+=188)if(71===e[a]){if(l=!!(64&e[a+1]),f=((31&e[a+1])<<8)+e[a+2],(48&e[a+3])>>4>1){if((d=a+5+e[a+4])===a+188)continue}else d=a+4;switch(f){case b:l&&(w&&(h=L(w))&&void 0!==h.pts&&O(h,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(d,a+188)),w.size+=a+188-d);break;case E:l&&(T&&(h=L(T))&&void 0!==h.pts&&(y.isAAC?C(h):I(h)),T={data:[],size:0}),T&&(T.data.push(e.subarray(d,a+188)),T.size+=a+188-d);break;case S:l&&(R&&(h=L(R))&&void 0!==h.pts&&k(h),R={data:[],size:0}),R&&(R.data.push(e.subarray(d,a+188)),R.size+=a+188-d);break;case 0:l&&(d+=e[d]+1),_=this._pmtId=A(e,d);break;case _:l&&(d+=e[d]+1);var D=x(e,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=D.avc)>0&&(g.pid=b),(E=D.audio)>0&&(y.pid=E,y.isAAC=D.isAAC),(S=D.id3)>0&&(m.pid=S),p&&!v&&(u.b.log("reparse from beginning"),p=!1,a=P-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(o.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(h=L(w))&&void 0!==h.pts?(O(h,!0),g.pesData=null):g.pesData=w,T&&(h=L(T))&&void 0!==h.pts?(y.isAAC?C(h):I(h),y.pesData=null):(T&&T.size&&u.b.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=T),R&&(h=L(R))&&void 0!==h.pts?(k(h),m.pesData=null):m.pesData=R,null==this.sampleAes?this.remuxer.remux(y,g,m,this._txtTrack,r,n,i):this.decryptAndRemux(y,g,m,this._txtTrack,r,n,i)},t.prototype.decryptAndRemux=function(t,e,r,n,i,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,n,i,o,a)})}else this.decryptAndRemuxAvc(t,e,r,n,i,o,a)},t.prototype.decryptAndRemuxAvc=function(t,e,r,n,i,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,n,i,o,a)})}else this.remuxer.remux(t,e,r,n,i,o,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,n){var i,o=void 0,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){u.b.log("unkown stream type:"+t[e]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!n){u.b.log("unkown stream type:"+t[e]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:r?-1===a.audio&&(a.audio=o,a.isAAC=!1):u.b.log("MPEG audio found, not supported in this browser for now");break;case 36:u.b.warn("HEVC stream type found, not supported for now");break;default:u.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},t.prototype._parsePES=function(t){var e=0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,f=t.data;if(!t||0===t.size)return null;for(;f[0].length<19&&f.length>1;){var d=new Uint8Array(f[0].length+f[1].length);d.set(f[0]),d.set(f[1],f[0].length),f[0]=d,f.splice(1,1)}if(1===((r=f[0])[0]<<16)+(r[1]<<8)+r[2]){if((i=(r[4]<<8)+r[5])&&i>t.size-6)return null;192&(n=r[7])&&((s=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2)>4294967295&&(s-=8589934592),64&n?((c=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>4294967295&&(c-=8589934592),s-c>54e5&&(u.b.warn(Math.round((s-c)/9e4)+"s delta between PTS and DTS, align them"),s=c)):c=s),l=(o=r[8])+9,t.size-=l,a=new Uint8Array(t.size);for(var h=0,p=f.length;h<p;h++){var v=(r=f[h]).byteLength;if(l){if(l>v){l-=v;continue}r=r.subarray(l),v-=l,l=0}a.set(r,e),e+=v}return i&&(i-=o+3),{data:a,pts:s,dts:c,len:i}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&u.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r=this,n=this._avcTrack,i=this._parseAVCNALu(t.data),o=void 0,s=this.avcSample,u=void 0,c=!1,l=void 0,f=this.pushAccesUnit.bind(this),d=function(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}};t.data=null,s&&i.length&&!n.audFound&&(f(s,n),s=this.avcSample=d(!1,t.pts,t.dts,"")),i.forEach(function(e){switch(e.type){case 1:u=!0,s||(s=r.avcSample=d(!0,t.pts,t.dts,"")),s.frame=!0;var i=e.data;if(c&&i.length>4){var h=new a.a(i).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(s.key=!0)}break;case 5:u=!0,s||(s=r.avcSample=d(!0,t.pts,t.dts,"")),s.key=!0,s.frame=!0;break;case 6:u=!0,(o=new a.a(r.discardEPB(e.data))).readUByte();for(var p=0,v=0,g=!1,y=0;!g&&o.bytesAvailable>1;){p=0;do{p+=y=o.readUByte()}while(255===y);v=0;do{v+=y=o.readUByte()}while(255===y);if(4===p&&0!==o.bytesAvailable){if(g=!0,181===o.readUByte()&&49===o.readUShort()&&1195456820===o.readUInt()&&3===o.readUByte()){var m=o.readUByte(),b=31&m,E=[m,o.readUByte()];for(l=0;l<b;l++)E.push(o.readUByte()),E.push(o.readUByte()),E.push(o.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:t.pts,bytes:E})}}else if(v<o.bytesAvailable)for(l=0;l<v;l++)o.readUByte()}break;case 7:if(u=!0,c=!0,!n.sps){var S=(o=new a.a(e.data)).readSPS();n.width=S.width,n.height=S.height,n.pixelRatio=S.pixelRatio,n.sps=[e.data],n.duration=r._duration;var _=e.data.subarray(1,4),w="avc1.";for(l=0;l<3;l++){var T=_[l].toString(16);T.length<2&&(T="0"+T),w+=T}n.codec=w}break;case 8:u=!0,n.pps||(n.pps=[e.data]);break;case 9:u=!1,n.audFound=!0,s&&f(s,n),s=r.avcSample=d(!1,t.pts,t.dts,"");break;case 12:u=!1;break;default:u=!1,s&&(s.debug+="unknown NAL "+e.type+" ")}s&&u&&s.units.push(e)}),e&&s&&(f(s,n),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e=0,r=t.byteLength,n=void 0,i=void 0,o=this._avcTrack,a=o.naluState||0,s=a,u=[],c=void 0,l=-1,f=void 0;for(-1===a&&(l=0,f=31&t[0],a=0,e=1);e<r;)if(n=t[e++],a)if(1!==a)if(n)if(1===n){if(l>=0)c={data:t.subarray(l,e-a-1),type:f},u.push(c);else{var d=this._getLastNalUnit();if(d&&(s&&e<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),(i=e-a-1)>0)){var h=new Uint8Array(d.data.byteLength+i);h.set(d.data,0),h.set(t.subarray(0,i),d.data.byteLength),d.data=h}}e<r?(l=e,f=31&t[e],a=0):a=-1}else a=0;else a=3;else a=n?0:2;else a=n?0:1;if(l>=0&&a>=0&&(c={data:t.subarray(l,r),type:f,state:a},u.push(c)),0===u.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+t.byteLength);v.set(p.data,0),v.set(t,p.data.byteLength),p.data=v}}return o.naluState=a,u},t.prototype.discardEPB=function(t){for(var e,r=t.byteLength,n=[],i=1,o=void 0;i<r-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return t;e=r-n.length,o=new Uint8Array(e);var a=0;for(i=0;i<e;a++,i++)a===n[0]&&(a++,n.shift()),o[i]=t[a];return o},t.prototype._parseAACPES=function(t){var e,r,i=this._audioTrack,a=t.data,s=t.pts,l=this.aacOverFlow,f=this.aacLastPTS,d=void 0,h=void 0,p=void 0;if(l){var v=new Uint8Array(l.byteLength+a.byteLength);v.set(l,0),v.set(a,l.byteLength),a=v}for(h=0,r=a.length;h<r-1&&!n.d(a,h);h++);if(h){var g=void 0,y=void 0;if(h<r-1?(g="AAC PES did not start with ADTS header,offset:"+h,y=!1):(g="no ADTS header found in AAC PES",y=!0),u.b.warn("parsing error:"+g),this.observer.trigger(o.a.ERROR,{type:c.b.MEDIA_ERROR,details:c.a.FRAG_PARSING_ERROR,fatal:y,reason:g}),y)return}if(n.c(i,this.observer,a,h,this.audioCodec),d=0,e=n.b(i.samplerate),l&&f){var m=f+e;Math.abs(m-s)>1&&(u.b.log("AAC: align PTS for overlapping frames by "+Math.round((m-s)/90)),s=m)}for(;h<r;)if(n.d(a,h)&&h+5<r){var b=n.a(i,a,h,s,d);if(!b)break;h+=b.length,p=b.sample.pts,d++}else h++;l=h<r?a.subarray(h,r):null,this.aacOverFlow=l,this.aacLastPTS=p},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,o=0,a=t.pts;o<r;)if(i.a.isHeader(e,o)){var s=i.a.appendFrame(this._audioTrack,e,o,a,n);if(!s)break;o+=s.length,n++}else o++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}();e.a=f},function(t,e,r){"use strict";var n=r(0),i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&n.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e=8,r=8,n=void 0;for(n=0;n<t;n++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},t.prototype.readSPS=function(){var t,e,r,n,i=0,o=0,a=0,s=0,u=void 0,c=void 0,l=void 0,f=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(f(),t=f(),d(5),v(3),f(),y(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=h();if(3===b&&v(1),y(),y(),v(1),p())for(c=3!==b?8:12,l=0;l<c;l++)p()&&m(l<6?16:64)}y();var E=h();if(0===E)h();else if(1===E)for(v(1),g(),g(),u=h(),l=0;l<u;l++)g();y(),v(1),e=h(),r=h(),0===(n=d(1))&&v(1),v(1),p()&&(i=h(),o=h(),a=h(),s=h());var S=[1,1];if(p()&&p())switch(f()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(e+1)-2*i-2*o),height:(2-n)*(r+1)*16-(n?2:4)*(a+s),pixelRatio:S}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();e.a=i},function(t,e,r){"use strict";var n=r(19),i=function(){function t(e,r,i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.decryptdata=i,this.discardEPB=o,this.decrypter=new n.a(e,r,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,n){var i=t[e].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},t.prototype.decryptAvcSample=function(t,e,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(t,e,r+1,n)})},t.prototype.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,o,a),!a)return}}}},t}();e.a=i},function(t,e,r){"use strict";var n=r(9),i=r(0),o=r(21),a=function(){function t(e,r,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=n,this.remuxer=r}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e=void 0,r=void 0,a=n.a.getID3Data(t,0);if(a&&void 0!==n.a.getTimeStamp(a))for(e=a.length,r=Math.min(t.length-1,e+100);e<r;e++)if(o.a.probe(t,e))return i.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var a=n.a.getID3Data(t,0),s=n.a.getTimeStamp(a),u=s?90*s:9e4*e,c=a.length,l=t.length,f=0,d=0,h=this._audioTrack,p=[{pts:u,dts:u,data:a}];c<l;)if(o.a.isHeader(t,c)){var v=o.a.appendFrame(h,t,c,u,f);if(!v)break;c+=v.length,d=v.sample.pts,f++}else n.a.isHeader(t,c)?(a=n.a.getID3Data(t,c),p.push({pts:d,dts:d,data:a}),c+=a.length):c++;this.remuxer.remux(h,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}();e.a=a},function(t,e,r){"use strict";var n=r(40),i=r(41),o=r(1),a=r(2),s=r(0),u=function(){function t(e,r,n,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e,this.config=r,this.typeSupported=n;var o=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,n,i,a,u){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var c=t.samples.length,l=e.samples.length,f=i,d=i;if(c&&l){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;f+=Math.max(0,h),d+=Math.max(0,-h)}if(c){t.timescale||(s.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var p=this.remuxAudio(t,f,a,u);if(l){var v=void 0;p&&(v=p.endPTS-p.startPTS),e.timescale||(s.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,d,a,v,u)}}else if(l){var g=this.remuxVideo(e,d,a,0,u);g&&t.codec&&this.remuxEmptyAudio(t,f,a,g)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var n=this.observer,u=t.samples,c=e.samples,l=this.typeSupported,f="audio/mp4",d={},h={tracks:d},p=void 0===this._initPTS,v=void 0,g=void 0;if(p&&(v=g=1/0),t.config&&u.length&&(t.timescale=t.samplerate,s.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(f="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),d.audio={container:f,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:i.a.initSegment([t]),metadata:{channelCount:t.channelCount}},p&&(v=g=u[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&c.length){var y=e.inputTimeScale;e.timescale=y,d.video={container:"video/mp4",codec:e.codec,initSegment:i.a.initSegment([e]),metadata:{width:e.width,height:e.height}},p&&(v=Math.min(v,c[0].pts-y*r),g=Math.min(g,c[0].dts-y*r),this.observer.trigger(o.a.INIT_PTS_FOUND,{initPTS:v}))}Object.keys(d).length?(n.trigger(o.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,p&&(this._initPTS=v,this._initDTS=g)):n.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,n,u){var c=8,l=t.timescale,f=void 0,d=void 0,h=void 0,p=void 0,v=void 0,g=void 0,y=void 0,m=t.samples,b=[],E=m.length,S=this._PTSNormalize,_=this._initDTS,w=this.nextAvcDts,T=this.isSafari;if(0!==E){T&&(r|=m.length&&w&&(u&&Math.abs(e-w/l)<.1||Math.abs(m[0].pts-w-_)<l/5)),r||(w=e*l),m.forEach(function(t){t.pts=S(t.pts-_,w),t.dts=S(t.dts-_,w)}),m.sort(function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n||t.id-e.id});var R=m.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(R<0){s.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(R/90)+" ms to overcome this issue");for(var A=0;A<m.length;A++)m[A].dts+=R}var x=m[0];v=Math.max(x.dts,0),p=Math.max(x.pts,0);var L=Math.round((v-w)/90);r&&L&&(L>1?s.b.log("AVC:"+L+" ms hole between fragments detected,filling it"):L<-1&&s.b.log("AVC:"+-L+" ms overlapping between fragments detected"),v=w,m[0].dts=v,p=Math.max(p-L,w),m[0].pts=p,s.b.log("Video/PTS/DTS adjusted: "+Math.round(p/90)+"/"+Math.round(v/90)+",delta:"+L+" ms")),x=m[m.length-1],y=Math.max(x.dts,0),g=Math.max(x.pts,0,y),T&&(f=Math.round((y-v)/(m.length-1)));for(var O=0,C=0,I=0;I<E;I++){for(var k=m[I],P=k.units,D=P.length,F=0,M=0;M<D;M++)F+=P[M].data.length;C+=F,O+=D,k.length=F,k.dts=T?v+I*f:Math.max(k.dts,v),k.pts=Math.max(k.pts,k.dts)}var N=C+4*O+8;try{d=new Uint8Array(N)}catch(t){return void this.observer.trigger(o.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var U=new DataView(d.buffer);U.setUint32(0,N),d.set(i.a.types.mdat,4);for(var B=0;B<E;B++){for(var j=m[B],G=j.units,V=0,H=void 0,q=0,W=G.length;q<W;q++){var K=G[q],Y=K.data,z=K.data.byteLength;U.setUint32(c,z),c+=4,d.set(Y,c),c+=z,V+=4+z}if(T)H=Math.max(0,f*Math.round((j.pts-j.dts)/f));else{if(B<E-1)f=m[B+1].dts-j.dts;else{var X=this.config,J=j.dts-m[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var $=X.maxBufferHole,Q=Math.floor($*l),Z=(n?p+n*l:this.nextAudioPts)-j.pts;Z>Q?((f=Z-J)<0&&(f=J),s.b.log("It is approximately "+Z/90+" ms to the next segment; using duration "+f/90+" ms for the last video frame.")):f=J}else f=J}H=Math.round(j.pts-j.dts)}b.push({size:V,duration:f,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=y+f;var tt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=b[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=b,h=i.a.moof(t.sequenceNumber++,v,t),t.samples=[];var rt={data1:h,data2:d,startPTS:p/l,endPTS:(g+f)/l,startDTS:v/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:tt};return this.observer.trigger(o.a.FRAG_PARSING_DATA,rt),rt}},t.prototype.remuxAudio=function(t,e,r,u){var c=t.inputTimeScale,l=t.timescale,f=c/l,d=(t.isAAC?1024:1152)*f,h=this._PTSNormalize,p=this._initDTS,v=!t.isAAC&&this.typeSupported.mpeg,g=void 0,y=void 0,m=void 0,b=void 0,E=void 0,S=void 0,_=void 0,w=t.samples,T=[],R=this.nextAudioPts;if(r|=w.length&&R&&(u&&Math.abs(e-R/c)<.1||Math.abs(w[0].pts-R-p)<20*d),w.forEach(function(t){t.pts=t.dts=h(t.pts-p,e*c)}),0!==(w=w.filter(function(t){return t.pts>=0})).length){if(r||(R=u?e*c:w[0].pts),t.isAAC)for(var A=this.config.maxAudioFramesDrift,x=0,L=R;x<w.length;){var O,C=w[x];O=C.pts-L;var I=Math.abs(1e3*O/c);if(O<=-A*d)s.b.warn("Dropping 1 audio frame @ "+(L/c).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),w.splice(x,1),t.len-=C.unit.length;else if(O>=A*d&&I<1e4&&L){var k=Math.round(O/d);s.b.warn("Injecting "+k+" audio frame @ "+(L/c).toFixed(3)+"s due to "+Math.round(1e3*O/c)+" ms gap.");for(var P=0;P<k;P++){var D=Math.max(L,0);(m=n.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),m=C.unit.subarray()),w.splice(x,0,{unit:m,pts:D,dts:D}),t.len+=m.length,L+=d,x++}C.pts=C.dts=L,L+=d,x++}else Math.abs(O),C.pts=C.dts=L,L+=d,x++}for(var F=0,M=w.length;F<M;F++){var N=w[F],U=N.unit,B=N.pts;if(void 0!==_)y.duration=Math.round((B-_)/f);else{var j=Math.round(1e3*(B-R)/c),G=0;if(r&&t.isAAC&&j){if(j>0&&j<1e4)G=Math.round((B-R)/d),s.b.log(j+" ms hole between AAC samples detected,filling it"),G>0&&((m=n.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(m=U.subarray()),t.len+=G*m.length);else if(j<-12){s.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(R/c).toFixed(3)+"s/"+(B/c).toFixed(3)+"s/"+-j+"ms"),t.len-=U.byteLength;continue}B=R}if(S=B,!(t.len>0))return;var V=v?t.len:t.len+8;g=v?0:8;try{b=new Uint8Array(V)}catch(t){return void this.observer.trigger(o.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V})}v||(new DataView(b.buffer).setUint32(0,V),b.set(i.a.types.mdat,4));for(var H=0;H<G;H++)(m=n.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),m=U.subarray()),b.set(m,g),g+=m.byteLength,y={size:m.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(y)}b.set(U,g);var q=U.byteLength;g+=q,y={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(y),_=B}var W=0,K=T.length;if(K>=2&&(W=T[K-2].duration,y.duration=W),K){this.nextAudioPts=R=_+f*W,t.len=0,t.samples=T,E=v?new Uint8Array:i.a.moof(t.sequenceNumber++,S/f,t),t.samples=[];var Y=S/c,z=R/c,X={data1:E,data2:b,startPTS:Y,endPTS:z,startDTS:Y,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.observer.trigger(o.a.FRAG_PARSING_DATA,X),X}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var o=t.inputTimeScale,a=o/(t.samplerate?t.samplerate:o),u=this.nextAudioPts,c=(void 0!==u?u:i.startDTS*o)+this._initDTS,l=i.endDTS*o+this._initDTS,f=1024*a,d=Math.ceil((l-c)/f),h=n.a.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.b.warn("remux empty Audio"),h){for(var p=[],v=0;v<d;v++){var g=c+v*f;p.push({unit:h,pts:g,dts:g}),t.len+=h.length}t.samples=p,this.remuxAudio(t,e,r)}else s.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.prototype.remuxID3=function(t,e){var r=t.samples.length,n=void 0,i=t.inputTimeScale,a=this._initPTS,s=this._initDTS;if(r){for(var u=0;u<r;u++)(n=t.samples[u]).pts=(n.pts-a)/i,n.dts=(n.dts-s)/i;this.observer.trigger(o.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r=t.samples.length,n=void 0,i=t.inputTimeScale,a=this._initPTS;if(r){for(var s=0;s<r;s++)(n=t.samples[s]).pts=(n.pts-a)/i;this.observer.trigger(o.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}();e.a=u},function(t,e,r){"use strict";var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.a=n},function(t,e,r){"use strict";var n=Math.pow(2,32)-1,i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),r=8,n=e.length,i=n,o=void 0;n--;)r+=e[n].byteLength;for((o=new Uint8Array(r))[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=255&r,o.set(t,4),n=0,r=8;n<i;n++)o.set(e[n],r),r+=e[n].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r=e.samples||[],n=new Uint8Array(4+r.length),i=void 0,o=void 0;for(o=0;o<r.length;o++)i=r[o].flags,n[o+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,n)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r=[],n=[],i=void 0,o=void 0,a=void 0;for(i=0;i<e.sps.length;i++)a=(o=e.sps[i]).byteLength,r.push(a>>>8&255),r.push(255&a),r=r.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)a=(o=e.pps[i]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(o));var s=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),u=e.width,c=e.height,l=e.pixelRatio[0],f=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,f>>24,f>>16&255,f>>8&255,255&f])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,o=e.width,a=e.height,s=Math.floor(i/(n+1)),u=Math.floor(i%(n+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),o=e.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n=e.samples||[],i=n.length,o=12+16*i,a=new Uint8Array(o),s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0;for(r+=8+o,a.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),s=0;s<i;s++)c=(u=n[s]).duration,l=u.size,f=u.flags,d=u.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,l>>>24&255,l>>>16&255,l>>>8&255,255&l,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,61440&f.degradPrio,15&f.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s);return t.box(t.types.trun,a)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),n=void 0;return(n=new Uint8Array(t.FTYP.byteLength+r.byteLength)).set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}();e.a=i},function(t,e,r){"use strict";var n=r(1),i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,i,o,a,s,u){var c=this.observer,l="";t&&(l+="audio"),e&&(l+="video"),c.trigger(n.a.FRAG_PARSING_DATA,{data1:u,startPTS:o,startDTS:o,type:l,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),c.trigger(n.a.FRAG_PARSED)},t}();e.a=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18),i=r(1),o=r(0),a=r(8),s=r.n(a);e.default=function(t){var e=new s.a;e.trigger=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(n))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new n.a(e,a.typeSupported,s,a.vendor);try{Object(o.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(i.a.FRAG_DECRYPTED,r),e.on(i.a.FRAG_PARSING_INIT_SEGMENT,r),e.on(i.a.FRAG_PARSED,r),e.on(i.a.ERROR,r),e.on(i.a.FRAG_PARSING_METADATA,r),e.on(i.a.FRAG_PARSING_USERDATA,r),e.on(i.a.INIT_PTS_FOUND,r),e.on(i.a.FRAG_PARSING_DATA,function(e,r){var n=[],i={event:e,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),t.postMessage(i,n)})}},function(t,e,r){"use strict";e.a={toString:function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}}},function(t,e,r){"use strict";function n(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}e.a=function(t,e,r){if(function(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}(t,e,r)){var o=function(t,e){var r=t.fragments,n=e.fragments;if(n.length&&r.length){var o=function(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}(r,n[0].cc);return!o||o&&!o.startPTS?void i.b.log("No frag in previous level to align on"):o}i.b.log("No fragments to align")}(e.details,r);o&&(i.b.log("Adjusting PTS using last level due to CC increase within current level"),n(o.start,r))}if(!1===r.PTSKnown&&e&&e.details&&e.details.fragments&&e.details.fragments.length){var a=e.details.programDateTime,s=(r.programDateTime-a)/1e3+e.details.fragments[0].start;isNaN(s)||(i.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),n(s,r))}};var i=(r(7),r(0))},function(t,e,r){"use strict";var n=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call.apply(t,[this,r].concat(i)));return a._tickInterval=null,a._tickTimer=null,a._tickCallCount=0,a._boundTick=a.tick.bind(a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.prototype.hasInterval=function(){return!!this._tickInterval},e.prototype.hasNextTick=function(){return!!this._tickTimer},e.prototype.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)}),e.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),e.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.prototype.tick=function(){1==++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},e.prototype.doTick=function(){},e}(r(3).a);e.a=n},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2],n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2],n=0;if(r.programDateTime){var i=Date.parse(r.programDateTime);isNaN(i)||(n=1e3*e+i-1e3*t)}return n},e.b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(t)||!t.length||null===e)return null;if(e<t[0].pdt)return null;if(e>=t[t.length-1].endPdt)return null;for(var r=0;r<t.length;++r){var n=t[r];if(e<n.endPdt)return n}return null},e.c=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=void 0,u=t?e[t.sn-e[0].sn+1]:null;return r<o&&(r>o-a&&(a=0),s=u&&!n(r,a,u)?u:i.a.search(e,n.bind(null,r,a))),s},e.d=n;var i=r(7)},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(0),a=r(2),s=r(15),u=r(22),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=window.performance,d=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.MANIFEST_LOADED,n.a.LEVEL_LOADED,n.a.AUDIO_TRACK_SWITCHED,n.a.FRAG_LOADED,n.a.ERROR));return i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},e.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],r=void 0,i={},c=null,l=!1,f=!1,d=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,l=l||!!t.videoCodec,f=f||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),d&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(c=i[t.bitrate])?c.url.push(t.url):(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,e.push(t)),t.attrs&&t.attrs.AUDIO&&Object(u.a)(c||t,"audio",t.attrs.AUDIO),t.attrs&&t.attrs.SUBTITLES&&Object(u.a)(c||t,"text",t.attrs.SUBTITLES)}),l&&f&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||Object(s.a)(e))&&(!r||Object(s.a)(r))}),t.audioTracks&&(h=t.audioTracks.filter(function(t){return!t.audioCodec||Object(s.a)(t.audioCodec,"audio")})),e.length>0){r=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var p=0;p<e.length;p++)if(e[p].bitrate===r){this._firstLevel=p,o.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(n.a.MANIFEST_PARSED,{levels:e,audioTracks:h,firstLevel:this._firstLevel,stats:t.stats,audio:f,video:l,altAudio:h.length>0&&l})}else this.hls.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){o.b.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,r.trigger(n.a.LEVEL_SWITCHING,i)}var s=e[t],u=s.details;if(!u||u.live){var c=s.urlId;r.trigger(n.a.LEVEL_LOADING,{url:s.url[c],level:t,id:c})}}else r.trigger(n.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(t.fatal)t.type===a.b.NETWORK_ERROR&&this.clearTimer();else{var e=!1,r=!1,n=void 0;switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:n=t.frag.level,r=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case a.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,r)}},e.prototype.recoverLevel=function(t,e,r,n){var i=this,a=this.hls.config,s=t.details,u=this._levels[e],c=void 0,l=void 0,f=void 0;if(u.loadError++,u.fragmentError=n,r){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return o.b.error("level controller, cannot recover from "+s+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);l=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},l),t.levelRetry=!0,this.levelRetryCount++,o.b.warn("level controller, "+s+", retry in "+l+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((c=u.url.length)>1&&u.loadError<c?(u.urlId=(u.urlId+1)%c,u.details=void 0,o.b.warn("level controller, "+s+" for level "+e+": switching to redundant URL-id "+u.urlId)):-1===this.manualLevelIndex?(f=0===e?this._levels.length-1:e-1,o.b.warn("level controller, "+s+": switch to "+f),this.hls.nextAutoLevel=this.currentLevelIndex=f):n&&(o.b.warn("level controller, "+s+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var n=this._levels[r];n.fragmentError||(n.loadError=0,this.levelRetryCount=0);var i=t.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),s=a,u=n.details;u&&i.endSN===u.endSN&&(s/=2,o.b.log("same live playlist, reload twice faster")),s-=f.now()-t.stats.trequest,s=Math.max(a/2,Math.round(s)),o.b.log("live playlist, reload in "+Math.round(s)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},s)}else this.clearTimer()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var n=r.audioGroupIds.findIndex(function(t){return t===e});n!==r.urlId&&(r.urlId=n,this.startLoad())}},e.prototype.loadLevel=function(){if(o.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"===(void 0===t?"undefined":c(t))&&t.url.length>0){var e=this.currentLevelIndex,r=t.urlId,i=t.url[r];o.b.log("Attempt loading level index "+e+" with URL-id "+r),this.hls.trigger(n.a.LEVEL_LOADING,{url:i,level:e,id:r})}}},l(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(i.a);e.a=d},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(9),a=r(50),s=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.MEDIA_ATTACHED,n.a.MEDIA_DETACHING,n.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){i.a.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){Object(a.a)(this.id3Track),this.id3Track=void 0,this.media=void 0},e.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return Object(a.b)(r,this.media),r}return this.media.addTextTrack("metadata","id3")},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=o.a.getID3Frames(r[i].data);if(a){var s=r[i].pts,u=i<r.length-1?r[i+1].pts:e.endPTS;s===u&&(u+=1e-4);for(var c=0;c<a.length;c++){var l=a[c];if(!o.a.isTimeStampFrame(l)){var f=new n(s,u,"");f.value=l,this.id3Track.addCue(f)}}}}},e}(i.a);e.a=s},function(t,e,r){"use strict";e.b=function(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)},e.a=function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}},function(t,e,r){"use strict";e.a=function(){var t=Object(n.a)(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i};var n=r(10)},function(t,e,r){"use strict";r.d(e,"a",function(){return g});var n=r(53),i=r(56),o=r(57),a=r(58),s=r(59),u=r(4),c=(r.n(u),r(4)),l=(r.n(c),r(4)),f=(r.n(l),r(4)),d=(r.n(f),r(4)),h=(r.n(d),r(4)),p=(r.n(h),r(4)),v=(r.n(p),r(60)),g={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.a,bufferController:i.a,capLevelController:o.a,fpsController:a.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:v.a}},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(17),a=r(2),s=r(0),u=r(54),c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=window.performance,f=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.FRAG_LOADING,n.a.FRAG_LOADED,n.a.FRAG_BUFFERED,n.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=r,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.clearTimer(),i.a.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=e.level,o=void 0,a=void 0;r.levels[i].details.live?(o=n.abrEwmaFastLive,a=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,a=n.abrEwmaSlowVoD),this._bwEstimator=new u.a(r,a,o,n.abrEwmaDefaultEstimate)}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var i=r.loader,a=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return s.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var u=i.stats;if(e&&u&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var c=l.now()-u.trequest,f=Math.abs(e.playbackRate);if(c>500*r.duration/f){var d=t.levels,h=Math.max(1,u.bw?u.bw/8:1e3*u.loaded/c),p=d[r.level],v=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,g=u.total?u.total:Math.max(u.loaded,Math.round(r.duration*v/8)),y=e.currentTime,m=(g-u.loaded)/h,b=(o.a.bufferInfo(e,y,t.config.maxBufferHole).end-y)/f;if(b<2*r.duration/f&&m>b){var E=void 0,S=void 0;for(S=r.level-1;S>a;S--){var _=d[S].realBitrate?Math.max(d[S].realBitrate,d[S].bitrate):d[S].bitrate;if((E=r.duration*_/(6.4*h))<b)break}E<m&&(s.b.warn("loading too slow, abort fragment loading and switch to level "+S+":fragLoadedDelay["+S+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+E.toFixed(1)+"<"+m.toFixed(1)+":"+b.toFixed(1)),t.nextLoadLevel=S,this._bwEstimator.sample(c,u.loaded),i.abort(),this.clearTimer(),t.trigger(n.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:u}))}}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],n=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,i=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!(!0===e.aborted||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&e.tload!==e.tbuffered)){var n=e.tparsed-e.trequest;s.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,r,n,i,o,a,u,c){for(var l=i;l>=n;l--){var f,d=c[l].details,h=d?d.totalduration/d.fragments.length:e,p=!!d&&d.live;f=l<=t?a*r:u*r;var v=c[l].realBitrate?Math.max(c[l].realBitrate,c[l].bitrate):c[l].bitrate,g=v*h/f;if(s.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(f)+"/"+v+"/"+h+"/"+o+"/"+g),f>v&&(!g||p&&!this.bitrateTestDelay||g<o))return l}return-1},c(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,a=t.media,u=this.lastLoadedFragLevel,c=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,f=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(o.a.bufferInfo(a,l,n.maxBufferHole).end-l)/f,p=this._findBestLevel(u,c,d,i,e,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;s.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=c?Math.min(c,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(v=(c?Math.min(c,n.maxLoadingDelay):n.maxLoadingDelay)-m,s.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=y=1)}return p=this._findBestLevel(u,c,d,i,e,h+v,g,y,r),Math.max(p,0)}}]),e}(i.a);e.a=f},function(t,e,r){"use strict";var n=r(55),i=function(){function t(e,r,i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=e,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.a(r),this.fast_=new n.a(i)}return t.prototype.sample=function(t,e){var r=8e3*e/(t=Math.max(t,this.minDelayMs_)),n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}();e.a=i},function(t,e,r){"use strict";var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}();e.a=n},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(0),a=r(2),s=r(10),u=Object(s.a)(),c=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.MEDIA_ATTACHING,n.a.MEDIA_DETACHING,n.a.MANIFEST_PARSED,n.a.BUFFER_RESET,n.a.BUFFER_APPENDING,n.a.BUFFER_CODECS,n.a.BUFFER_EOS,n.a.BUFFER_FLUSHING,n.a.LEVEL_PTS_UPDATED,n.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i._live=null,i._objectUrl=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){i.a.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-t.start)>.1){var i=n.updating;try{n.abort()}catch(t){i=!0,o.b.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(o.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.altAudio,n=0;t.altAudio&&(e||r)&&(n=(e?1:0)+(r?1:0),o.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=window.URL.createObjectURL(r),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){o.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){o.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):o.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(n.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){o.b.log("media source opened"),this.hls.trigger(n.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){o.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){o.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;o.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0),i={},a=this.sourceBuffer;for(var s in a)i[s]=a[s].buffered;this.hls.trigger(n.a.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){o.b.error("sourceBuffer error:",t),this.hls.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var i in t)if(!e[i]){var s=t[i],u=s.levelCodec||s.codec,c=s.container+";codecs="+u;o.b.log("creating sourceBuffer("+c+")");try{var l=e[i]=r.addSourceBuffer(c);l.addEventListener("updateend",this.onsbue),l.addEventListener("error",this.onsbe),this.tracks[i]={codec:u,container:s.container},s.buffer=l}catch(t){o.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:c})}}this.hls.trigger(n.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){o.b.error("sourceBuffer error:",t.event),this.hls.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,o.b.log(n+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){var n=t[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}o.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){o.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(o.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(o.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var i in r)e+=r[i].buffered.length}catch(t){o.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(n.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void o.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var s=e[i.type];s?s.updating?r.unshift(i):(s.ended=!1,this.parent=i.parent,s.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){o.b.error("error while trying to append buffer:"+e.message),r.unshift(i);var u={type:a.b.MEDIA_ERROR,parent:i.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,u.details=a.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(o.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],u.fatal=!0,t.trigger(n.a.ERROR,u)):(u.fatal=!1,t.trigger(n.a.ERROR,u))):(this.segments=[],u.details=a.a.BUFFER_FULL_ERROR,u.fatal=!1,t.trigger(n.a.ERROR,u))}}}},e.prototype.flushBuffer=function(t,e,r){var n=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=this.sourceBuffer;if(Object.keys(l).length){if(o.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var f in l)if(!r||f===r){if((n=l[f]).ended=!1,n.updating)return o.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(a=n.buffered.start(i),s=n.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(u=t,c=e):(u=Math.max(a,t),c=Math.min(s,e)),Math.min(c,s)-u>.5)return this.flushBufferCounter++,o.b.log("flush "+f+" ["+u+","+c+"], of ["+a+","+s+"], pos:"+this.media.currentTime),n.remove(u,c),!1}catch(t){o.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else o.b.warn("abort flushing too many retries");o.b.log("buffer flushed")}return!0},e}(i.a);e.a=c},function(t,e,r){"use strict";var n=r(1),i=r(3),o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.FPS_DROP_LEVEL_CAPPING,n.a.MEDIA_ATTACHING,n.a.MANIFEST_PARSED,n.a.BUFFER_CODECS));return i.autoLevelCapping=Number.POSITIVE_INFINITY,i.firstLevel=null,i.levels=[],i.media=null,i.restrictedLevels=[],i.timer=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&(t.video||t.levels.length&&t.altAudio)&&this._startCapping()},e.prototype.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this._startCapping()},e.prototype.onLevelsUpdated=function(t){this.levels=t.levels},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var r=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return e.isLevelAllowed(i,r.restrictedLevels)&&i<=t});return e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n=t.length-1,i=0;i<t.length;i+=1){var o=t[i];if((o.width>=e||o.height>=r)&&function(t,e){return!e||t.width!==e.width||t.height!==e.height}(o,t[i+1])){n=i;break}}return n},o(e,[{key:"mediaWidth",get:function(){var t=void 0,r=this.media;return r&&(t=r.width||r.clientWidth||r.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,r=this.media;return r&&(t=r.height||r.clientHeight||r.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(i.a);e.a=a},function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(0),a=window.performance,s=function(t){function e(r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.a.MEDIA_ATTACHING))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,r){var i=a.now();if(e){if(this.lastTime){var s=i-this.lastTime,u=r-this.lastDroppedFrames,c=e-this.lastDecodedFrames,l=1e3*u/s,f=this.hls;if(f.trigger(n.a.FPS_DROP,{currentDropped:u,currentDecoded:c,totalDroppedFrames:r}),l>0&&u>f.config.fpsDroppedMonitoringThreshold*c){var d=f.currentLevel;o.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===f.autoLevelCapping||f.autoLevelCapping>=d)&&(d-=1,f.trigger(n.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:f.currentLevel}),f.autoLevelCapping=d,f.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(i.a);e.a=s},function(t,e,r){"use strict";var n=r(0),i=window,o=i.performance,a=i.XMLHttpRequest,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:o.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new a;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,i=this.stats,a=this.context,s=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(o.now(),i.trequest)),4===r){var u=e.status;if(u>=200&&u<300){i.tload=Math.max(i.tfirst,o.now());var c=void 0,l=void 0;"arraybuffer"===a.responseType?l=(c=e.response).byteLength:l=(c=e.responseText).length,i.loaded=i.total=l;var f={url:e.responseURL,data:c};this.callbacks.onSuccess(f,i,a,e)}else i.retry>=s.maxRetry||u>=400&&u<499?(n.b.error(u+" while loading "+a.url),this.callbacks.onError({code:u,text:e.statusText},a,e)):(n.b.warn(u+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},t.prototype.loadtimeout=function(){n.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},t}();e.a=s},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null},function(t,e){String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,r=e(t,t,t)&&e}catch(t){}return r}(),e={}.toString,r=function(t){if(null==this)throw TypeError();var r=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=r.length,i=String(t),o=i.length,a=n;if(arguments.length>1){var s=arguments[1];void 0!==s&&(a=s?Number(s):0)!=a&&(a=0)}var u=Math.min(Math.max(a,0),n)-o;if(u<0)return!1;for(var c=-1;++c<o;)if(r.charCodeAt(u+c)!=i.charCodeAt(c))return!1;return!0};t?t(String.prototype,"endsWith",{value:r,configurable:!0,writable:!0}):String.prototype.endsWith=r}()}]).default}])}); 